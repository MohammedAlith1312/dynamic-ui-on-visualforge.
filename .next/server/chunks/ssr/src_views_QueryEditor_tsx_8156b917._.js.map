{"version":3,"sources":["../../../../src/views/QueryEditor.tsx","../../../../src/components/queries/QuerySettingsPanel.tsx","../../../../src/components/queries/QueryJoinTree.tsx","../../../../src/components/queries/QueryFieldSelector.tsx","../../../../node_modules/lucide-react/src/icons/folder-plus.ts","../../../../src/components/queries/QueryConditionTree.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { ArrowLeft, Save } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport QuerySettingsPanel from \"@/components/queries/QuerySettingsPanel\";\r\nimport QueryFieldSelector from \"@/components/queries/QueryFieldSelector\";\r\nimport QueryJoinTree from \"@/components/queries/QueryJoinTree\";\r\nimport QueryConditionTree from \"@/components/queries/QueryConditionTree\";\r\n\r\nexport default function QueryEditor() {\r\n  const params = useParams();\r\n  const queryId = params.queryId as string;\r\n  const router = useRouter();\r\n  const { toast } = useToast();\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [query, setQuery] = useState<any>(null);\r\n  const [settings, setSettings] = useState<any>(null);\r\n\r\n  useEffect(() => {\r\n    fetchQuery();\r\n  }, [queryId]);\r\n\r\n  const fetchQuery = async () => {\r\n    try {\r\n      const { data, error } = await (supabase as any)\r\n        .from('queries')\r\n        .select('*')\r\n        .eq('id', queryId)\r\n        .single();\r\n\r\n      if (error) throw error;\r\n      setQuery(data);\r\n\r\n      // Fetch settings\r\n      const { data: settingsData } = await (supabase as any)\r\n        .from('query_settings')\r\n        .select('*')\r\n        .eq('query_id', queryId)\r\n        .maybeSingle();\r\n\r\n      setSettings(settingsData);\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Error loading query\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n      router.push('/admin/queries');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setSaving(true);\r\n    try {\r\n      const { error } = await (supabase as any)\r\n        .from('queries')\r\n        .update({\r\n          display_name: query.display_name,\r\n          description: query.description,\r\n          is_published: query.is_published,\r\n        })\r\n        .eq('id', queryId);\r\n\r\n      if (error) throw error;\r\n\r\n      toast({\r\n        title: \"Query saved\",\r\n        description: \"Your changes have been saved successfully.\",\r\n      });\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Error saving query\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\r\n        <p className=\"text-muted-foreground\">Loading query...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!query) return null;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <div className=\"border-b\">\r\n        <div className=\"max-w-7xl mx-auto px-8 py-4 flex justify-between items-center\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <Button variant=\"ghost\" size=\"icon\" onClick={() => router.push('/admin/queries')}>\r\n              <ArrowLeft className=\"h-4 w-4\" />\r\n            </Button>\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold\">{query.display_name}</h1>\r\n              <p className=\"text-sm text-muted-foreground\">{query.query_type} query</p>\r\n            </div>\r\n          </div>\r\n          <Button onClick={handleSave} disabled={saving}>\r\n            <Save className=\"mr-2 h-4 w-4\" />\r\n            {saving ? \"Saving...\" : \"Save Changes\"}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-8 py-8\">\r\n        <div className=\"space-y-6\">\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"displayName\">Display Name</Label>\r\n            <Input\r\n              id=\"displayName\"\r\n              value={query.display_name}\r\n              onChange={(e) => setQuery({ ...query, display_name: e.target.value })}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"description\">Description</Label>\r\n            <Textarea\r\n              id=\"description\"\r\n              value={query.description || ''}\r\n              onChange={(e) => setQuery({ ...query, description: e.target.value })}\r\n              rows={3}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Switch\r\n              id=\"published\"\r\n              checked={query.is_published}\r\n              onCheckedChange={(checked) => setQuery({ ...query, is_published: checked })}\r\n            />\r\n            <Label htmlFor=\"published\">Published</Label>\r\n          </div>\r\n\r\n          {settings?.primary_entity_id && (\r\n            <>\r\n              <QuerySettingsPanel queryId={queryId!} queryType={query.query_type} />\r\n              <QueryFieldSelector\r\n                queryId={queryId!}\r\n                queryType={query.query_type}\r\n                primaryEntityId={settings.primary_entity_id}\r\n              />\r\n              <QueryJoinTree queryId={queryId!} />\r\n              <QueryConditionTree queryId={queryId!} />\r\n            </>\r\n          )}\r\n\r\n          {!settings?.primary_entity_id && (\r\n            <div className=\"bg-muted/50 p-6 rounded-lg\">\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Configure query settings below to start building your query. Set the primary entity first.\r\n              </p>\r\n              <div className=\"mt-4\">\r\n                <QuerySettingsPanel queryId={queryId!} queryType={query.query_type} />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\n\r\ninterface QuerySettingsPanelProps {\r\n  queryId: string;\r\n  queryType: string;\r\n}\r\n\r\ninterface Entity {\r\n  id: string;\r\n  display_name: string;\r\n}\r\n\r\ninterface Settings {\r\n  primary_entity_id: string;\r\n  group_by: string[];\r\n  sort_entity_id: string | null;\r\n  sort_field: string | null;\r\n  sort_order: string | null;\r\n  limit_rows: number;\r\n  display_style: string;\r\n  show_row_numbers: boolean;\r\n}\r\n\r\nexport default function QuerySettingsPanel({ queryId, queryType }: QuerySettingsPanelProps) {\r\n  const { toast } = useToast();\r\n  const [entities, setEntities] = useState<Entity[]>([]);\r\n  const [settings, setSettings] = useState<Settings>({\r\n    primary_entity_id: '',\r\n    group_by: [],\r\n    sort_entity_id: null,\r\n    sort_field: null,\r\n    sort_order: 'asc',\r\n    limit_rows: 50,\r\n    display_style: 'table',\r\n    show_row_numbers: false,\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchEntities();\r\n    fetchSettings();\r\n  }, [queryId]);\r\n\r\n  const fetchEntities = async () => {\r\n    const { data } = await (supabase as any).from('entities').select('id, display_name').order('display_name');\r\n    setEntities(data || []);\r\n  };\r\n\r\n  const fetchSettings = async () => {\r\n    const { data } = await (supabase as any)\r\n      .from('query_settings')\r\n      .select('*')\r\n      .eq('query_id', queryId)\r\n      .maybeSingle();\r\n\r\n    if (data) {\r\n      setSettings(data);\r\n    }\r\n  };\r\n\r\n  const updateSettings = async (updates: Partial<Settings>) => {\r\n    const newSettings = { ...settings, ...updates };\r\n    setSettings(newSettings);\r\n\r\n    try {\r\n      const { error } = await (supabase as any)\r\n        .from('query_settings')\r\n        .upsert({\r\n          query_id: queryId,\r\n          ...newSettings,\r\n        });\r\n\r\n      if (error) throw error;\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Error updating settings\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6 p-6 border rounded-lg\">\r\n      <h3 className=\"text-lg font-semibold\">Query Settings</h3>\r\n\r\n      <div className=\"space-y-2\">\r\n        <Label>Primary Entity</Label>\r\n        <Select\r\n          value={settings.primary_entity_id}\r\n          onValueChange={(value) => updateSettings({ primary_entity_id: value })}\r\n        >\r\n          <SelectTrigger>\r\n            <SelectValue placeholder=\"Select entity\" />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            {entities.map((entity) => (\r\n              <SelectItem key={entity.id} value={entity.id}>\r\n                {entity.display_name}\r\n              </SelectItem>\r\n            ))}\r\n          </SelectContent>\r\n        </Select>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <Label>Sort Field</Label>\r\n        <Input\r\n          placeholder=\"Field name\"\r\n          value={settings.sort_field || ''}\r\n          onChange={(e) => updateSettings({ sort_field: e.target.value })}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <Label>Sort Order</Label>\r\n        <Select\r\n          value={settings.sort_order || 'asc'}\r\n          onValueChange={(value) => updateSettings({ sort_order: value })}\r\n        >\r\n          <SelectTrigger>\r\n            <SelectValue />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            <SelectItem value=\"asc\">Ascending</SelectItem>\r\n            <SelectItem value=\"desc\">Descending</SelectItem>\r\n          </SelectContent>\r\n        </Select>\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <Label>Limit Rows</Label>\r\n        <Input\r\n          type=\"number\"\r\n          min=\"1\"\r\n          max=\"500\"\r\n          value={settings.limit_rows}\r\n          onChange={(e) => updateSettings({ limit_rows: parseInt(e.target.value) || 50 })}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"space-y-2\">\r\n        <Label>Display Style</Label>\r\n        <Select\r\n          value={settings.display_style}\r\n          onValueChange={(value) => updateSettings({ display_style: value })}\r\n        >\r\n          <SelectTrigger>\r\n            <SelectValue />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            <SelectItem value=\"table\">Table</SelectItem>\r\n            <SelectItem value=\"grid\">Grid</SelectItem>\r\n            <SelectItem value=\"list\">List</SelectItem>\r\n          </SelectContent>\r\n        </Select>\r\n      </div>\r\n\r\n      <div className=\"flex items-center space-x-2\">\r\n        <Switch\r\n          checked={settings.show_row_numbers}\r\n          onCheckedChange={(checked) => updateSettings({ show_row_numbers: checked })}\r\n        />\r\n        <Label>Show Row Numbers</Label>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useEffect } from \"react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Trash2, Plus, FolderPlus, ChevronRight, ChevronDown } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\n\r\ninterface QueryJoinTreeProps {\r\n  queryId: string;\r\n}\r\n\r\ninterface Entity {\r\n  id: string;\r\n  display_name: string;\r\n}\r\n\r\ninterface EntityField {\r\n  id: string;\r\n  name: string;\r\n  display_name: string;\r\n  entity_id: string;\r\n}\r\n\r\ninterface JoinCondition {\r\n  id: string;\r\n  join_id: string;\r\n  primary_field: string;\r\n  target_field: string;\r\n  logic: string;\r\n  position: number;\r\n}\r\n\r\ninterface JoinNode {\r\n  id: string;\r\n  query_id: string;\r\n  parent_join_id: string | null;\r\n  is_group: boolean;\r\n  position: number;\r\n  target_entity_id: string | null;\r\n  join_type: string | null;\r\n  primary_field: string | null;\r\n  target_field: string | null;\r\n}\r\n\r\nconst JOIN_TYPES = [\r\n  { value: 'inner', label: 'Inner Join' },\r\n  { value: 'left', label: 'Left Join' },\r\n  { value: 'right', label: 'Right Join' },\r\n];\r\n\r\nfunction QueryJoinTree({ queryId }: QueryJoinTreeProps) {\r\n  const [entities, setEntities] = useState<Entity[]>([]);\r\n  const [rootJoins, setRootJoins] = useState<JoinNode[]>([]);\r\n  const { toast } = useToast();\r\n\r\n  useEffect(() => {\r\n    fetchEntities();\r\n    fetchRootJoins();\r\n  }, [queryId]);\r\n\r\n  const fetchEntities = async () => {\r\n    const { data } = await (supabase as any)\r\n      .from('entities')\r\n      .select('id, display_name')\r\n      .order('display_name');\r\n    setEntities(data || []);\r\n  };\r\n\r\n  const fetchRootJoins = async () => {\r\n    const { data } = await (supabase as any)\r\n      .from('query_joins')\r\n      .select('*')\r\n      .eq('query_id', queryId)\r\n      .is('parent_join_id', null)\r\n      .order('position');\r\n    setRootJoins(data || []);\r\n  };\r\n\r\n  const addJoin = async (parentId: string | null = null) => {\r\n    console.log('addJoin called', { parentId, entitiesLength: entities.length });\r\n    if (!entities.length) {\r\n      toast({\r\n        title: \"No entities available\",\r\n        description: \"Please create at least one entity first.\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const position = rootJoins.length;\r\n      const insertData = {\r\n        query_id: queryId,\r\n        parent_join_id: parentId,\r\n        is_group: false,\r\n        target_entity_id: entities[0].id,\r\n          join_type: 'inner',\r\n        primary_field: '',\r\n        target_field: '',\r\n        position,\r\n      };\r\n      console.log('Inserting join:', insertData);\r\n      \r\n      const { data, error } = await (supabase as any)\r\n        .from('query_joins')\r\n        .insert(insertData);\r\n\r\n      console.log('Insert result:', { data, error });\r\n\r\n      if (error) throw error;\r\n\r\n      fetchRootJoins();\r\n      toast({ title: \"Join added\" });\r\n    } catch (error: any) {\r\n      console.error('Error adding join:', error);\r\n      toast({\r\n        title: \"Error adding join\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const addJoinGroup = async (parentId: string | null = null) => {\r\n    console.log('addJoinGroup called', { parentId });\r\n    try {\r\n      const position = rootJoins.length;\r\n      const insertData = {\r\n        query_id: queryId,\r\n        parent_join_id: parentId,\r\n        is_group: true,\r\n        position,\r\n      };\r\n      console.log('Inserting join group:', insertData);\r\n      \r\n      const { data, error } = await (supabase as any)\r\n        .from('query_joins')\r\n        .insert(insertData);\r\n\r\n      console.log('Insert group result:', { data, error });\r\n\r\n      if (error) throw error;\r\n\r\n      fetchRootJoins();\r\n      toast({ title: \"Join group added\" });\r\n    } catch (error: any) {\r\n      console.error('Error adding join group:', error);\r\n      toast({\r\n        title: \"Error adding join group\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-sm font-semibold\">Joins</h3>\r\n        <div className=\"flex gap-1.5\">\r\n          <Button onClick={() => addJoin()} size=\"sm\" variant=\"outline\" className=\"h-7 text-xs\">\r\n            <Plus className=\"h-3 w-3 mr-1\" />\r\n            Join\r\n          </Button>\r\n          <Button onClick={() => addJoinGroup()} size=\"sm\" variant=\"outline\" className=\"h-7 text-xs\">\r\n            <FolderPlus className=\"h-3 w-3 mr-1\" />\r\n            Group\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {rootJoins.length === 0 ? (\r\n        <div className=\"bg-muted/30 p-4 rounded-md text-center\">\r\n          <p className=\"text-xs text-muted-foreground\">\r\n            No joins configured. Click \"Join\" to add one.\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-1 border-l-2 border-border/50 pl-2\">\r\n          {rootJoins.map((join) => (\r\n            <JoinTreeNode\r\n              key={join.id}\r\n              node={join}\r\n              level={0}\r\n              entities={entities}\r\n              onRefresh={fetchRootJoins}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface JoinTreeNodeProps {\r\n  node: JoinNode;\r\n  level: number;\r\n  entities: Entity[];\r\n  onRefresh: () => void;\r\n}\r\n\r\nfunction JoinTreeNode({ node, level, entities, onRefresh }: JoinTreeNodeProps) {\r\n  const [children, setChildren] = useState<JoinNode[]>([]);\r\n  const [isExpanded, setIsExpanded] = useState(true);\r\n  const [primaryEntityFields, setPrimaryEntityFields] = useState<EntityField[]>([]);\r\n  const [targetEntityFields, setTargetEntityFields] = useState<EntityField[]>([]);\r\n  const [joinConditions, setJoinConditions] = useState<JoinCondition[]>([]);\r\n  const { toast } = useToast();\r\n\r\n  useEffect(() => {\r\n    if (node.is_group) {\r\n      fetchChildren();\r\n    } else if (node.target_entity_id) {\r\n      fetchEntityFields(node.target_entity_id);\r\n      fetchJoinConditions();\r\n    }\r\n  }, [node.id, node.is_group, node.target_entity_id]);\r\n\r\n  const fetchChildren = async () => {\r\n    const { data } = await (supabase as any)\r\n      .from('query_joins')\r\n      .select('*')\r\n      .eq('parent_join_id', node.id)\r\n      .order('position');\r\n    setChildren(data || []);\r\n  };\r\n\r\n  const fetchEntityFields = async (entityId: string) => {\r\n    const { data } = await (supabase as any)\r\n      .from('entity_fields')\r\n      .select('id, name, display_name, entity_id')\r\n      .eq('entity_id', entityId)\r\n      .order('display_name');\r\n    setTargetEntityFields(data || []);\r\n  };\r\n\r\n  const fetchJoinConditions = async () => {\r\n    const { data } = await (supabase as any)\r\n      .from('query_join_conditions')\r\n      .select('*')\r\n      .eq('join_id', node.id)\r\n      .order('position');\r\n    setJoinConditions(data || []);\r\n  };\r\n\r\n  const updateNode = async (updates: Partial<JoinNode>) => {\r\n    try {\r\n      const { error } = await (supabase as any)\r\n        .from('query_joins')\r\n        .update(updates)\r\n        .eq('id', node.id);\r\n\r\n      if (error) throw error;\r\n\r\n      // If target entity changed, fetch new fields\r\n      if (updates.target_entity_id) {\r\n        fetchEntityFields(updates.target_entity_id);\r\n      }\r\n\r\n      onRefresh();\r\n      if (node.is_group) fetchChildren();\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Error updating join\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const deleteNode = async () => {\r\n    try {\r\n      const { error } = await (supabase as any)\r\n        .from('query_joins')\r\n        .delete()\r\n        .eq('id', node.id);\r\n\r\n      if (error) throw error;\r\n\r\n      onRefresh();\r\n      toast({ title: \"Join deleted\" });\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Error deleting join\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const addChildJoin = async () => {\r\n    if (!entities.length) {\r\n      toast({\r\n        title: \"No entities available\",\r\n        description: \"Please create at least one entity first.\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const position = children.length;\r\n      const { error } = await (supabase as any)\r\n        .from('query_joins')\r\n        .insert({\r\n          query_id: node.query_id,\r\n          parent_join_id: node.id,\r\n          is_group: false,\r\n          target_entity_id: entities[0].id,\r\n          join_type: 'inner',\r\n          primary_field: '',\r\n          target_field: '',\r\n          position,\r\n        });\r\n\r\n      if (error) throw error;\r\n\r\n      fetchChildren();\r\n      toast({ title: \"Join added\" });\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Error adding join\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const addChildGroup = async () => {\r\n    try {\r\n      const position = children.length;\r\n      const { error } = await (supabase as any)\r\n        .from('query_joins')\r\n        .insert({\r\n          query_id: node.query_id,\r\n          parent_join_id: node.id,\r\n          is_group: true,\r\n          position,\r\n        });\r\n\r\n      if (error) throw error;\r\n\r\n      fetchChildren();\r\n      toast({ title: \"Join group added\" });\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Error adding join group\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const addJoinCondition = async () => {\r\n    if (!targetEntityFields.length) {\r\n      toast({\r\n        title: \"No fields available\",\r\n        description: \"Select an entity first.\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const position = joinConditions.length;\r\n      const { error } = await (supabase as any)\r\n        .from('query_join_conditions')\r\n        .insert({\r\n          join_id: node.id,\r\n          primary_field: targetEntityFields[0].name,\r\n          target_field: targetEntityFields[0].name,\r\n          logic: 'and',\r\n          position,\r\n        });\r\n\r\n      if (error) throw error;\r\n\r\n      fetchJoinConditions();\r\n      toast({ title: \"Join condition added\" });\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Error adding join condition\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const updateJoinCondition = async (conditionId: string, updates: Partial<JoinCondition>) => {\r\n    try {\r\n      const { error } = await (supabase as any)\r\n        .from('query_join_conditions')\r\n        .update(updates)\r\n        .eq('id', conditionId);\r\n\r\n      if (error) throw error;\r\n\r\n      fetchJoinConditions();\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Error updating join condition\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const deleteJoinCondition = async (conditionId: string) => {\r\n    try {\r\n      const { error } = await (supabase as any)\r\n        .from('query_join_conditions')\r\n        .delete()\r\n        .eq('id', conditionId);\r\n\r\n      if (error) throw error;\r\n\r\n      fetchJoinConditions();\r\n      toast({ title: \"Join condition deleted\" });\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Error deleting join condition\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  if (node.is_group) {\r\n    return (\r\n      <div className=\"space-y-1\">\r\n        <div className=\"flex items-center gap-1.5 p-2 rounded-md bg-muted/30 hover:bg-muted/50 transition-colors\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            className=\"h-5 w-5 p-0\"\r\n            onClick={() => setIsExpanded(!isExpanded)}\r\n          >\r\n            {isExpanded ? (\r\n              <ChevronDown className=\"h-3 w-3\" />\r\n            ) : (\r\n              <ChevronRight className=\"h-3 w-3\" />\r\n            )}\r\n          </Button>\r\n          \r\n          <FolderPlus className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n          <span className=\"text-xs font-medium\">Join Group</span>\r\n\r\n          <div className=\"flex-1\" />\r\n\r\n          <Button onClick={addChildJoin} size=\"sm\" variant=\"ghost\" className=\"h-6 text-xs px-1.5\">\r\n            <Plus className=\"h-3 w-3 mr-1\" />\r\n            Join\r\n          </Button>\r\n          <Button onClick={addChildGroup} size=\"sm\" variant=\"ghost\" className=\"h-6 text-xs px-1.5\">\r\n            <FolderPlus className=\"h-3 w-3 mr-1\" />\r\n            Group\r\n          </Button>\r\n          <Button variant=\"ghost\" size=\"sm\" onClick={deleteNode} className=\"h-6 w-6 p-0\">\r\n            <Trash2 className=\"h-3 w-3 text-destructive\" />\r\n          </Button>\r\n        </div>\r\n\r\n        {isExpanded && (\r\n          <div className=\"ml-3 border-l-2 border-border/50 pl-2 space-y-1\">\r\n            {children.length === 0 ? (\r\n              <div className=\"bg-muted/20 p-2 rounded text-center\">\r\n                <p className=\"text-xs text-muted-foreground\">Empty group</p>\r\n              </div>\r\n            ) : (\r\n              children.map((child) => (\r\n                <JoinTreeNode\r\n                  key={child.id}\r\n                  node={child}\r\n                  level={level + 1}\r\n                  entities={entities}\r\n                  onRefresh={fetchChildren}\r\n                />\r\n              ))\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Leaf join\r\n  return (\r\n    <div className=\"space-y-1\">\r\n      <div className=\"flex items-center gap-1.5 p-2 rounded-md bg-card border hover:border-primary/30 transition-colors group\">\r\n        <Select\r\n          value={node.join_type || 'inner'}\r\n          onValueChange={(value) => updateNode({ join_type: value })}\r\n        >\r\n          <SelectTrigger className=\"h-7 w-[90px] text-xs\">\r\n            <SelectValue />\r\n          </SelectTrigger>\r\n          <SelectContent className=\"bg-popover z-50\">\r\n            {JOIN_TYPES.map((type) => (\r\n              <SelectItem key={type.value} value={type.value} className=\"text-xs\">\r\n                {type.label}\r\n              </SelectItem>\r\n            ))}\r\n          </SelectContent>\r\n        </Select>\r\n\r\n        <Select\r\n          value={node.target_entity_id || ''}\r\n          onValueChange={(value) => updateNode({ target_entity_id: value })}\r\n        >\r\n          <SelectTrigger className=\"h-7 w-[130px] text-xs\">\r\n            <SelectValue placeholder=\"Entity\" />\r\n          </SelectTrigger>\r\n          <SelectContent className=\"bg-popover z-50\">\r\n            {entities.map((entity) => (\r\n              <SelectItem key={entity.id} value={entity.id} className=\"text-xs\">\r\n                {entity.display_name}\r\n              </SelectItem>\r\n            ))}\r\n          </SelectContent>\r\n        </Select>\r\n\r\n        <span className=\"text-xs text-muted-foreground\">ON</span>\r\n\r\n        {joinConditions.length > 0 && (\r\n          <span className=\"text-xs text-muted-foreground\">\r\n            ({joinConditions.length} condition{joinConditions.length !== 1 ? 's' : ''})\r\n          </span>\r\n        )}\r\n\r\n        <div className=\"flex-1\" />\r\n\r\n        <Button \r\n          onClick={addJoinCondition}\r\n          size=\"sm\" \r\n          variant=\"ghost\" \r\n          className=\"h-6 text-xs px-1.5 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n        >\r\n          <Plus className=\"h-3 w-3 mr-1\" />\r\n          Add Condition\r\n        </Button>\r\n\r\n        <Button \r\n          variant=\"ghost\" \r\n          size=\"sm\" \r\n          onClick={deleteNode} \r\n          className=\"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n        >\r\n          <Trash2 className=\"h-3 w-3 text-destructive\" />\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Join Conditions */}\r\n      {joinConditions.length > 0 && (\r\n        <div className=\"ml-3 border-l-2 border-border/30 pl-2 space-y-1\">\r\n          {joinConditions.map((condition, index) => (\r\n            <div key={condition.id} className=\"flex items-center gap-1.5 p-1.5 rounded-md bg-muted/20 hover:bg-muted/40 transition-colors group/condition\">\r\n              {index === 0 ? (\r\n                <div className=\"h-6 w-14 flex items-center justify-center\">\r\n                  <span className=\"text-[10px] text-muted-foreground font-medium\">AND</span>\r\n                </div>\r\n              ) : (\r\n                <Select\r\n                  value={condition.logic}\r\n                  onValueChange={(value) => updateJoinCondition(condition.id, { logic: value })}\r\n                >\r\n                  <SelectTrigger className=\"h-6 w-14 text-xs\">\r\n                    <SelectValue />\r\n                  </SelectTrigger>\r\n                  <SelectContent className=\"bg-popover z-50\">\r\n                    <SelectItem value=\"and\" className=\"text-xs\">AND</SelectItem>\r\n                    <SelectItem value=\"or\" className=\"text-xs\">OR</SelectItem>\r\n                  </SelectContent>\r\n                </Select>\r\n              )}\r\n\r\n              <Select\r\n                value={condition.primary_field}\r\n                onValueChange={(value) => updateJoinCondition(condition.id, { primary_field: value })}\r\n              >\r\n                <SelectTrigger className=\"h-6 w-[110px] text-xs\">\r\n                  <SelectValue placeholder=\"Primary field\" />\r\n                </SelectTrigger>\r\n                <SelectContent className=\"bg-popover z-50\">\r\n                  {targetEntityFields.map((field) => (\r\n                    <SelectItem key={field.id} value={field.name} className=\"text-xs\">\r\n                      {field.display_name}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n\r\n              <span className=\"text-xs text-muted-foreground\">=</span>\r\n\r\n              <Select\r\n                value={condition.target_field}\r\n                onValueChange={(value) => updateJoinCondition(condition.id, { target_field: value })}\r\n              >\r\n                <SelectTrigger className=\"h-6 w-[110px] text-xs\">\r\n                  <SelectValue placeholder=\"Target field\" />\r\n                </SelectTrigger>\r\n                <SelectContent className=\"bg-popover z-50\">\r\n                  {targetEntityFields.map((field) => (\r\n                    <SelectItem key={field.id} value={field.name} className=\"text-xs\">\r\n                      {field.display_name}\r\n                    </SelectItem>\r\n                  ))}\r\n                </SelectContent>\r\n              </Select>\r\n\r\n              <Button \r\n                variant=\"ghost\" \r\n                size=\"sm\" \r\n                onClick={() => deleteJoinCondition(condition.id)} \r\n                className=\"h-5 w-5 p-0 opacity-0 group-hover/condition:opacity-100 transition-opacity\"\r\n              >\r\n                <Trash2 className=\"h-2.5 w-2.5 text-destructive\" />\r\n              </Button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default QueryJoinTree;\r\n","import { useState, useEffect } from \"react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { Plus, Trash2 } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\n\r\ninterface QueryFieldSelectorProps {\r\n  queryId: string;\r\n  queryType: string;\r\n  primaryEntityId: string;\r\n}\r\n\r\ninterface Entity {\r\n  id: string;\r\n  display_name: string;\r\n}\r\n\r\ninterface EntityField {\r\n  id: string;\r\n  name: string;\r\n  display_name: string;\r\n  field_type: string;\r\n}\r\n\r\ninterface Field {\r\n  id: string;\r\n  entity_id: string;\r\n  field_name: string;\r\n  aggregation: string | null;\r\n}\r\n\r\nexport default function QueryFieldSelector({ queryId, queryType, primaryEntityId }: QueryFieldSelectorProps) {\r\n  const { toast } = useToast();\r\n  const [entities, setEntities] = useState<Entity[]>([]);\r\n  const [fields, setFields] = useState<Field[]>([]);\r\n  const [selectedEntity, setSelectedEntity] = useState('');\r\n  const [selectedField, setSelectedField] = useState('');\r\n  const [selectedAgg, setSelectedAgg] = useState<string>('');\r\n  const [availableFields, setAvailableFields] = useState<EntityField[]>([]);\r\n\r\n  useEffect(() => {\r\n    fetchEntities();\r\n    fetchFields();\r\n  }, [queryId]);\r\n\r\n  const fetchEntities = async () => {\r\n    const { data } = await (supabase as any).from('entities').select('id, display_name').order('display_name');\r\n    setEntities(data || []);\r\n  };\r\n\r\n  const fetchFields = async () => {\r\n    const { data } = await (supabase as any)\r\n      .from('query_fields')\r\n      .select('*')\r\n      .eq('query_id', queryId)\r\n      .order('position');\r\n\r\n    setFields(data || []);\r\n  };\r\n\r\n  const loadEntityFields = async (entityId: string) => {\r\n    if (!entityId) {\r\n      setAvailableFields([]);\r\n      return;\r\n    }\r\n\r\n    const { data } = await (supabase as any)\r\n      .from('entity_fields')\r\n      .select('id, name, display_name, field_type')\r\n      .eq('entity_id', entityId)\r\n      .order('position');\r\n\r\n    setAvailableFields(data || []);\r\n  };\r\n\r\n  const handleEntityChange = (entityId: string) => {\r\n    setSelectedEntity(entityId);\r\n    setSelectedField('');\r\n    setAvailableFields([]);\r\n    loadEntityFields(entityId);\r\n  };\r\n\r\n  const addField = async () => {\r\n    if (!selectedEntity || !selectedField) return;\r\n\r\n    try {\r\n      const { error } = await (supabase as any)\r\n        .from('query_fields')\r\n        .insert({\r\n          query_id: queryId,\r\n          entity_id: selectedEntity,\r\n          field_name: selectedField,\r\n          aggregation: queryType === 'aggregate' ? selectedAgg || null : null,\r\n          position: fields.length,\r\n        });\r\n\r\n      if (error) throw error;\r\n\r\n      setSelectedEntity('');\r\n      setSelectedField('');\r\n      setSelectedAgg('');\r\n      fetchFields();\r\n\r\n      toast({\r\n        title: \"Field added\",\r\n        description: \"The field has been added to the query.\",\r\n      });\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Error adding field\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const removeField = async (fieldId: string) => {\r\n    try {\r\n      const { error } = await (supabase as any)\r\n        .from('query_fields')\r\n        .delete()\r\n        .eq('id', fieldId);\r\n\r\n      if (error) throw error;\r\n      fetchFields();\r\n\r\n      toast({\r\n        title: \"Field removed\",\r\n        description: \"The field has been removed from the query.\",\r\n      });\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Error removing field\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4 p-6 border rounded-lg\">\r\n      <h3 className=\"text-lg font-semibold\">Query Fields</h3>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <Label>Entity</Label>\r\n          <Select value={selectedEntity} onValueChange={handleEntityChange}>\r\n            <SelectTrigger>\r\n              <SelectValue placeholder=\"Select entity\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {entities.map((entity) => (\r\n                <SelectItem key={entity.id} value={entity.id}>\r\n                  {entity.display_name}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n\r\n        <div className=\"space-y-2\">\r\n          <Label>Field</Label>\r\n          <Select \r\n            value={selectedField} \r\n            onValueChange={setSelectedField}\r\n            disabled={!selectedEntity || availableFields.length === 0}\r\n          >\r\n            <SelectTrigger>\r\n              <SelectValue placeholder={selectedEntity ? \"Select field\" : \"Select entity first\"} />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {availableFields.map((field) => (\r\n                <SelectItem key={field.id} value={field.name}>\r\n                  {field.display_name} ({field.field_type})\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n\r\n        {queryType === 'aggregate' && (\r\n          <div className=\"space-y-2\">\r\n            <Label>Aggregation</Label>\r\n            <Select value={selectedAgg} onValueChange={setSelectedAgg}>\r\n              <SelectTrigger>\r\n                <SelectValue placeholder=\"None\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"\">None</SelectItem>\r\n                <SelectItem value=\"count\">COUNT</SelectItem>\r\n                <SelectItem value=\"sum\">SUM</SelectItem>\r\n                <SelectItem value=\"avg\">AVG</SelectItem>\r\n                <SelectItem value=\"min\">MIN</SelectItem>\r\n                <SelectItem value=\"max\">MAX</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <Button onClick={addField} size=\"sm\">\r\n        <Plus className=\"h-4 w-4 mr-2\" />\r\n        Add Field\r\n      </Button>\r\n\r\n      <div className=\"space-y-2 mt-4\">\r\n        {fields.map((field) => {\r\n          const entity = entities.find(e => e.id === field.entity_id);\r\n          return (\r\n            <div key={field.id} className=\"flex items-center justify-between p-2 border rounded\">\r\n              <span className=\"text-sm\">\r\n                {entity?.display_name}: {field.field_name}\r\n                {field.aggregation && ` (${field.aggregation.toUpperCase()})`}\r\n              </span>\r\n              <Button\r\n                variant=\"ghost\"\r\n                size=\"sm\"\r\n                onClick={() => removeField(field.id)}\r\n              >\r\n                <Trash2 className=\"h-4 w-4\" />\r\n              </Button>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name FolderPlus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMTB2NiIgLz4KICA8cGF0aCBkPSJNOSAxM2g2IiAvPgogIDxwYXRoIGQ9Ik0yMCAyMGEyIDIgMCAwIDAgMi0yVjhhMiAyIDAgMCAwLTItMmgtNy45YTIgMiAwIDAgMS0xLjY5LS45TDkuNiAzLjlBMiAyIDAgMCAwIDcuOTMgM0g0YTIgMiAwIDAgMC0yIDJ2MTNhMiAyIDAgMCAwIDIgMloiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/folder-plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst FolderPlus = createLucideIcon('FolderPlus', [\n  ['path', { d: 'M12 10v6', key: '1bos4e' }],\n  ['path', { d: 'M9 13h6', key: '1uhe8q' }],\n  [\n    'path',\n    {\n      d: 'M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z',\n      key: '1kt360',\n    },\n  ],\n]);\n\nexport default FolderPlus;\n","import { useState, useEffect } from \"react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Trash2, Plus, FolderPlus, ChevronRight, ChevronDown } from \"lucide-react\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\n\r\ninterface QueryConditionTreeProps {\r\n  queryId: string;\r\n}\r\n\r\ninterface Entity {\r\n  id: string;\r\n  display_name: string;\r\n}\r\n\r\ninterface EntityField {\r\n  id: string;\r\n  name: string;\r\n  display_name: string;\r\n  entity_id: string;\r\n}\r\n\r\ninterface ConditionNode {\r\n  id: string;\r\n  query_id: string;\r\n  parent_condition_id: string | null;\r\n  is_group: boolean;\r\n  logic: string | null;\r\n  position: number;\r\n  entity_id: string | null;\r\n  field_name: string | null;\r\n  operator: string | null;\r\n  value: string | null;\r\n}\r\n\r\nconst OPERATORS = [\r\n  { value: 'equals', label: 'Equals' },\r\n  { value: 'not_equals', label: 'Not Equals' },\r\n  { value: 'gt', label: 'Greater Than' },\r\n  { value: 'lt', label: 'Less Than' },\r\n  { value: 'gte', label: 'Greater or Equal' },\r\n  { value: 'lte', label: 'Less or Equal' },\r\n  { value: 'contains', label: 'Contains' },\r\n  { value: 'is_empty', label: 'Is Empty' },\r\n  { value: 'is_not_empty', label: 'Is Not Empty' },\r\n];\r\n\r\nfunction QueryConditionTree({ queryId }: QueryConditionTreeProps) {\r\n  const [entities, setEntities] = useState<Entity[]>([]);\r\n  const [rootConditions, setRootConditions] = useState<ConditionNode[]>([]);\r\n  const { toast } = useToast();\r\n\r\n  useEffect(() => {\r\n    fetchEntities();\r\n    fetchRootConditions();\r\n  }, [queryId]);\r\n\r\n  const fetchEntities = async () => {\r\n    const { data } = await (supabase as any)\r\n      .from('entities')\r\n      .select('id, display_name')\r\n      .order('display_name');\r\n    setEntities(data || []);\r\n  };\r\n\r\n  const fetchRootConditions = async () => {\r\n    const { data } = await (supabase as any)\r\n      .from('query_conditions')\r\n      .select('*')\r\n      .eq('query_id', queryId)\r\n      .is('parent_condition_id', null)\r\n      .order('position');\r\n    setRootConditions(data || []);\r\n  };\r\n\r\n  const addCondition = async (parentId: string | null = null) => {\r\n    console.log('addCondition called', { parentId, entitiesLength: entities.length });\r\n    if (!entities.length) {\r\n      toast({\r\n        title: \"No entities available\",\r\n        description: \"Please create at least one entity first.\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const position = rootConditions.length;\r\n      const insertData = {\r\n        query_id: queryId,\r\n        parent_condition_id: parentId,\r\n        is_group: false,\r\n        entity_id: entities[0].id,\r\n        field_name: '',\r\n          operator: 'equals',\r\n        value: '',\r\n        position,\r\n      };\r\n      console.log('Inserting condition:', insertData);\r\n      \r\n      const { data, error } = await (supabase as any)\r\n        .from('query_conditions')\r\n        .insert(insertData);\r\n\r\n      console.log('Insert result:', { data, error });\r\n\r\n      if (error) throw error;\r\n\r\n      fetchRootConditions();\r\n      toast({ title: \"Condition added\" });\r\n    } catch (error: any) {\r\n      console.error('Error adding condition:', error);\r\n      toast({\r\n        title: \"Error adding condition\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const addConditionGroup = async (parentId: string | null = null) => {\r\n    console.log('addConditionGroup called', { parentId });\r\n    try {\r\n      const position = rootConditions.length;\r\n      const insertData = {\r\n        query_id: queryId,\r\n        parent_condition_id: parentId,\r\n        is_group: true,\r\n        logic: 'and',\r\n        position,\r\n      };\r\n      console.log('Inserting condition group:', insertData);\r\n      \r\n      const { data, error } = await (supabase as any)\r\n        .from('query_conditions')\r\n        .insert(insertData);\r\n\r\n      console.log('Insert group result:', { data, error });\r\n\r\n      if (error) throw error;\r\n\r\n      fetchRootConditions();\r\n      toast({ title: \"Condition group added\" });\r\n    } catch (error: any) {\r\n      console.error('Error adding condition group:', error);\r\n      toast({\r\n        title: \"Error adding condition group\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-sm font-semibold\">Conditions</h3>\r\n        <div className=\"flex gap-1.5\">\r\n          <Button onClick={() => addCondition()} size=\"sm\" variant=\"outline\" className=\"h-7 text-xs\">\r\n            <Plus className=\"h-3 w-3 mr-1\" />\r\n            Condition\r\n          </Button>\r\n          <Button onClick={() => addConditionGroup()} size=\"sm\" variant=\"outline\" className=\"h-7 text-xs\">\r\n            <FolderPlus className=\"h-3 w-3 mr-1\" />\r\n            Group\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {rootConditions.length === 0 ? (\r\n        <div className=\"bg-muted/30 p-4 rounded-md text-center\">\r\n          <p className=\"text-xs text-muted-foreground\">\r\n            No conditions configured. Click \"Condition\" to add one.\r\n          </p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-1 border-l-2 border-border/50 pl-2\">\r\n          {rootConditions.map((condition, index) => (\r\n            <ConditionTreeNode\r\n              key={condition.id}\r\n              node={condition}\r\n              level={0}\r\n              entities={entities}\r\n              onRefresh={fetchRootConditions}\r\n              isFirstSibling={index === 0}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface ConditionTreeNodeProps {\r\n  node: ConditionNode;\r\n  level: number;\r\n  entities: Entity[];\r\n  onRefresh: () => void;\r\n  isFirstSibling?: boolean;\r\n}\r\n\r\nfunction ConditionTreeNode({ node, level, entities, onRefresh, isFirstSibling = false }: ConditionTreeNodeProps) {\r\n  const [children, setChildren] = useState<ConditionNode[]>([]);\r\n  const [isExpanded, setIsExpanded] = useState(true);\r\n  const [entityFields, setEntityFields] = useState<EntityField[]>([]);\r\n  const { toast } = useToast();\r\n\r\n  useEffect(() => {\r\n    if (node.is_group) {\r\n      fetchChildren();\r\n    } else if (node.entity_id) {\r\n      fetchEntityFields(node.entity_id);\r\n    }\r\n  }, [node.id, node.is_group, node.entity_id]);\r\n\r\n  const fetchChildren = async () => {\r\n    const { data } = await (supabase as any)\r\n      .from('query_conditions')\r\n      .select('*')\r\n      .eq('parent_condition_id', node.id)\r\n      .order('position');\r\n    setChildren(data || []);\r\n  };\r\n\r\n  const fetchEntityFields = async (entityId: string) => {\r\n    const { data } = await (supabase as any)\r\n      .from('entity_fields')\r\n      .select('id, name, display_name, entity_id')\r\n      .eq('entity_id', entityId)\r\n      .order('display_name');\r\n    setEntityFields(data || []);\r\n  };\r\n\r\n  const updateNode = async (updates: Partial<ConditionNode>) => {\r\n    try {\r\n      const { error } = await (supabase as any)\r\n        .from('query_conditions')\r\n        .update(updates)\r\n        .eq('id', node.id);\r\n\r\n      if (error) throw error;\r\n\r\n      // If entity changed, fetch new fields\r\n      if (updates.entity_id) {\r\n        fetchEntityFields(updates.entity_id);\r\n      }\r\n\r\n      onRefresh();\r\n      if (node.is_group) fetchChildren();\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Error updating condition\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const deleteNode = async () => {\r\n    try {\r\n      const { error } = await (supabase as any)\r\n        .from('query_conditions')\r\n        .delete()\r\n        .eq('id', node.id);\r\n\r\n      if (error) throw error;\r\n\r\n      onRefresh();\r\n      toast({ title: \"Condition deleted\" });\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Error deleting condition\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const addChildCondition = async () => {\r\n    if (!entities.length) {\r\n      toast({\r\n        title: \"No entities available\",\r\n        description: \"Please create at least one entity first.\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const position = children.length;\r\n      const { error } = await (supabase as any)\r\n        .from('query_conditions')\r\n        .insert({\r\n          query_id: node.query_id,\r\n          parent_condition_id: node.id,\r\n          is_group: false,\r\n          entity_id: entities[0].id,\r\n          field_name: '',\r\n          operator: 'equals',\r\n          value: '',\r\n          position,\r\n        });\r\n\r\n      if (error) throw error;\r\n\r\n      fetchChildren();\r\n      toast({ title: \"Condition added\" });\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Error adding condition\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const addChildGroup = async () => {\r\n    try {\r\n      const position = children.length;\r\n      const { error } = await (supabase as any)\r\n        .from('query_conditions')\r\n        .insert({\r\n          query_id: node.query_id,\r\n          parent_condition_id: node.id,\r\n          is_group: true,\r\n          logic: 'and',\r\n          position,\r\n        });\r\n\r\n      if (error) throw error;\r\n\r\n      fetchChildren();\r\n      toast({ title: \"Condition group added\" });\r\n    } catch (error: any) {\r\n      toast({\r\n        title: \"Error adding condition group\",\r\n        description: error.message,\r\n        variant: \"destructive\",\r\n      });\r\n    }\r\n  };\r\n\r\n  if (node.is_group) {\r\n    return (\r\n      <div className=\"space-y-1\">\r\n        <div className=\"flex items-center gap-1.5 p-2 rounded-md bg-muted/30 hover:bg-muted/50 transition-colors\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            className=\"h-5 w-5 p-0\"\r\n            onClick={() => setIsExpanded(!isExpanded)}\r\n          >\r\n            {isExpanded ? (\r\n              <ChevronDown className=\"h-3 w-3\" />\r\n            ) : (\r\n              <ChevronRight className=\"h-3 w-3\" />\r\n            )}\r\n          </Button>\r\n\r\n          <Select\r\n            value={node.logic || 'and'}\r\n            onValueChange={(value) => updateNode({ logic: value })}\r\n          >\r\n            <SelectTrigger className=\"h-6 w-16 text-xs\">\r\n              <SelectValue />\r\n            </SelectTrigger>\r\n            <SelectContent className=\"bg-popover z-50\">\r\n              <SelectItem value=\"and\" className=\"text-xs\">AND</SelectItem>\r\n              <SelectItem value=\"or\" className=\"text-xs\">OR</SelectItem>\r\n            </SelectContent>\r\n          </Select>\r\n\r\n          <FolderPlus className=\"h-3.5 w-3.5 text-muted-foreground\" />\r\n          <span className=\"text-xs font-medium\">Condition Group</span>\r\n\r\n          <div className=\"flex-1\" />\r\n\r\n          <Button onClick={addChildCondition} size=\"sm\" variant=\"ghost\" className=\"h-6 text-xs px-1.5\">\r\n            <Plus className=\"h-3 w-3 mr-1\" />\r\n            Condition\r\n          </Button>\r\n          <Button onClick={addChildGroup} size=\"sm\" variant=\"ghost\" className=\"h-6 text-xs px-1.5\">\r\n            <FolderPlus className=\"h-3 w-3 mr-1\" />\r\n            Group\r\n          </Button>\r\n          <Button variant=\"ghost\" size=\"sm\" onClick={deleteNode} className=\"h-6 w-6 p-0\">\r\n            <Trash2 className=\"h-3 w-3 text-destructive\" />\r\n          </Button>\r\n        </div>\r\n\r\n        {isExpanded && (\r\n          <div className=\"ml-3 border-l-2 border-border/50 pl-2 space-y-1\">\r\n            {children.length === 0 ? (\r\n              <div className=\"bg-muted/20 p-2 rounded text-center\">\r\n                <p className=\"text-xs text-muted-foreground\">Empty group</p>\r\n              </div>\r\n            ) : (\r\n              children.map((child, index) => (\r\n                <ConditionTreeNode\r\n                  key={child.id}\r\n                  node={child}\r\n                  level={level + 1}\r\n                  entities={entities}\r\n                  onRefresh={fetchChildren}\r\n                  isFirstSibling={index === 0}\r\n                />\r\n              ))\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Leaf condition\r\n  return (\r\n    <div className=\"flex items-center gap-1.5 p-2 rounded-md bg-card border hover:border-primary/30 transition-colors group\">\r\n      {isFirstSibling ? (\r\n        <div className=\"h-6 w-14 flex items-center justify-center\">\r\n          <span className=\"text-[10px] text-muted-foreground font-medium\">AND</span>\r\n        </div>\r\n      ) : (\r\n        <Select\r\n          value={node.logic || 'and'}\r\n          onValueChange={(value) => updateNode({ logic: value })}\r\n        >\r\n          <SelectTrigger className=\"h-6 w-14 text-xs\">\r\n            <SelectValue />\r\n          </SelectTrigger>\r\n          <SelectContent className=\"bg-popover z-50\">\r\n            <SelectItem value=\"and\" className=\"text-xs\">AND</SelectItem>\r\n            <SelectItem value=\"or\" className=\"text-xs\">OR</SelectItem>\r\n          </SelectContent>\r\n        </Select>\r\n      )}\r\n\r\n      <Select\r\n        value={node.entity_id || ''}\r\n        onValueChange={(value) => updateNode({ entity_id: value })}\r\n      >\r\n        <SelectTrigger className=\"h-7 w-[110px] text-xs\">\r\n          <SelectValue placeholder=\"Entity\" />\r\n        </SelectTrigger>\r\n        <SelectContent className=\"bg-popover z-50\">\r\n          {entities.map((entity) => (\r\n            <SelectItem key={entity.id} value={entity.id} className=\"text-xs\">\r\n              {entity.display_name}\r\n            </SelectItem>\r\n          ))}\r\n        </SelectContent>\r\n      </Select>\r\n\r\n      <Select\r\n        value={node.field_name || ''}\r\n        onValueChange={(value) => updateNode({ field_name: value })}\r\n      >\r\n        <SelectTrigger className=\"h-7 w-[110px] text-xs\">\r\n          <SelectValue placeholder=\"Field\" />\r\n        </SelectTrigger>\r\n        <SelectContent className=\"bg-popover z-50\">\r\n          {entityFields.map((field) => (\r\n            <SelectItem key={field.id} value={field.name} className=\"text-xs\">\r\n              {field.display_name}\r\n            </SelectItem>\r\n          ))}\r\n        </SelectContent>\r\n      </Select>\r\n\r\n      <Select\r\n        value={node.operator || 'equals'}\r\n        onValueChange={(value) => updateNode({ operator: value })}\r\n      >\r\n        <SelectTrigger className=\"h-7 w-[100px] text-xs\">\r\n          <SelectValue />\r\n        </SelectTrigger>\r\n        <SelectContent className=\"bg-popover z-50\">\r\n          {OPERATORS.map((op) => (\r\n            <SelectItem key={op.value} value={op.value} className=\"text-xs\">\r\n              {op.label}\r\n            </SelectItem>\r\n          ))}\r\n        </SelectContent>\r\n      </Select>\r\n\r\n      <Input\r\n        placeholder=\"Value\"\r\n        value={node.value || ''}\r\n        onChange={(e) => updateNode({ value: e.target.value })}\r\n        className=\"h-7 w-[110px] text-xs\"\r\n      />\r\n\r\n      <Button \r\n        variant=\"ghost\" \r\n        size=\"sm\" \r\n        onClick={deleteNode} \r\n        className=\"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n      >\r\n        <Trash2 className=\"h-3 w-3 text-destructive\" />\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default QueryConditionTree;\r\n"],"names":[],"mappings":"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","ignoreList":[4]}