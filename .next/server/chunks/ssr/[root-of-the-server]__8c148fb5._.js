module.exports=[66718,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},70430,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(187),g=a.i(68114);let h=(0,f.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(e,{ref:d,className:(0,g.cn)(h(),a),...c}));i.displayName=e.displayName,a.s(["Label",()=>i],70430)},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},33463,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},NOT_FOUND_SEGMENT_KEY:function(){return m},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__",m="/_not-found"},98251,a=>{"use strict";var b=a.i(74167);let c="https://apps4x-framework.azurewebsites.net/api/v1",d="LGE0000001",e="eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySWQiOiJhLmh5ZGVyIiwiTmFtZSI6Ikh5ZGVyIEFsaSIsIkVtYWlsIjoiaHlkZXJAZmFhenRlY2hzb2x1dGlvbnMuY29tIiwiTW9iaWxlTnVtYmVyIjoiMDk4NzY1NDMyMSIsIkNvbXBhbnlJZCI6IkxHRTAwMDAwMDEiLCJleHAiOjE3NjcwNzIyMTYsImlzcyI6ImFwcHM0eC5jb20iLCJhdWQiOiJhcHBzNHguY29tIn0.b5jc5d6zpx5_mY_fYH3oQS7_4RxMXYZyYNFTUf4Zk8Y",f=(a={})=>({Accept:"application/json, text/plain, */*",Authorization:`Bearer ${e}`,appid:"Studio",companyid:d,"user-id":"a.hyder","X-Client-Page":"/LGE0000001/Studio/a530d8d753214ac7beaf6207aacbbd4c",...a}),g=async(a,c={})=>{try{let d=await fetch(a,c);if(401===d.status)throw console.error("Unauthorized access (401), signing out..."),await b.supabase.auth.signOut(),window.location.href="/auth",Error("Unauthorized");return d}catch(a){throw a}},h=a=>{try{let b=JSON.parse(a.Data);return{id:a.Id,name:b.TableName,display_name:b.Name,description:b.Description,is_published:"Published"===a.Status,dataAreaId:a.DataAreaId,recId:a.RecId,collectionId:b.CollectionId}}catch(b){return console.error("Error parsing entity data:",a),{id:a.Id,name:a.Name,display_name:a.Name,description:"",is_published:"Published"===a.Status,dataAreaId:a.DataAreaId,recId:a.RecId,collectionId:""}}},i=async()=>{try{let a=await g(`${c}/metaobject/${d}?type=Entity`,{headers:f()}),b=await a.json();return(Array.isArray(b.Data)?b.Data:[b.Data]).filter(a=>(a.RecId??0)>=709).map(h)}catch(a){return console.error("Error fetching entities:",a),[]}},j=async a=>{try{let b=a.replace(/-/g,""),e=`byobjectId?objectId=${b}`,i=await g(`${c}/metaobject/${d}/${e}`,{headers:f()}),j=await i.json();return h(j)}catch(b){return console.error(`Error fetching entity ${a}:`,b),null}},k=async a=>{try{let b=a.replace(/-/g,""),e=`byobjectId?objectId=${b}`,h=await g(`${c}/metaobject/${d}/${e}`,{headers:f()}),i=await h.json();if(!i)return[];return(JSON.parse(i.Data).Fields||[]).map(b=>({id:b.Id,entity_id:a,name:b.Name,display_name:b.Label,field_type:b.DataType,is_required:b.IsRequired,default_value:b.DefaultValue,position:b.Position}))}catch(b){return console.error(`Error fetching fields for entity ${a}:`,b),[]}},l=async a=>{try{let b="a530d8d753214ac7beaf6207aacbbd4c",e={Name:a.name,TableName:a.name,Description:a.description||a.display_name,Image:null,TypeName:a.name,CollectionType:"Single",ConnectorId:"eb6e7a03f0ed4e09b259fc2abf4507e2",Fields:null,IsWorkFlow:null,AppId:b},h={Type:"Collection",Data:JSON.stringify(e),Name:a.name,ParentId:"a530d8d753214ac7beaf6207aacbbd4c",ParentType:"Apps",AppId:b},i=await g(`${c}/metaobject/${d}/create`,{method:"POST",headers:f({"Content-Type":"application/json"}),body:JSON.stringify(h)});return{sucess:!0,res:await i.json()}}catch(a){return console.error("Error creating entity:",a),{success:!1,error:"Failed to create entity"}}},m=async(a,b)=>{try{let e=await g(`${c}/metaobject/${d}/${"9ca55aad170e45b9835adf7e5983161a"===a?"709":a}`,{method:"PUT",headers:f({"Content-Type":"application/json"}),body:JSON.stringify(b)});return{sucess:!0,res:await e.json()}}catch(b){return console.error(`Error updating entity ${a}:`,b),{success:!1,error:"Failed to update entity"}}},n=async a=>{try{let b=await g(`${c}/metaobject/${d}/${"9ca55aad170e45b9835adf7e5983161a"===a?"709":a}`,{method:"DELETE",headers:f()});return await b.json()}catch(b){return console.error(`Error deleting entity ${a}:`,b),{success:!1,error:"Failed to delete entity"}}},o=async(a,b,e)=>{try{let h=e?.collectionId||"6e8ef8e548704cfb90a01c1f597fb264",i=e?.recId||("9ca55aad170e45b9835adf7e5983161a"===a?"709":a),j=await k(a),l=new Map(j.map(a=>[a.id,a])),m=new Set(j.map(a=>(a.name||"").toLowerCase())),n=[],o=[];for(let a of b)if(a.id&&l.has(a.id)){let b=l.get(a.id);b&&(b.name!==a.name||b.display_name!==a.display_name||b.field_type!==a.field_type||b.is_required!==a.is_required||b.default_value!==a.default_value||b.position!==a.position)&&o.push(a)}else{let b=(a.name||a.Name||"").toLowerCase();m.has(b)||n.push(a)}let p=j.filter(a=>!b.some(b=>b.name===a.name)),q={success:!0,creates:null,updates:null,deletes:null};if(o.length>0){let b=o.map(b=>({Id:b.id,Label:b.display_name||b.Label,Name:b.name||b.Name,DataType:b.field_type||b.DataType||"String",IsRequired:b.is_required,DefaultValue:b.default_value,Position:b.position,EntityId:e?.id||a,CollectionId:h})),j=await g(`${c}/metaobject/${d}/${i}/fields/update`,{method:"PUT",headers:f({"Content-Type":"application/json"}),body:JSON.stringify(b)});q.updates=await j.json()}if(n.length>0){let b=n.map(b=>({Label:b.display_name||b.Label,Name:b.name||b.Name,DataType:b.field_type||b.DataType||"String",IsRequired:b.is_required,DefaultValue:b.default_value,Position:b.position,EntityId:e?.id||a,CollectionId:h})),j=await g(`${c}/metaobject/${d}/${i}/fields/create`,{method:"POST",headers:f({"Content-Type":"application/json"}),body:JSON.stringify(b)});q.creates=await j.json()}if(p.length>0){let a=p.map(a=>a.name),b=await g(`${c}/metaobject/${d}/${i}/fields/delete`,{method:"DELETE",headers:f({"Content-Type":"application/json"}),body:JSON.stringify(a)});q.deletes=await b.json()}return{success:!0,details:q}}catch(b){return console.error(`Error saving fields for entity ${a}:`,b),{success:!1,error:"Failed to save fields"}}};a.s(["createEntity",0,l,"deleteEntity",0,n,"getEntities",0,i,"getEntity",0,j,"getFields",0,k,"saveFields",0,o,"setAuthToken",0,a=>{e=a},"updateEntity",0,m])},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},61207,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(98251),f=a.i(74167),g=a.i(99570),h=a.i(66718),i=a.i(70430),j=a.i(91119),k=a.i(23292);a.s(["default",0,()=>{let a=(0,d.useRouter)(),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(async()=>{let{data:{session:b}}=await f.supabase.auth.getSession();b&&a.push("/admin")})()},[a]);let t=async b=>{b.preventDefault(),s(!0);try{if(l){let{error:b}=await f.supabase.auth.signInWithPassword({email:n,password:p});if(b)throw b;k.toast.success("Logged in successfully!");try{let a=await fetch("https://apps4x-framework.azurewebsites.net/api/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({UserId:"a.hyder",Password:"123456"})}),b=await a.json();!0===b.Status&&b.authData?.authToken?((0,e.setAuthToken)(b.authData.authToken),console.log("Remote login successful, token updated.")):(console.error("Remote login failed",b),k.toast.error("Connected to local auth, but remote service login failed."))}catch(a){console.error("Remote login error",a)}a.push("/admin")}else{let{error:a}=await f.supabase.auth.signUp({email:n,password:p,options:{emailRedirectTo:`${window.location.origin}/admin`}});if(a)throw a;k.toast.success("Account created! You can now log in."),m(!0)}}catch(a){k.toast.error(a.message||"Authentication failed")}finally{s(!1)}};return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:(0,b.jsxs)(j.Card,{className:"w-full max-w-md shadow-[var(--shadow-medium)]",children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsx)(j.CardTitle,{className:"text-2xl",children:l?"Login":"Sign Up"}),(0,b.jsx)(j.CardDescription,{children:l?"Enter your credentials to access the admin panel":"Create an account to get started"})]}),(0,b.jsxs)(j.CardContent,{children:[(0,b.jsxs)("form",{onSubmit:t,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(h.Input,{id:"email",type:"email",placeholder:"you@example.com",value:n,onChange:a=>o(a.target.value),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"password",children:"Password"}),(0,b.jsx)(h.Input,{id:"password",type:"password",placeholder:"••••••••",value:p,onChange:a=>q(a.target.value),required:!0,minLength:6})]}),(0,b.jsx)(g.Button,{type:"submit",className:"w-full",disabled:r,children:r?"Loading...":l?"Login":"Sign Up"})]}),(0,b.jsx)("div",{className:"mt-4 text-center",children:(0,b.jsx)("button",{onClick:()=>m(!l),className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:l?"Don't have an account? Sign up":"Already have an account? Login"})})]})]})})}])},59789,a=>{a.v(a=>Promise.resolve().then(()=>a(23952)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__8c148fb5._.js.map