module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},49967,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(14574),e=a.i(99570),f=a.i(33508),g=a.i(98212),h=a.i(70514),i=a.i(66605);a.s(["PagePreviewModal",0,({open:a,onOpenChange:j,page:k,rows:l,components:m,layout:n,layoutRows:o,layoutComponents:p,widgetData:q})=>{let[r,s]=(0,c.useState)("desktop"),t=(a,c)=>a.sort((a,b)=>a.position-b.position).map(a=>{let d=c.filter(b=>b.row_id===a.id).sort((a,b)=>a.position-b.position),e=Array.from({length:a.columns},()=>[]);return d.forEach(b=>{b.column_index<a.columns&&e[b.column_index].push(b)}),(0,b.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${a.columns}, 1fr)`},children:e.map((a,c)=>(0,b.jsx)("div",{className:"space-y-4",children:a.map(a=>{if("page-content"===a.component_type)return(0,b.jsx)("div",{className:"w-full",children:t(l,m)},a.id);if("is_widget_instance"in a&&a.is_widget_instance&&a.widget_id){var c;let d;return(0,b.jsx)("div",{children:(c=a.widget_id,(d=q.get(c))?d.rows.sort((a,b)=>a.position-b.position).map(a=>{let c=d.components.filter(b=>b.row_id===a.id).sort((a,b)=>a.position-b.position),e=Array.from({length:a.columns},()=>[]);return c.forEach(b=>{b.column_index<a.columns&&e[b.column_index].push(b)}),(0,b.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${a.columns}, 1fr)`},children:e.map((a,c)=>(0,b.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,b.jsx)(g.ComponentRenderer,{component:a},a.id))},c))},a.id)}):(0,b.jsx)("div",{className:"p-4 border border-dashed border-muted-foreground/30 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Widget not found"})}))},a.id)}return(0,b.jsx)(g.ComponentRenderer,{component:a},a.id)})},c))},a.id)});return(0,b.jsx)(d.Dialog,{open:a,onOpenChange:j,children:(0,b.jsxs)(d.DialogContent,{className:"max-w-[95vw] max-h-[90vh] p-0 gap-0",hideClose:!0,children:[(0,b.jsxs)(d.DialogTitle,{className:"sr-only",children:["Page Preview: ",k?.title]}),(0,b.jsxs)("div",{className:"flex items-center justify-between border-b px-4 py-3 bg-card",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold","aria-hidden":"true",children:["Page Preview: ",k?.title]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(h.ResponsiveControls,{currentBreakpoint:r,onBreakpointChange:s}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>j(!1),children:(0,b.jsx)(f.X,{className:"h-4 w-4"})})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto bg-background",children:(0,b.jsx)(i.DeviceFrame,{breakpoint:r,children:(0,b.jsxs)("div",{className:"min-h-full",children:[n?t(o,p):(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:t(l,m)}),0===l.length&&(0,b.jsx)("p",{className:"text-center text-muted-foreground py-12",children:"No content yet. Add rows and components to see the preview."})]})})})]})})}])},21118,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(14574),e=a.i(99570),f=a.i(33508),g=a.i(98212),h=a.i(70514),i=a.i(66605);a.s(["WidgetPreviewModal",0,({open:a,onOpenChange:j,widget:k,rows:l,components:m})=>{let[n,o]=(0,c.useState)("desktop");return(0,b.jsx)(d.Dialog,{open:a,onOpenChange:j,children:(0,b.jsxs)(d.DialogContent,{className:"max-w-[95vw] max-h-[90vh] p-0 gap-0",hideClose:!0,children:[(0,b.jsxs)(d.DialogTitle,{className:"sr-only",children:["Widget Preview: ",k?.title]}),(0,b.jsxs)("div",{className:"flex items-center justify-between border-b px-4 py-3 bg-card",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold","aria-hidden":"true",children:["Widget Preview: ",k?.title]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(h.ResponsiveControls,{currentBreakpoint:n,onBreakpointChange:o}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>j(!1),children:(0,b.jsx)(f.X,{className:"h-4 w-4"})})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto bg-background",children:(0,b.jsx)(i.DeviceFrame,{breakpoint:n,children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto p-8 space-y-8",children:[l.sort((a,b)=>a.position-b.position).map(a=>{let c=m.filter(b=>b.row_id===a.id).sort((a,b)=>a.position-b.position),d=Array.from({length:a.columns},()=>[]);return c.forEach(b=>{b.column_index<a.columns&&d[b.column_index].push(b)}),(0,b.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${a.columns}, 1fr)`},children:d.map((a,c)=>(0,b.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,b.jsx)(g.ComponentRenderer,{component:a},a.id))},c))},a.id)}),0===l.length&&(0,b.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No content yet. Add rows and components to see the preview."})]})})})]})})}])},63422,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(14574),e=a.i(99570),f=a.i(33508),g=a.i(98212),h=a.i(70514),i=a.i(66605);a.s(["LayoutPreviewModal",0,({open:a,onOpenChange:j,layout:k,rows:l,components:m})=>{let[n,o]=(0,c.useState)("desktop");return(0,b.jsx)(d.Dialog,{open:a,onOpenChange:j,children:(0,b.jsxs)(d.DialogContent,{className:"max-w-[95vw] max-h-[90vh] p-0 gap-0",hideClose:!0,children:[(0,b.jsxs)(d.DialogTitle,{className:"sr-only",children:["Layout Preview: ",k?.title]}),(0,b.jsxs)("div",{className:"flex items-center justify-between border-b px-4 py-3 bg-card",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold","aria-hidden":"true",children:["Layout Preview: ",k?.title]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(h.ResponsiveControls,{currentBreakpoint:n,onBreakpointChange:o}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>j(!1),children:(0,b.jsx)(f.X,{className:"h-4 w-4"})})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto bg-background",children:(0,b.jsx)(i.DeviceFrame,{breakpoint:n,children:(0,b.jsxs)("div",{className:"min-h-full flex flex-col",children:[l.sort((a,b)=>a.position-b.position).map(a=>{let c=m.filter(b=>b.row_id===a.id).sort((a,b)=>a.position-b.position),d=Array.from({length:a.columns},()=>[]);return c.forEach(b=>{b.column_index<a.columns&&d[b.column_index].push(b)}),(0,b.jsx)("div",{className:"w-full",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8 grid gap-4",style:{gridTemplateColumns:`repeat(${a.columns}, 1fr)`},children:d.map((a,c)=>(0,b.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,b.jsx)(g.ComponentRenderer,{component:a},a.id))},c))})},a.id)}),0===l.length&&(0,b.jsx)("p",{className:"text-center text-muted-foreground py-12",children:"No content yet. Add rows and components to see the preview."})]})})})]})})}])},29246,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},210,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},14548,a=>{"use strict";let b=(0,a.i(70106).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],14548)},9493,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(99570),f=a.i(66718),g=a.i(70430),h=a.i(29246),i=a.i(63658),j=a.i(23292),k=a.i(210),l=a.i(15618),m=a.i(14548),n=a.i(97292),o=a.i(91119),p=a.i(34767),q=a.i(98251);a.s(["default",0,()=>{let a=(0,d.useRouter)(),r=(0,d.useParams)().entityId,[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)(!1);(0,c.useEffect)(()=>{A()},[r]);let A=async()=>{if(!r)return;x(!0);let b=await (0,q.getEntity)(r),c=await (0,q.getFields)(r);if(!b){j.toast.error("Entity not found in schema"),a.push("/admin/entities");return}t(b),v(c.sort((a,b)=>a.position-b.position)),x(!1)},B=async()=>{if(s&&r){z(!0);try{(await (0,q.updateEntity)(r,s)).success?j.toast.success("Entity settings saved (via API)"):j.toast.error("Failed to save entity settings")}catch(a){j.toast.error("An error occurred")}finally{z(!1)}}},C=async a=>{if(r)try{(await (0,q.saveFields)(r,a,s)).success?(j.toast.success("Fields saved successfully (via API)"),v([]),A()):j.toast.error("Failed to save fields")}catch(a){j.toast.error("An error occurred while saving fields")}};return w?(0,b.jsx)(n.AdminLayout,{children:(0,b.jsx)("div",{className:"p-8",children:(0,b.jsx)("div",{className:"max-w-4xl mx-auto text-center py-12 text-muted-foreground",children:"Loading entity..."})})}):s?(0,b.jsx)(n.AdminLayout,{children:(0,b.jsx)("div",{className:"p-8",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,b.jsx)(e.Button,{variant:"outline",size:"icon",onClick:()=>a.push("/admin/entities"),children:(0,b.jsx)(k.ArrowLeft,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Edit Entity"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Configure entity settings and fields (via API)"})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)(e.Button,{onClick:B,disabled:y,children:[(0,b.jsx)(m.Save,{className:"h-4 w-4 mr-2"}),y?"Saving...":"Save"]})})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(o.Card,{className:"p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Entity Settings"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Internal Name"}),(0,b.jsx)(f.Input,{value:s.name,disabled:!0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Cannot be changed"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Display Name"}),(0,b.jsx)(f.Input,{value:s.display_name,onChange:a=>t({...s,display_name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Description"}),(0,b.jsx)(h.Textarea,{value:s.description||"",onChange:a=>t({...s,description:a.target.value}),rows:3})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(g.Label,{children:"Published"}),(0,b.jsx)(i.Switch,{checked:s.is_published,onCheckedChange:a=>t({...s,is_published:a})})]})]})]}),(0,b.jsxs)(o.Card,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Fields"}),(0,b.jsxs)(e.Button,{onClick:()=>{let a={id:crypto.randomUUID(),entity_id:r,name:`field_${u.length+1}`,display_name:`New Field ${u.length+1}`,field_type:p.E_FieldDataType.String,is_required:!1,default_value:null,position:u.length};v([...u,a])},size:"sm",children:[(0,b.jsx)(l.Plus,{className:"h-4 w-4 mr-2"}),"Add Field"]}),(0,b.jsxs)(e.Button,{onClick:()=>C(u),size:"sm",children:[(0,b.jsx)(m.Save,{className:"h-4 w-4 mr-2"}),"Save Fields"]})]}),0===u.length?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No fields yet. Add your first field to get started."}):(0,b.jsx)("div",{className:"space-y-3",children:u.map((a,c)=>(0,b.jsx)(p.FieldEditor,{field:a,onUpdate:a=>{v(u.map((b,d)=>d===c?{...b,...a}:b))},onDelete:()=>{v(u.filter((a,b)=>b!==c).map((a,b)=>({...a,position:b})))}},a.id))})]})]})]})})}):null}])},59789,a=>{a.v(a=>Promise.resolve().then(()=>a(23952)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__688fd960._.js.map