module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},49967,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(14574),e=a.i(99570),f=a.i(33508),g=a.i(98212),h=a.i(70514),i=a.i(66605);a.s(["PagePreviewModal",0,({open:a,onOpenChange:j,page:k,rows:l,components:m,layout:n,layoutRows:o,layoutComponents:p,widgetData:q})=>{let[r,s]=(0,c.useState)("desktop"),t=(a,c)=>a.sort((a,b)=>a.position-b.position).map(a=>{let d=c.filter(b=>b.row_id===a.id).sort((a,b)=>a.position-b.position),e=Array.from({length:a.columns},()=>[]);return d.forEach(b=>{b.column_index<a.columns&&e[b.column_index].push(b)}),(0,b.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${a.columns}, 1fr)`},children:e.map((a,c)=>(0,b.jsx)("div",{className:"space-y-4",children:a.map(a=>{if("page-content"===a.component_type)return(0,b.jsx)("div",{className:"w-full",children:t(l,m)},a.id);if("is_widget_instance"in a&&a.is_widget_instance&&a.widget_id){var c;let d;return(0,b.jsx)("div",{children:(c=a.widget_id,(d=q.get(c))?d.rows.sort((a,b)=>a.position-b.position).map(a=>{let c=d.components.filter(b=>b.row_id===a.id).sort((a,b)=>a.position-b.position),e=Array.from({length:a.columns},()=>[]);return c.forEach(b=>{b.column_index<a.columns&&e[b.column_index].push(b)}),(0,b.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${a.columns}, 1fr)`},children:e.map((a,c)=>(0,b.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,b.jsx)(g.ComponentRenderer,{component:a},a.id))},c))},a.id)}):(0,b.jsx)("div",{className:"p-4 border border-dashed border-muted-foreground/30 rounded-lg",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Widget not found"})}))},a.id)}return(0,b.jsx)(g.ComponentRenderer,{component:a},a.id)})},c))},a.id)});return(0,b.jsx)(d.Dialog,{open:a,onOpenChange:j,children:(0,b.jsxs)(d.DialogContent,{className:"max-w-[95vw] max-h-[90vh] p-0 gap-0",hideClose:!0,children:[(0,b.jsxs)(d.DialogTitle,{className:"sr-only",children:["Page Preview: ",k?.title]}),(0,b.jsxs)("div",{className:"flex items-center justify-between border-b px-4 py-3 bg-card",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold","aria-hidden":"true",children:["Page Preview: ",k?.title]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(h.ResponsiveControls,{currentBreakpoint:r,onBreakpointChange:s}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>j(!1),children:(0,b.jsx)(f.X,{className:"h-4 w-4"})})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto bg-background",children:(0,b.jsx)(i.DeviceFrame,{breakpoint:r,children:(0,b.jsxs)("div",{className:"min-h-full",children:[n?t(o,p):(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:t(l,m)}),0===l.length&&(0,b.jsx)("p",{className:"text-center text-muted-foreground py-12",children:"No content yet. Add rows and components to see the preview."})]})})})]})})}])},21118,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(14574),e=a.i(99570),f=a.i(33508),g=a.i(98212),h=a.i(70514),i=a.i(66605);a.s(["WidgetPreviewModal",0,({open:a,onOpenChange:j,widget:k,rows:l,components:m})=>{let[n,o]=(0,c.useState)("desktop");return(0,b.jsx)(d.Dialog,{open:a,onOpenChange:j,children:(0,b.jsxs)(d.DialogContent,{className:"max-w-[95vw] max-h-[90vh] p-0 gap-0",hideClose:!0,children:[(0,b.jsxs)(d.DialogTitle,{className:"sr-only",children:["Widget Preview: ",k?.title]}),(0,b.jsxs)("div",{className:"flex items-center justify-between border-b px-4 py-3 bg-card",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold","aria-hidden":"true",children:["Widget Preview: ",k?.title]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(h.ResponsiveControls,{currentBreakpoint:n,onBreakpointChange:o}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>j(!1),children:(0,b.jsx)(f.X,{className:"h-4 w-4"})})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto bg-background",children:(0,b.jsx)(i.DeviceFrame,{breakpoint:n,children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto p-8 space-y-8",children:[l.sort((a,b)=>a.position-b.position).map(a=>{let c=m.filter(b=>b.row_id===a.id).sort((a,b)=>a.position-b.position),d=Array.from({length:a.columns},()=>[]);return c.forEach(b=>{b.column_index<a.columns&&d[b.column_index].push(b)}),(0,b.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${a.columns}, 1fr)`},children:d.map((a,c)=>(0,b.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,b.jsx)(g.ComponentRenderer,{component:a},a.id))},c))},a.id)}),0===l.length&&(0,b.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No content yet. Add rows and components to see the preview."})]})})})]})})}])},63422,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(14574),e=a.i(99570),f=a.i(33508),g=a.i(98212),h=a.i(70514),i=a.i(66605);a.s(["LayoutPreviewModal",0,({open:a,onOpenChange:j,layout:k,rows:l,components:m})=>{let[n,o]=(0,c.useState)("desktop");return(0,b.jsx)(d.Dialog,{open:a,onOpenChange:j,children:(0,b.jsxs)(d.DialogContent,{className:"max-w-[95vw] max-h-[90vh] p-0 gap-0",hideClose:!0,children:[(0,b.jsxs)(d.DialogTitle,{className:"sr-only",children:["Layout Preview: ",k?.title]}),(0,b.jsxs)("div",{className:"flex items-center justify-between border-b px-4 py-3 bg-card",children:[(0,b.jsxs)("h2",{className:"text-lg font-semibold","aria-hidden":"true",children:["Layout Preview: ",k?.title]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(h.ResponsiveControls,{currentBreakpoint:n,onBreakpointChange:o}),(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",onClick:()=>j(!1),children:(0,b.jsx)(f.X,{className:"h-4 w-4"})})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto bg-background",children:(0,b.jsx)(i.DeviceFrame,{breakpoint:n,children:(0,b.jsxs)("div",{className:"min-h-full flex flex-col",children:[l.sort((a,b)=>a.position-b.position).map(a=>{let c=m.filter(b=>b.row_id===a.id).sort((a,b)=>a.position-b.position),d=Array.from({length:a.columns},()=>[]);return c.forEach(b=>{b.column_index<a.columns&&d[b.column_index].push(b)}),(0,b.jsx)("div",{className:"w-full",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8 grid gap-4",style:{gridTemplateColumns:`repeat(${a.columns}, 1fr)`},children:d.map((a,c)=>(0,b.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,b.jsx)(g.ComponentRenderer,{component:a},a.id))},c))})},a.id)}),0===l.length&&(0,b.jsx)("p",{className:"text-center text-muted-foreground py-12",children:"No content yet. Add rows and components to see the preview."})]})})})]})})}])},210,a=>{"use strict";let b=(0,a.i(70106).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],210)},98980,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(97292),f=a.i(99570),g=a.i(66718),h=a.i(6015),i=a.i(86304),j=a.i(74167),k=a.i(23292),l=a.i(210);let m=(0,a.i(70106).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var n=a.i(77156),o=a.i(81560),p=a.i(87532),q=a.i(14574),r=a.i(69876),s=a.i(5084),t=a.i(72228);function u({submission:a,onClose:c}){return a?(0,b.jsx)(q.Dialog,{open:!!a,onOpenChange:c,children:(0,b.jsxs)(q.DialogContent,{className:"max-w-2xl max-h-[80vh]",children:[(0,b.jsx)(q.DialogHeader,{children:(0,b.jsx)(q.DialogTitle,{children:"Submission Details"})}),(0,b.jsx)(r.ScrollArea,{className:"max-h-[60vh]",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Submission ID"}),(0,b.jsx)("p",{className:"font-mono text-sm",children:a.id})]}),(0,b.jsx)(i.Badge,{children:(0,t.format)(new Date(a.submitted_at),"MMM d, yyyy h:mm a")})]}),a.user_id&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"User ID"}),(0,b.jsx)("p",{className:"font-mono text-sm",children:a.user_id})]}),a.ip_address&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"IP Address"}),(0,b.jsx)("p",{className:"font-mono text-sm",children:a.ip_address})]}),(0,b.jsx)(s.Separator,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold mb-3",children:"Form Data"}),(0,b.jsx)("div",{className:"space-y-3",children:Object.entries(a.data||{}).map(([a,c])=>(0,b.jsxs)("div",{className:"border rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-sm font-medium mb-1",children:a}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:null==c?"N/A":"boolean"==typeof c?c?"Yes":"No":"object"==typeof c?JSON.stringify(c,null,2):Array.isArray(c)?c.join(", "):String(c)})]},a))})]})]})})]})}):null}function v(){let a=(0,d.useParams)().formId,q=(0,d.useRouter)(),[r,s]=(0,c.useState)(!0),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(null);(0,c.useEffect)(()=>{D();let b=j.supabase.channel("form-submissions-changes").on("postgres_changes",{event:"*",schema:"public",table:"form_submissions",filter:`form_id=eq.${a}`},()=>F()).subscribe();return()=>{j.supabase.removeChannel(b)}},[a]);let D=async()=>{a&&(await Promise.all([E(),F()]),s(!1))},E=async()=>{if(!a)return;let{data:b,error:c}=await j.supabase.from("forms").select("*").eq("id",a).single();c?(k.toast.error("Failed to load form"),q.push("/admin/forms")):w(b)},F=async()=>{if(!a)return;let{data:b,error:c}=await j.supabase.from("form_submissions").select("*").eq("form_id",a).order("submitted_at",{ascending:!1});c?(k.toast.error("Failed to load submissions"),console.error(c)):y(b||[])},G=async a=>{if(!confirm("Delete this submission?"))return;let{error:b}=await j.supabase.from("form_submissions").delete().eq("id",a);b?k.toast.error("Failed to delete submission"):k.toast.success("Submission deleted")},H=x.filter(a=>!z||JSON.stringify(a.data).toLowerCase().includes(z.toLowerCase()));return r?(0,b.jsx)(e.AdminLayout,{children:(0,b.jsx)("div",{className:"p-8",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,b.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,b.jsx)("div",{className:"h-8 bg-muted rounded w-1/3"}),(0,b.jsx)("div",{className:"h-64 bg-muted rounded"})]})})})}):v?(0,b.jsxs)(e.AdminLayout,{children:[(0,b.jsx)("div",{className:"p-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",onClick:()=>q.push(`/admin/forms/${a}/builder`),children:(0,b.jsx)(l.ArrowLeft,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Submissions"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:v.title})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(i.Badge,{variant:"secondary",children:[x.length," submissions"]}),(0,b.jsxs)(f.Button,{onClick:()=>{if(0===x.length)return void k.toast.error("No submissions to export");let a=new Set;x.forEach(b=>{Object.keys(b.data||{}).forEach(b=>a.add(b))});let b=["ID","Submitted At",...Array.from(a)],c=x.map(b=>[b.id,(0,t.format)(new Date(b.submitted_at),"yyyy-MM-dd HH:mm:ss"),...Array.from(a).map(a=>{let c=b.data?.[a];return"object"==typeof c?JSON.stringify(c):c||""})]),d=new Blob([[b.join(","),...c.map(a=>a.map(a=>`"${a}"`).join(","))].join("\n")],{type:"text/csv"}),e=URL.createObjectURL(d),f=document.createElement("a");f.href=e,f.download=`${v?.name||"form"}-submissions-${(0,t.format)(new Date,"yyyy-MM-dd")}.csv`,f.click(),URL.revokeObjectURL(e),k.toast.success("Submissions exported")},variant:"outline",disabled:0===x.length,children:[(0,b.jsx)(m,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(p.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(g.Input,{type:"search",placeholder:"Search submissions...",value:z,onChange:a=>A(a.target.value),className:"pl-9"})]}),0===H.length?(0,b.jsxs)("div",{className:"border rounded-lg p-12 text-center",children:[(0,b.jsx)(n.Eye,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:z?"No submissions found":"No submissions yet"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:z?"Try adjusting your search":"Submissions will appear here once users submit the form"})]}):(0,b.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"ID"}),(0,b.jsx)(h.TableHead,{children:"Submitted At"}),(0,b.jsx)(h.TableHead,{children:"Data Preview"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(h.TableBody,{children:H.map(a=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsxs)(h.TableCell,{className:"font-mono text-xs",children:[a.id.substring(0,8),"..."]}),(0,b.jsx)(h.TableCell,{children:(0,t.format)(new Date(a.submitted_at),"MMM d, yyyy h:mm a")}),(0,b.jsx)(h.TableCell,{className:"max-w-md truncate",children:Object.entries(a.data||{}).slice(0,2).map(([a,b])=>`${a}: ${b}`).join(", ")}),(0,b.jsx)(h.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",onClick:()=>C(a),children:[(0,b.jsx)(n.Eye,{className:"h-4 w-4 mr-1"}),"View"]}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>G(a.id),children:(0,b.jsx)(o.Trash2,{className:"h-4 w-4"})})]})})]},a.id))})]})})]})}),(0,b.jsx)(u,{submission:B,onClose:()=>C(null)})]}):null}a.s(["default",()=>v],98980)},59789,a=>{a.v(a=>Promise.resolve().then(()=>a(23952)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a2658f76._.js.map