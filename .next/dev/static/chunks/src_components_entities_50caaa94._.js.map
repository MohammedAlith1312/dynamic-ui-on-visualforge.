{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/components/entities/FieldEditor.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useSortable } from \"@dnd-kit/sortable\";\r\nimport { CSS } from \"@dnd-kit/utilities\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { GripVertical, Trash2, ChevronDown, ChevronUp } from \"lucide-react\";\r\nimport { Label } from \"@/components/ui/label\";\r\n\r\nexport enum E_FieldDataType {\r\n    String = \"String\",\r\n    Interger = \"Interger\",\r\n    Date = \"Date\",\r\n    DateTime = \"DateTime\",\r\n    Decimal = \"Decimal\",\r\n    TimeSpan = \"TimeSpan\",\r\n    Image = \"Image\",\r\n    DropDown = \"DropDown\",\r\n    Relation = \"Relation\",\r\n    Boolean = \"Boolean\",\r\n    TextArea = \"TextArea\",\r\n    DBComputed = \"DBComputed\",\r\n    Formula = \"Formula\",\r\n    File = \"File\",\r\n    Time = \"Time\",\r\n    QRcode = \"QRcode\",\r\n    List = \"List\",\r\n    HTMLEditor = \"HTMLEditor\",\r\n    Button = \"Button\",\r\n    Icon = \"Icon\",\r\n    Password = \"Password\",\r\n    Int64 = \"Int64\",\r\n    Chips = \"Chips\",\r\n    ImageSlider = \"ImageSlider\",\r\n}\r\n\r\nexport interface EntityField {\r\n  id: string;\r\n  name: string;\r\n  display_name: string;\r\n  field_type: E_FieldDataType;\r\n  is_required: boolean;\r\n  default_value: string | null;\r\n}\r\n\r\ninterface FieldEditorProps {\r\n  field: EntityField;\r\n  onUpdate: (updates: Partial<EntityField>) => void;\r\n  onDelete: () => void;\r\n}\r\n\r\nconst FIELD_TYPES = Object.values(E_FieldDataType).map((type) => ({\r\n  value: type,\r\n  label: type.replace(/([A-Z])/g, ' $1').trim(), // Add space before capital letters for label\r\n}));\r\n\r\nexport const FieldEditor = ({ field, onUpdate, onDelete }: FieldEditorProps) => {\r\n  const [expanded, setExpanded] = useState(false);\r\n  const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({\r\n    id: field.name,\r\n  });\r\n\r\n  const style = {\r\n    transform: CSS.Transform.toString(transform),\r\n    transition,\r\n    opacity: isDragging ? 0.5 : 1,\r\n  };\r\n\r\n  return (\r\n    <div\r\n      ref={setNodeRef}\r\n      style={style}\r\n      className=\"border rounded-lg bg-card\"\r\n    >\r\n      <div className=\"flex items-center gap-3 p-4\">     \r\n        <div className=\"flex-1 grid grid-cols-3 gap-3\">\r\n          <Input\r\n            value={field.display_name}\r\n            onChange={(e) => onUpdate({ display_name: e.target.value })}\r\n            placeholder=\"Display Name\"\r\n          />\r\n          <Input\r\n            value={field.name}\r\n            onChange={(e) => onUpdate({ name: e.target.value })}\r\n            placeholder=\"field_name\"\r\n          />\r\n          <Select value={field.field_type} onValueChange={(value) => onUpdate({ field_type: value as E_FieldDataType })}>\r\n            <SelectTrigger>\r\n              <SelectValue />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {FIELD_TYPES.map((type) => (\r\n                <SelectItem key={type.value} value={type.value}>\r\n                  {type.label}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n\r\n        <Button\r\n          variant=\"ghost\"\r\n          size=\"icon\"\r\n          onClick={() => setExpanded(!expanded)}\r\n        >\r\n          {expanded ? <ChevronUp className=\"h-4 w-4\" /> : <ChevronDown className=\"h-4 w-4\" />}\r\n        </Button>\r\n\r\n        <Button variant=\"ghost\" size=\"icon\" onClick={onDelete}>\r\n          <Trash2 className=\"h-4 w-4 text-destructive\" />\r\n        </Button>\r\n      </div>\r\n\r\n      {expanded && (\r\n        <div className=\"border-t p-4 space-y-4 bg-muted/30\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <Label>Required Field</Label>\r\n            <Switch\r\n              checked={field.is_required}\r\n              onCheckedChange={(checked) => onUpdate({ is_required: checked })}\r\n            />\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <Label>Default Value</Label>\r\n            <Input\r\n              value={field.default_value || \"\"}\r\n              onChange={(e) => onUpdate({ default_value: e.target.value || null })}\r\n              placeholder=\"Optional default value\"\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;AAEO,IAAA,AAAK,yCAAA;;;;;;;;;;;;;;;;;;;;;;;;;WAAA;;AA0CZ,MAAM,cAAc,OAAO,MAAM,CAAC,iBAAiB,GAAG,MAAC,CAAC,OAAS,CAAC;QAChE,OAAO;QACP,OAAO,KAAK,OAAO,CAAC,YAAY,OAAO,IAAI;IAC7C,CAAC;;AAEM,MAAM,cAAc,CAAC,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAoB;;IACzE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG,IAAA,qLAAW,EAAC;QAC3F,IAAI,MAAM,IAAI;IAChB;IAEA,MAAM,QAAQ;QACZ,WAAW,+KAAG,CAAC,SAAS,CAAC,QAAQ,CAAC;QAClC;QACA,SAAS,aAAa,MAAM;IAC9B;IAEA,qBACE,6LAAC;QACC,KAAK;QACL,OAAO;QACP,WAAU;;0BAEV,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,6IAAK;gCACJ,OAAO,MAAM,YAAY;gCACzB,UAAU,CAAC,IAAM,SAAS;wCAAE,cAAc,EAAE,MAAM,CAAC,KAAK;oCAAC;gCACzD,aAAY;;;;;;0CAEd,6LAAC,6IAAK;gCACJ,OAAO,MAAM,IAAI;gCACjB,UAAU,CAAC,IAAM,SAAS;wCAAE,MAAM,EAAE,MAAM,CAAC,KAAK;oCAAC;gCACjD,aAAY;;;;;;0CAEd,6LAAC,+IAAM;gCAAC,OAAO,MAAM,UAAU;gCAAE,eAAe,CAAC,QAAU,SAAS;wCAAE,YAAY;oCAAyB;;kDACzG,6LAAC,sJAAa;kDACZ,cAAA,6LAAC,oJAAW;;;;;;;;;;kDAEd,6LAAC,sJAAa;kDACX,YAAY,GAAG,CAAC,CAAC,qBAChB,6LAAC,mJAAU;gDAAkB,OAAO,KAAK,KAAK;0DAC3C,KAAK,KAAK;+CADI,KAAK,KAAK;;;;;;;;;;;;;;;;;;;;;;kCAQnC,6LAAC,+IAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS,IAAM,YAAY,CAAC;kCAE3B,yBAAW,6LAAC,gOAAS;4BAAC,WAAU;;;;;qFAAe,6LAAC,sOAAW;4BAAC,WAAU;;;;;;;;;;;kCAGzE,6LAAC,+IAAM;wBAAC,SAAQ;wBAAQ,MAAK;wBAAO,SAAS;kCAC3C,cAAA,6LAAC,uNAAM;4BAAC,WAAU;;;;;;;;;;;;;;;;;YAIrB,0BACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,6IAAK;0CAAC;;;;;;0CACP,6LAAC,+IAAM;gCACL,SAAS,MAAM,WAAW;gCAC1B,iBAAiB,CAAC,UAAY,SAAS;wCAAE,aAAa;oCAAQ;;;;;;;;;;;;kCAGlE,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,6IAAK;0CAAC;;;;;;0CACP,6LAAC,6IAAK;gCACJ,OAAO,MAAM,aAAa,IAAI;gCAC9B,UAAU,CAAC,IAAM,SAAS;wCAAE,eAAe,EAAE,MAAM,CAAC,KAAK,IAAI;oCAAK;gCAClE,aAAY;;;;;;;;;;;;;;;;;;;;;;;;AAO1B;GA9Ea;;QAEsE,qLAAW;;;MAFjF"}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/components/entities/views/CardView.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { E_FieldDataType } from \"@/components/entities/FieldEditor\";\r\nimport { Card, CardContent, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Edit, Trash2, Eye, EyeOff } from \"lucide-react\";\r\n\r\n\r\n\r\nimport { EntityRecord, EntityField } from \"@/types/entity\";\r\n\r\ninterface CardLayout {\r\n  titleField: string;\r\n  subtitleField?: string;\r\n  imageField?: string;\r\n  displayFields: Array<{ fieldId: string; position: number }>;\r\n}\r\n\r\ninterface CardViewProps {\r\n  records: EntityRecord[];\r\n  fields: EntityField[];\r\n  cardLayout?: CardLayout;\r\n  onEdit: (record: EntityRecord) => void;\r\n  onDelete: (record: EntityRecord) => void;\r\n  onTogglePublish: (record: EntityRecord) => void;\r\n}\r\n\r\nexport const CardView = ({ records, fields, cardLayout, onEdit, onDelete, onTogglePublish }: CardViewProps) => {\r\n  const getFieldValue = (record: EntityRecord, fieldName: string) => {\r\n    const field = fields.find(f => f.name === fieldName);\r\n    if (!field) return null;\r\n\r\n    const value = record.data[field.name];\r\n    if (value === null || value === undefined) return null;\r\n\r\n    if (field.field_type === E_FieldDataType.Boolean) return value ? 'Yes' : 'No';\r\n    if (field.field_type === E_FieldDataType.Date) return new Date(value).toLocaleDateString();\r\n    if (field.field_type === E_FieldDataType.Image) return value;\r\n    return String(value);\r\n  };\r\n\r\n  const titleField = fields.find(f => f.name === cardLayout?.titleField) || fields[0];\r\n  const subtitleField = cardLayout?.subtitleField ? fields.find(f => f.name === cardLayout.subtitleField) : null;\r\n  const imageField = cardLayout?.imageField ? fields.find(f => f.name === cardLayout.imageField) : null;\r\n\r\n  const displayFields = cardLayout?.displayFields\r\n    ?.sort((a, b) => a.position - b.position)\r\n    .map(df => fields.find(f => f.name === df.fieldId))\r\n    .filter(Boolean) as EntityField[] || [];\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\r\n      {records.map((record) => (\r\n        <Card key={record.id} className=\"overflow-hidden\">\r\n          {imageField && getFieldValue(record, imageField.name) && (\r\n            <div className=\"w-full h-48 overflow-hidden bg-muted\">\r\n              <img\r\n                src={getFieldValue(record, imageField.name) || ''}\r\n                alt={getFieldValue(record, titleField.name) || 'Record image'}\r\n                className=\"w-full h-full object-cover\"\r\n              />\r\n            </div>\r\n          )}\r\n          <CardHeader>\r\n            <div className=\"flex items-start justify-between gap-2\">\r\n              <div className=\"flex-1 min-w-0\">\r\n                <CardTitle className=\"text-lg truncate\">\r\n                  {getFieldValue(record, titleField.name) || 'Untitled'}\r\n                </CardTitle>\r\n                {subtitleField && (\r\n                  <p className=\"text-sm text-muted-foreground mt-1 truncate\">\r\n                    {getFieldValue(record, subtitleField.name)}\r\n                  </p>\r\n                )}\r\n              </div>\r\n              <Badge variant={record.is_published ? \"default\" : \"secondary\"}>\r\n                {record.is_published ? \"Published\" : \"Draft\"}\r\n              </Badge>\r\n            </div>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"space-y-2\">\r\n              {displayFields.map((field) => {\r\n                const value = getFieldValue(record, field.name);\r\n                if (!value) return null;\r\n\r\n                return (\r\n                  <div key={field.name} className=\"text-sm\">\r\n                    <span className=\"font-medium text-muted-foreground\">{field.display_name}: </span>\r\n                    {field.field_type === E_FieldDataType.TextArea ? (\r\n                      <p className=\"line-clamp-2\">{value}</p>\r\n                    ) : (\r\n                      <span>{value}</span>\r\n                    )}\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </CardContent>\r\n          <CardFooter className=\"flex gap-2 pt-4 border-t\">\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => onEdit(record)}>\r\n              <Edit className=\"h-4 w-4\" />\r\n            </Button>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => onTogglePublish(record)}\r\n            >\r\n              {record.is_published ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n            </Button>\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => onDelete(record)}>\r\n              <Trash2 className=\"h-4 w-4\" />\r\n            </Button>\r\n          </CardFooter>\r\n        </Card>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 522, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/components/entities/views/KanbanView.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useMemo } from \"react\";\r\nimport { E_FieldDataType } from \"@/components/entities/FieldEditor\";\r\nimport { Card, CardContent, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Edit, Trash2, Eye, EyeOff } from \"lucide-react\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\n\r\n\r\n\r\nimport { EntityRecord, EntityField } from \"@/types/entity\";\r\n\r\ninterface CardLayout {\r\n  titleField: string;\r\n  subtitleField?: string;\r\n  displayFields: Array<{ fieldId: string; position: number }>;\r\n}\r\n\r\ninterface KanbanConfig {\r\n  groupByField: string;\r\n  cardLayout: CardLayout;\r\n}\r\n\r\ninterface KanbanViewProps {\r\n  records: EntityRecord[];\r\n  fields: EntityField[];\r\n  kanbanConfig?: KanbanConfig;\r\n  onEdit: (record: EntityRecord) => void;\r\n  onDelete: (record: EntityRecord) => void;\r\n  onTogglePublish: (record: EntityRecord) => void;\r\n}\r\n\r\nexport const KanbanView = ({ records, fields, kanbanConfig, onEdit, onDelete, onTogglePublish }: KanbanViewProps) => {\r\n  const getFieldValue = (record: EntityRecord, fieldId: string) => {\r\n    const field = fields.find(f => f.id === fieldId);\r\n    if (!field) return null;\r\n\r\n    const value = record.data[field.name];\r\n    if (value === null || value === undefined) return null;\r\n\r\n    if (field.field_type === E_FieldDataType.Boolean) return value ? 'Yes' : 'No';\r\n    if (field.field_type === E_FieldDataType.Date) return new Date(value).toLocaleDateString();\r\n    return String(value);\r\n  };\r\n\r\n  const groupByField = fields.find(f => f.id === kanbanConfig?.groupByField);\r\n  const titleField = fields.find(f => f.id === kanbanConfig?.cardLayout.titleField) || fields[0];\r\n  const subtitleField = kanbanConfig?.cardLayout.subtitleField\r\n    ? fields.find(f => f.id === kanbanConfig.cardLayout.subtitleField)\r\n    : null;\r\n\r\n  const displayFields = kanbanConfig?.cardLayout.displayFields\r\n    ?.sort((a, b) => a.position - b.position)\r\n    .map(df => fields.find(f => f.id === df.fieldId))\r\n    .filter(Boolean) as EntityField[] || [];\r\n\r\n  const groupedRecords = useMemo(() => {\r\n    if (!groupByField) return { 'All Records': records };\r\n\r\n    const groups: Record<string, EntityRecord[]> = {};\r\n    records.forEach(record => {\r\n      const groupValue = record.data[groupByField.name] || 'Uncategorized';\r\n      if (!groups[groupValue]) {\r\n        groups[groupValue] = [];\r\n      }\r\n      groups[groupValue].push(record);\r\n    });\r\n    return groups;\r\n  }, [records, groupByField]);\r\n\r\n  if (!kanbanConfig || !groupByField) {\r\n    return (\r\n      <div className=\"text-center py-12 text-muted-foreground\">\r\n        Please configure the Kanban view by selecting a grouping field in View Options.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex gap-4 overflow-x-auto pb-4\">\r\n      {Object.entries(groupedRecords).map(([groupName, groupRecords]) => (\r\n        <div key={groupName} className=\"flex-shrink-0 w-80\">\r\n          <div className=\"bg-muted/50 rounded-lg p-4\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"font-semibold\">{groupName}</h3>\r\n              <Badge variant=\"secondary\">{groupRecords.length}</Badge>\r\n            </div>\r\n            <ScrollArea className=\"h-[calc(100vh-16rem)]\">\r\n              <div className=\"space-y-3 pr-4\">\r\n                {groupRecords.map((record) => (\r\n                  <Card key={record.id}>\r\n                    <CardHeader className=\"pb-3\">\r\n                      <div className=\"flex items-start justify-between gap-2\">\r\n                        <CardTitle className=\"text-base truncate\">\r\n                          {getFieldValue(record, titleField.id) || 'Untitled'}\r\n                        </CardTitle>\r\n                        <Badge variant={record.is_published ? \"default\" : \"secondary\"} className=\"flex-shrink-0\">\r\n                          {record.is_published ? \"Published\" : \"Draft\"}\r\n                        </Badge>\r\n                      </div>\r\n                      {subtitleField && (\r\n                        <p className=\"text-sm text-muted-foreground truncate\">\r\n                          {getFieldValue(record, subtitleField.id)}\r\n                        </p>\r\n                      )}\r\n                    </CardHeader>\r\n                    <CardContent className=\"pb-3\">\r\n                      <div className=\"space-y-1\">\r\n                        {displayFields.map((field) => {\r\n                          const value = getFieldValue(record, field.id);\r\n                          if (!value) return null;\r\n\r\n                          return (\r\n                            <div key={field.id} className=\"text-sm\">\r\n                              <span className=\"font-medium text-muted-foreground\">{field.display_name}: </span>\r\n                              {field.field_type === E_FieldDataType.TextArea ? (\r\n                                <p className=\"line-clamp-1\">{value}</p>\r\n                              ) : (\r\n                                <span>{value}</span>\r\n                              )}\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </CardContent>\r\n                    <CardFooter className=\"flex gap-2 pt-3 border-t\">\r\n                      <Button variant=\"ghost\" size=\"sm\" onClick={() => onEdit(record)}>\r\n                        <Edit className=\"h-3 w-3\" />\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => onTogglePublish(record)}\r\n                      >\r\n                        {record.is_published ? <EyeOff className=\"h-3 w-3\" /> : <Eye className=\"h-3 w-3\" />}\r\n                      </Button>\r\n                      <Button variant=\"ghost\" size=\"sm\" onClick={() => onDelete(record)}>\r\n                        <Trash2 className=\"h-3 w-3\" />\r\n                      </Button>\r\n                    </CardFooter>\r\n                  </Card>\r\n                ))}\r\n              </div>\r\n            </ScrollArea>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;;;AARA;;;;;;;;AAkCO,MAAM,aAAa,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,QAAQ,EAAE,eAAe,EAAmB;;IAC9G,MAAM,gBAAgB,CAAC,QAAsB;QAC3C,MAAM,QAAQ,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QACxC,IAAI,CAAC,OAAO,OAAO;QAEnB,MAAM,QAAQ,OAAO,IAAI,CAAC,MAAM,IAAI,CAAC;QACrC,IAAI,UAAU,QAAQ,UAAU,WAAW,OAAO;QAElD,IAAI,MAAM,UAAU,KAAK,mKAAe,CAAC,OAAO,EAAE,OAAO,QAAQ,QAAQ;QACzE,IAAI,MAAM,UAAU,KAAK,mKAAe,CAAC,IAAI,EAAE,OAAO,IAAI,KAAK,OAAO,kBAAkB;QACxF,OAAO,OAAO;IAChB;IAEA,MAAM,eAAe,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,cAAc;IAC7D,MAAM,aAAa,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,cAAc,WAAW,eAAe,MAAM,CAAC,EAAE;IAC9F,MAAM,gBAAgB,cAAc,WAAW,gBAC3C,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,aAAa,UAAU,CAAC,aAAa,IAC/D;IAEJ,MAAM,gBAAgB,cAAc,WAAW,eAC3C,KAAK,CAAC,GAAG,IAAM,EAAE,QAAQ,GAAG,EAAE,QAAQ,EACvC,IAAI,CAAA,KAAM,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,GAAG,OAAO,GAC9C,OAAO,YAA6B,EAAE;IAEzC,MAAM,iBAAiB,IAAA,wKAAO;8CAAC;YAC7B,IAAI,CAAC,cAAc,OAAO;gBAAE,eAAe;YAAQ;YAEnD,MAAM,SAAyC,CAAC;YAChD,QAAQ,OAAO;sDAAC,CAAA;oBACd,MAAM,aAAa,OAAO,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI;oBACrD,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE;wBACvB,MAAM,CAAC,WAAW,GAAG,EAAE;oBACzB;oBACA,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC;gBAC1B;;YACA,OAAO;QACT;6CAAG;QAAC;QAAS;KAAa;IAE1B,IAAI,CAAC,gBAAgB,CAAC,cAAc;QAClC,qBACE,6LAAC;YAAI,WAAU;sBAA0C;;;;;;IAI7D;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACZ,OAAO,OAAO,CAAC,gBAAgB,GAAG,CAAC,CAAC,CAAC,WAAW,aAAa,iBAC5D,6LAAC;gBAAoB,WAAU;0BAC7B,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAG,WAAU;8CAAiB;;;;;;8CAC/B,6LAAC,6IAAK;oCAAC,SAAQ;8CAAa,aAAa,MAAM;;;;;;;;;;;;sCAEjD,6LAAC,2JAAU;4BAAC,WAAU;sCACpB,cAAA,6LAAC;gCAAI,WAAU;0CACZ,aAAa,GAAG,CAAC,CAAC,uBACjB,6LAAC,2IAAI;;0DACH,6LAAC,iJAAU;gDAAC,WAAU;;kEACpB,6LAAC;wDAAI,WAAU;;0EACb,6LAAC,gJAAS;gEAAC,WAAU;0EAClB,cAAc,QAAQ,WAAW,EAAE,KAAK;;;;;;0EAE3C,6LAAC,6IAAK;gEAAC,SAAS,OAAO,YAAY,GAAG,YAAY;gEAAa,WAAU;0EACtE,OAAO,YAAY,GAAG,cAAc;;;;;;;;;;;;oDAGxC,+BACC,6LAAC;wDAAE,WAAU;kEACV,cAAc,QAAQ,cAAc,EAAE;;;;;;;;;;;;0DAI7C,6LAAC,kJAAW;gDAAC,WAAU;0DACrB,cAAA,6LAAC;oDAAI,WAAU;8DACZ,cAAc,GAAG,CAAC,CAAC;wDAClB,MAAM,QAAQ,cAAc,QAAQ,MAAM,EAAE;wDAC5C,IAAI,CAAC,OAAO,OAAO;wDAEnB,qBACE,6LAAC;4DAAmB,WAAU;;8EAC5B,6LAAC;oEAAK,WAAU;;wEAAqC,MAAM,YAAY;wEAAC;;;;;;;gEACvE,MAAM,UAAU,KAAK,mKAAe,CAAC,QAAQ,iBAC5C,6LAAC;oEAAE,WAAU;8EAAgB;;;;;6HAE7B,6LAAC;8EAAM;;;;;;;2DALD,MAAM,EAAE;;;;;oDAStB;;;;;;;;;;;0DAGJ,6LAAC,iJAAU;gDAAC,WAAU;;kEACpB,6LAAC,+IAAM;wDAAC,SAAQ;wDAAQ,MAAK;wDAAK,SAAS,IAAM,OAAO;kEACtD,cAAA,6LAAC,sNAAI;4DAAC,WAAU;;;;;;;;;;;kEAElB,6LAAC,+IAAM;wDACL,SAAQ;wDACR,MAAK;wDACL,SAAS,IAAM,gBAAgB;kEAE9B,OAAO,YAAY,iBAAG,6LAAC,uNAAM;4DAAC,WAAU;;;;;qHAAe,6LAAC,0MAAG;4DAAC,WAAU;;;;;;;;;;;kEAEzE,6LAAC,+IAAM;wDAAC,SAAQ;wDAAQ,MAAK;wDAAK,SAAS,IAAM,SAAS;kEACxD,cAAA,6LAAC,uNAAM;4DAAC,WAAU;;;;;;;;;;;;;;;;;;uCA/Cb,OAAO,EAAE;;;;;;;;;;;;;;;;;;;;;eATpB;;;;;;;;;;AAoElB;GArHa;KAAA"}},
    {"offset": {"line": 833, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/components/entities/views/GalleryView.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { E_FieldDataType } from \"@/components/entities/FieldEditor\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Edit, Trash2, Eye, EyeOff } from \"lucide-react\";\r\n\r\n\r\n\r\nimport { EntityRecord, EntityField } from \"@/types/entity\";\r\n\r\ninterface GalleryConfig {\r\n  imageField: string;\r\n  titleField: string;\r\n  subtitleField?: string;\r\n}\r\n\r\ninterface GalleryViewProps {\r\n  records: EntityRecord[];\r\n  fields: EntityField[];\r\n  galleryConfig?: GalleryConfig;\r\n  onEdit: (record: EntityRecord) => void;\r\n  onDelete: (record: EntityRecord) => void;\r\n  onTogglePublish: (record: EntityRecord) => void;\r\n}\r\n\r\nexport const GalleryView = ({ records, fields, galleryConfig, onEdit, onDelete, onTogglePublish }: GalleryViewProps) => {\r\n  const getFieldValue = (record: EntityRecord, fieldName: string) => {\r\n    const field = fields.find(f => f.name === fieldName);\r\n    if (!field) return null;\r\n    return record.data[field.name];\r\n  };\r\n\r\n  const imageField = fields.find(f => f.name === galleryConfig?.imageField);\r\n  const titleField = fields.find(f => f.name === galleryConfig?.titleField) || fields[0];\r\n  const subtitleField = galleryConfig?.subtitleField ? fields.find(f => f.name === galleryConfig.subtitleField) : null;\r\n\r\n  if (!galleryConfig || !imageField) {\r\n    return (\r\n      <div className=\"text-center py-12 text-muted-foreground\">\r\n        Please configure the Gallery view by selecting an image field in View Options.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\r\n      {records.map((record) => {\r\n        const imageUrl = getFieldValue(record, imageField.name);\r\n        const title = getFieldValue(record, titleField.name) || 'Untitled';\r\n        const subtitle = subtitleField ? getFieldValue(record, subtitleField.name) : null;\r\n\r\n        return (\r\n          <div key={record.id} className=\"group relative aspect-square rounded-lg overflow-hidden bg-muted\">\r\n            {imageUrl ? (\r\n              <img\r\n                src={imageUrl}\r\n                alt={title}\r\n                className=\"w-full h-full object-cover transition-transform group-hover:scale-105\"\r\n              />\r\n            ) : (\r\n              <div className=\"w-full h-full flex items-center justify-center text-muted-foreground\">\r\n                No Image\r\n              </div>\r\n            )}\r\n            <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity\">\r\n              <div className=\"absolute bottom-0 left-0 right-0 p-4 text-white\">\r\n                <div className=\"flex items-start justify-between mb-2\">\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <h3 className=\"font-semibold truncate\">{title}</h3>\r\n                    {subtitle && (\r\n                      <p className=\"text-sm text-white/80 truncate\">{subtitle}</p>\r\n                    )}\r\n                  </div>\r\n                  <Badge variant={record.is_published ? \"default\" : \"secondary\"}>\r\n                    {record.is_published ? \"Published\" : \"Draft\"}\r\n                  </Badge>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  <Button variant=\"secondary\" size=\"sm\" onClick={() => onEdit(record)}>\r\n                    <Edit className=\"h-3 w-3\" />\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"secondary\"\r\n                    size=\"sm\"\r\n                    onClick={() => onTogglePublish(record)}\r\n                  >\r\n                    {record.is_published ? <EyeOff className=\"h-3 w-3\" /> : <Eye className=\"h-3 w-3\" />}\r\n                  </Button>\r\n                  <Button variant=\"secondary\" size=\"sm\" onClick={() => onDelete(record)}>\r\n                    <Trash2 className=\"h-3 w-3\" />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AALA;;;;;AA0BO,MAAM,cAAc,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,aAAa,EAAE,MAAM,EAAE,QAAQ,EAAE,eAAe,EAAoB;IACjH,MAAM,gBAAgB,CAAC,QAAsB;QAC3C,MAAM,QAAQ,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK;QAC1C,IAAI,CAAC,OAAO,OAAO;QACnB,OAAO,OAAO,IAAI,CAAC,MAAM,IAAI,CAAC;IAChC;IAEA,MAAM,aAAa,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,eAAe;IAC9D,MAAM,aAAa,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,eAAe,eAAe,MAAM,CAAC,EAAE;IACtF,MAAM,gBAAgB,eAAe,gBAAgB,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,cAAc,aAAa,IAAI;IAEhH,IAAI,CAAC,iBAAiB,CAAC,YAAY;QACjC,qBACE,6LAAC;YAAI,WAAU;sBAA0C;;;;;;IAI7D;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACZ,QAAQ,GAAG,CAAC,CAAC;YACZ,MAAM,WAAW,cAAc,QAAQ,WAAW,IAAI;YACtD,MAAM,QAAQ,cAAc,QAAQ,WAAW,IAAI,KAAK;YACxD,MAAM,WAAW,gBAAgB,cAAc,QAAQ,cAAc,IAAI,IAAI;YAE7E,qBACE,6LAAC;gBAAoB,WAAU;;oBAC5B,yBACC,6LAAC;wBACC,KAAK;wBACL,KAAK;wBACL,WAAU;;;;;iFAGZ,6LAAC;wBAAI,WAAU;kCAAuE;;;;;;kCAIxF,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAG,WAAU;8DAA0B;;;;;;gDACvC,0BACC,6LAAC;oDAAE,WAAU;8DAAkC;;;;;;;;;;;;sDAGnD,6LAAC,6IAAK;4CAAC,SAAS,OAAO,YAAY,GAAG,YAAY;sDAC/C,OAAO,YAAY,GAAG,cAAc;;;;;;;;;;;;8CAGzC,6LAAC;oCAAI,WAAU;;sDACb,6LAAC,+IAAM;4CAAC,SAAQ;4CAAY,MAAK;4CAAK,SAAS,IAAM,OAAO;sDAC1D,cAAA,6LAAC,sNAAI;gDAAC,WAAU;;;;;;;;;;;sDAElB,6LAAC,+IAAM;4CACL,SAAQ;4CACR,MAAK;4CACL,SAAS,IAAM,gBAAgB;sDAE9B,OAAO,YAAY,iBAAG,6LAAC,uNAAM;gDAAC,WAAU;;;;;yGAAe,6LAAC,0MAAG;gDAAC,WAAU;;;;;;;;;;;sDAEzE,6LAAC,+IAAM;4CAAC,SAAQ;4CAAY,MAAK;4CAAK,SAAS,IAAM,SAAS;sDAC5D,cAAA,6LAAC,uNAAM;gDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eArClB,OAAO,EAAE;;;;;QA4CvB;;;;;;AAGN;KA1Ea"}},
    {"offset": {"line": 1037, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/components/entities/views/ListView.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { E_FieldDataType } from \"@/components/entities/FieldEditor\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Edit, Trash2, Eye, EyeOff } from \"lucide-react\";\r\n\r\n\r\n\r\nimport { EntityRecord, EntityField } from \"@/types/entity\";\r\n\r\ninterface ListConfig {\r\n  titleField: string;\r\n  subtitleField?: string;\r\n  displayFields: Array<{ fieldId: string; position: number }>;\r\n}\r\n\r\ninterface ListViewProps {\r\n  records: EntityRecord[];\r\n  fields: EntityField[];\r\n  listConfig?: ListConfig;\r\n  onEdit: (record: EntityRecord) => void;\r\n  onDelete: (record: EntityRecord) => void;\r\n  onTogglePublish: (record: EntityRecord) => void;\r\n}\r\n\r\nexport const ListView = ({ records, fields, listConfig, onEdit, onDelete, onTogglePublish }: ListViewProps) => {\r\n  const getFieldValue = (record: EntityRecord, fieldName: string) => {\r\n    const field = fields.find(f => f.name === fieldName);\r\n    if (!field) return null;\r\n\r\n    const value = record.data[field.name];\r\n    if (value === null || value === undefined) return null;\r\n\r\n    if (field.field_type === E_FieldDataType.Boolean) return value ? 'Yes' : 'No';\r\n    if (field.field_type === E_FieldDataType.Date || field.field_type === E_FieldDataType.DateTime) return new Date(value).toLocaleDateString();\r\n    return String(value);\r\n  };\r\n\r\n  const titleField = fields.find(f => f.name === listConfig?.titleField) || fields[0];\r\n  const subtitleField = listConfig?.subtitleField ? fields.find(f => f.name === listConfig.subtitleField) : null;\r\n\r\n  const displayFields = listConfig?.displayFields\r\n    ?.sort((a, b) => a.position - b.position)\r\n    .map(df => fields.find(f => f.name === df.fieldId))\r\n    .filter(Boolean) as EntityField[] || [];\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      {records.map((record) => (\r\n        <div\r\n          key={record.id}\r\n          className=\"flex items-center gap-4 p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors\"\r\n        >\r\n          <div className=\"flex-1 min-w-0\">\r\n            <div className=\"flex items-center gap-2 mb-1\">\r\n              <h3 className=\"font-semibold truncate\">\r\n                {getFieldValue(record, titleField.name) || 'Untitled'}\r\n              </h3>\r\n              <Badge variant={record.is_published ? \"default\" : \"secondary\"}>\r\n                {record.is_published ? \"Published\" : \"Draft\"}\r\n              </Badge>\r\n            </div>\r\n            {subtitleField && (\r\n              <p className=\"text-sm text-muted-foreground mb-2 truncate\">\r\n                {getFieldValue(record, subtitleField.name)}\r\n              </p>\r\n            )}\r\n            <div className=\"flex flex-wrap gap-x-4 gap-y-1 text-sm\">\r\n              {displayFields.map((field) => {\r\n                const value = getFieldValue(record, field.name);\r\n                if (!value) return null;\r\n\r\n                return (\r\n                  <div key={field.name} className=\"text-muted-foreground\">\r\n                    <span className=\"font-medium\">{field.display_name}:</span>{' '}\r\n                    {field.field_type === E_FieldDataType.TextArea ? (\r\n                      <p className=\"line-clamp-1\">{value}</p>\r\n                    ) : (\r\n                      <span>{value}</span>\r\n                    )}\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n          <div className=\"flex gap-2 flex-shrink-0\">\r\n            <Button variant=\"ghost\" size=\"sm\" onClick={() => onEdit(record)}>\r\n              <Edit className=\"h-4 w-4\" />\r\n            </Button>\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={() => onTogglePublish(record)}\r\n            >\r\n              {record.is_published ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n            </Button>\r\n            <Button variant=\"ghost\" size=\"sm\" onClick={() => onDelete(record)}>\r\n              <Trash2 className=\"h-4 w-4\" />\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AALA;;;;;;AA0BO,MAAM,WAAW,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,QAAQ,EAAE,eAAe,EAAiB;IACxG,MAAM,gBAAgB,CAAC,QAAsB;QAC3C,MAAM,QAAQ,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK;QAC1C,IAAI,CAAC,OAAO,OAAO;QAEnB,MAAM,QAAQ,OAAO,IAAI,CAAC,MAAM,IAAI,CAAC;QACrC,IAAI,UAAU,QAAQ,UAAU,WAAW,OAAO;QAElD,IAAI,MAAM,UAAU,KAAK,mKAAe,CAAC,OAAO,EAAE,OAAO,QAAQ,QAAQ;QACzE,IAAI,MAAM,UAAU,KAAK,mKAAe,CAAC,IAAI,IAAI,MAAM,UAAU,KAAK,mKAAe,CAAC,QAAQ,EAAE,OAAO,IAAI,KAAK,OAAO,kBAAkB;QACzI,OAAO,OAAO;IAChB;IAEA,MAAM,aAAa,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,YAAY,eAAe,MAAM,CAAC,EAAE;IACnF,MAAM,gBAAgB,YAAY,gBAAgB,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,WAAW,aAAa,IAAI;IAE1G,MAAM,gBAAgB,YAAY,eAC9B,KAAK,CAAC,GAAG,IAAM,EAAE,QAAQ,GAAG,EAAE,QAAQ,EACvC,IAAI,CAAA,KAAM,OAAO,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,GAAG,OAAO,GAChD,OAAO,YAA6B,EAAE;IAEzC,qBACE,6LAAC;QAAI,WAAU;kBACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,6LAAC;gBAEC,WAAU;;kCAEV,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;kDACX,cAAc,QAAQ,WAAW,IAAI,KAAK;;;;;;kDAE7C,6LAAC,6IAAK;wCAAC,SAAS,OAAO,YAAY,GAAG,YAAY;kDAC/C,OAAO,YAAY,GAAG,cAAc;;;;;;;;;;;;4BAGxC,+BACC,6LAAC;gCAAE,WAAU;0CACV,cAAc,QAAQ,cAAc,IAAI;;;;;;0CAG7C,6LAAC;gCAAI,WAAU;0CACZ,cAAc,GAAG,CAAC,CAAC;oCAClB,MAAM,QAAQ,cAAc,QAAQ,MAAM,IAAI;oCAC9C,IAAI,CAAC,OAAO,OAAO;oCAEnB,qBACE,6LAAC;wCAAqB,WAAU;;0DAC9B,6LAAC;gDAAK,WAAU;;oDAAe,MAAM,YAAY;oDAAC;;;;;;;4CAAS;4CAC1D,MAAM,UAAU,KAAK,mKAAe,CAAC,QAAQ,iBAC5C,6LAAC;gDAAE,WAAU;0DAAgB;;;;;yGAE7B,6LAAC;0DAAM;;;;;;;uCALD,MAAM,IAAI;;;;;gCASxB;;;;;;;;;;;;kCAGJ,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,+IAAM;gCAAC,SAAQ;gCAAQ,MAAK;gCAAK,SAAS,IAAM,OAAO;0CACtD,cAAA,6LAAC,sNAAI;oCAAC,WAAU;;;;;;;;;;;0CAElB,6LAAC,+IAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,SAAS,IAAM,gBAAgB;0CAE9B,OAAO,YAAY,iBAAG,6LAAC,uNAAM;oCAAC,WAAU;;;;;6FAAe,6LAAC,0MAAG;oCAAC,WAAU;;;;;;;;;;;0CAEzE,6LAAC,+IAAM;gCAAC,SAAQ;gCAAQ,MAAK;gCAAK,SAAS,IAAM,SAAS;0CACxD,cAAA,6LAAC,uNAAM;oCAAC,WAAU;;;;;;;;;;;;;;;;;;eA/CjB,OAAO,EAAE;;;;;;;;;;AAsDxB;KA/Ea"}},
    {"offset": {"line": 1246, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/components/entities/views/TimelineView.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useMemo } from \"react\";\r\nimport { E_FieldDataType } from \"@/components/entities/FieldEditor\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Edit, Trash2, Eye, EyeOff } from \"lucide-react\";\r\n\r\n\r\n\r\nimport { EntityRecord, EntityField } from \"@/types/entity\";\r\n\r\ninterface TimelineConfig {\r\n  dateField: string;\r\n  titleField: string;\r\n  descriptionField?: string;\r\n}\r\n\r\ninterface TimelineViewProps {\r\n  records: EntityRecord[];\r\n  fields: EntityField[];\r\n  timelineConfig?: TimelineConfig;\r\n  onEdit: (record: EntityRecord) => void;\r\n  onDelete: (record: EntityRecord) => void;\r\n  onTogglePublish: (record: EntityRecord) => void;\r\n}\r\n\r\nexport const TimelineView = ({ records, fields, timelineConfig, onEdit, onDelete, onTogglePublish }: TimelineViewProps) => {\r\n  const getFieldValue = (record: EntityRecord, fieldId: string) => {\r\n    const field = fields.find(f => f.id === fieldId);\r\n    if (!field) return null;\r\n    return record.data[field.name];\r\n  };\r\n\r\n  const dateField = fields.find(f => f.id === timelineConfig?.dateField);\r\n  const titleField = fields.find(f => f.id === timelineConfig?.titleField) || fields[0];\r\n  const descriptionField = timelineConfig?.descriptionField\r\n    ? fields.find(f => f.id === timelineConfig.descriptionField)\r\n    : null;\r\n\r\n  const sortedRecords = useMemo(() => {\r\n    if (!dateField) return records;\r\n\r\n    return [...records].sort((a, b) => {\r\n      const dateA = new Date(a.data[dateField.name] || a.created_at).getTime();\r\n      const dateB = new Date(b.data[dateField.name] || b.created_at).getTime();\r\n      return dateB - dateA; // Most recent first\r\n    });\r\n  }, [records, dateField]);\r\n\r\n  if (!timelineConfig || !dateField) {\r\n    return (\r\n      <div className=\"text-center py-12 text-muted-foreground\">\r\n        Please configure the Timeline view by selecting a date field in View Options.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <div className=\"relative\">\r\n        {/* Vertical line */}\r\n        <div className=\"absolute left-8 top-0 bottom-0 w-0.5 bg-border\" />\r\n\r\n        <div className=\"space-y-8\">\r\n          {sortedRecords.map((record, index) => {\r\n            const date = getFieldValue(record, dateField.id);\r\n            const title = getFieldValue(record, titleField.id) || 'Untitled';\r\n            const description = descriptionField ? getFieldValue(record, descriptionField.id) : null;\r\n            const formattedDate = date ? new Date(date).toLocaleDateString('en-US', {\r\n              year: 'numeric',\r\n              month: 'long',\r\n              day: 'numeric'\r\n            }) : 'No date';\r\n\r\n            return (\r\n              <div key={record.id} className=\"relative pl-16\">\r\n                {/* Timeline dot */}\r\n                <div className=\"absolute left-6 w-5 h-5 rounded-full bg-primary border-4 border-background\" />\r\n\r\n                <div className=\"rounded-lg border bg-card p-6\">\r\n                  <div className=\"flex items-start justify-between gap-4 mb-2\">\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center gap-2 mb-1\">\r\n                        <h3 className=\"font-semibold text-lg\">{title}</h3>\r\n                        <Badge variant={record.is_published ? \"default\" : \"secondary\"}>\r\n                          {record.is_published ? \"Published\" : \"Draft\"}\r\n                        </Badge>\r\n                      </div>\r\n                      <p className=\"text-sm text-muted-foreground\">{formattedDate}</p>\r\n                    </div>\r\n                    <div className=\"flex gap-2\">\r\n                      <Button variant=\"ghost\" size=\"sm\" onClick={() => onEdit(record)}>\r\n                        <Edit className=\"h-4 w-4\" />\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => onTogglePublish(record)}\r\n                      >\r\n                        {record.is_published ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\r\n                      </Button>\r\n                      <Button variant=\"ghost\" size=\"sm\" onClick={() => onDelete(record)}>\r\n                        <Trash2 className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                  {description && (\r\n                    <p className=\"text-muted-foreground\">{description}</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1501, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/components/entities/views/CalendarView.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useMemo, useState } from \"react\";\r\nimport { E_FieldDataType } from \"@/components/entities/FieldEditor\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { ChevronLeft, ChevronRight, Edit, Trash2, Eye, EyeOff } from \"lucide-react\";\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\n\r\n\r\n\r\nimport { EntityRecord, EntityField } from \"@/types/entity\";\r\n\r\ninterface CalendarConfig {\r\n  dateField: string;\r\n  titleField: string;\r\n}\r\n\r\ninterface CalendarViewProps {\r\n  records: EntityRecord[];\r\n  fields: EntityField[];\r\n  calendarConfig?: CalendarConfig;\r\n  onEdit: (record: EntityRecord) => void;\r\n  onDelete: (record: EntityRecord) => void;\r\n  onTogglePublish: (record: EntityRecord) => void;\r\n}\r\n\r\nexport const CalendarView = ({ records, fields, calendarConfig, onEdit, onDelete, onTogglePublish }: CalendarViewProps) => {\r\n  const [currentDate, setCurrentDate] = useState(new Date());\r\n\r\n  const getFieldValue = (record: EntityRecord, fieldId: string) => {\r\n    const field = fields.find(f => f.id === fieldId);\r\n    if (!field) return null;\r\n    return record.data[field.name];\r\n  };\r\n\r\n  const dateField = fields.find(f => f.id === calendarConfig?.dateField);\r\n  const titleField = fields.find(f => f.id === calendarConfig?.titleField) || fields[0];\r\n\r\n  const recordsByDate = useMemo(() => {\r\n    if (!dateField) return {};\r\n\r\n    const map: Record<string, EntityRecord[]> = {};\r\n    records.forEach(record => {\r\n      const date = record.data[dateField.name];\r\n      if (date) {\r\n        const dateKey = new Date(date).toDateString();\r\n        if (!map[dateKey]) map[dateKey] = [];\r\n        map[dateKey].push(record);\r\n      }\r\n    });\r\n    return map;\r\n  }, [records, dateField]);\r\n\r\n  const getDaysInMonth = (date: Date) => {\r\n    const year = date.getFullYear();\r\n    const month = date.getMonth();\r\n    const firstDay = new Date(year, month, 1);\r\n    const lastDay = new Date(year, month + 1, 0);\r\n    const daysInMonth = lastDay.getDate();\r\n    const startingDayOfWeek = firstDay.getDay();\r\n\r\n    return { daysInMonth, startingDayOfWeek, year, month };\r\n  };\r\n\r\n  const { daysInMonth, startingDayOfWeek, year, month } = getDaysInMonth(currentDate);\r\n\r\n  const previousMonth = () => {\r\n    setCurrentDate(new Date(year, month - 1, 1));\r\n  };\r\n\r\n  const nextMonth = () => {\r\n    setCurrentDate(new Date(year, month + 1, 1));\r\n  };\r\n\r\n  if (!calendarConfig || !dateField) {\r\n    return (\r\n      <div className=\"text-center py-12 text-muted-foreground\">\r\n        Please configure the Calendar view by selecting a date field in View Options.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n    \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n  const dayNames = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n\r\n  const days = [];\r\n  for (let i = 0; i < startingDayOfWeek; i++) {\r\n    days.push(<div key={`empty-${i}`} className=\"min-h-32 p-2 border bg-muted/30\" />);\r\n  }\r\n\r\n  for (let day = 1; day <= daysInMonth; day++) {\r\n    const date = new Date(year, month, day);\r\n    const dateKey = date.toDateString();\r\n    const dayRecords = recordsByDate[dateKey] || [];\r\n\r\n    days.push(\r\n      <div key={day} className=\"min-h-32 p-2 border bg-card hover:bg-accent/50 transition-colors\">\r\n        <div className=\"font-medium text-sm mb-2\">{day}</div>\r\n        <div className=\"space-y-1\">\r\n          {dayRecords.slice(0, 3).map(record => {\r\n            const title = getFieldValue(record, titleField.id) || 'Untitled';\r\n            return (\r\n              <div\r\n                key={record.id}\r\n                className=\"text-xs p-1 rounded bg-primary/10 border border-primary/20 cursor-pointer hover:bg-primary/20 transition-colors truncate\"\r\n                onClick={() => onEdit(record)}\r\n                title={title}\r\n              >\r\n                {title}\r\n              </div>\r\n            );\r\n          })}\r\n          {dayRecords.length > 3 && (\r\n            <div className=\"text-xs text-muted-foreground\">\r\n              +{dayRecords.length - 3} more\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-2xl font-bold\">\r\n          {monthNames[month]} {year}\r\n        </h2>\r\n        <div className=\"flex gap-2\">\r\n          <Button variant=\"outline\" size=\"sm\" onClick={previousMonth}>\r\n            <ChevronLeft className=\"h-4 w-4\" />\r\n          </Button>\r\n          <Button variant=\"outline\" size=\"sm\" onClick={nextMonth}>\r\n            <ChevronRight className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-7 gap-0 border rounded-lg overflow-hidden\">\r\n        {dayNames.map(day => (\r\n          <div key={day} className=\"p-2 text-center font-semibold bg-muted border-b\">\r\n            {day}\r\n          </div>\r\n        ))}\r\n        {days}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1766, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/components/entities/views/GanttView.tsx"],"sourcesContent":["import { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Edit, Eye, EyeOff, Trash2 } from \"lucide-react\";\r\nimport { format, differenceInDays, startOfMonth, endOfMonth, eachMonthOfInterval, isWithinInterval, parseISO, addDays } from \"date-fns\";\r\nimport { useMemo, useState, useCallback } from \"react\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { E_FieldDataType } from \"@/components/entities/FieldEditor\";\r\nimport { toast } from \"sonner\";\r\n\r\n\r\n\r\nimport { EntityRecord, EntityField } from \"@/types/entity\";\r\n\r\ninterface GanttConfig {\r\n  startDateField: string;\r\n  endDateField: string;\r\n  titleField: string;\r\n  groupByField?: string;\r\n  colorByField?: string;\r\n  dependenciesField?: string;\r\n  progressField?: string;\r\n}\r\n\r\ninterface GanttViewProps {\r\n  records: EntityRecord[];\r\n  fields: EntityField[];\r\n  ganttConfig?: GanttConfig;\r\n  entityId: string;\r\n  onEdit: (record: EntityRecord) => void;\r\n  onDelete: (record: EntityRecord) => void;\r\n  onTogglePublish: (record: EntityRecord) => void;\r\n}\r\n\r\nconst STATUS_COLORS: Record<string, string> = {\r\n  'planned': 'bg-blue-500',\r\n  'in progress': 'bg-yellow-500',\r\n  'completed': 'bg-green-500',\r\n  'on hold': 'bg-gray-500',\r\n  'cancelled': 'bg-red-500',\r\n};\r\n\r\nconst PRIORITY_COLORS: Record<string, string> = {\r\n  'low': 'bg-blue-400',\r\n  'medium': 'bg-yellow-500',\r\n  'high': 'bg-orange-500',\r\n  'critical': 'bg-red-600',\r\n};\r\n\r\nexport const GanttView = ({\r\n  records,\r\n  fields,\r\n  ganttConfig,\r\n  entityId,\r\n  onEdit,\r\n  onDelete,\r\n  onTogglePublish,\r\n}: GanttViewProps) => {\r\n  const [draggingRecord, setDraggingRecord] = useState<{ id: string; startX: number; initialLeft: number } | null>(null);\r\n  const [dragOffset, setDragOffset] = useState(0);\r\n  const getFieldValue = (record: EntityRecord, fieldId: string) => {\r\n    const field = fields.find(f => f.id === fieldId);\r\n    if (!field) return '';\r\n    return record.data[field.name] || '';\r\n  };\r\n\r\n  const ganttData = useMemo(() => {\r\n    if (!ganttConfig?.startDateField || !ganttConfig?.endDateField || !ganttConfig?.titleField) {\r\n      return null;\r\n    }\r\n\r\n    const validRecords = records.filter(record => {\r\n      const startDate = getFieldValue(record, ganttConfig.startDateField);\r\n      const endDate = getFieldValue(record, ganttConfig.endDateField);\r\n      return startDate && endDate;\r\n    });\r\n\r\n    if (validRecords.length === 0) return null;\r\n\r\n    // Parse dates and find timeline range\r\n    const parsedRecords = validRecords.map(record => {\r\n      const startDate = parseISO(getFieldValue(record, ganttConfig.startDateField));\r\n      const endDate = parseISO(getFieldValue(record, ganttConfig.endDateField));\r\n      return { record, startDate, endDate };\r\n    });\r\n\r\n    const allDates = parsedRecords.flatMap(r => [r.startDate, r.endDate]);\r\n    const minDate = new Date(Math.min(...allDates.map(d => d.getTime())));\r\n    const maxDate = new Date(Math.max(...allDates.map(d => d.getTime())));\r\n\r\n    const months = eachMonthOfInterval({ start: startOfMonth(minDate), end: endOfMonth(maxDate) });\r\n    const totalDays = differenceInDays(endOfMonth(maxDate), startOfMonth(minDate));\r\n\r\n    // Group records if groupByField is specified\r\n    const grouped: Record<string, typeof parsedRecords> = {};\r\n    if (ganttConfig.groupByField) {\r\n      parsedRecords.forEach(item => {\r\n        const groupValue = getFieldValue(item.record, ganttConfig.groupByField!) || 'Ungrouped';\r\n        if (!grouped[groupValue]) grouped[groupValue] = [];\r\n        grouped[groupValue].push(item);\r\n      });\r\n    } else {\r\n      grouped['All Tasks'] = parsedRecords;\r\n    }\r\n\r\n    return {\r\n      grouped,\r\n      months,\r\n      minDate: startOfMonth(minDate),\r\n      maxDate: endOfMonth(maxDate),\r\n      totalDays,\r\n    };\r\n  }, [records, fields, ganttConfig]);\r\n\r\n  if (!ganttConfig?.startDateField || !ganttConfig?.endDateField || !ganttConfig?.titleField) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64 text-muted-foreground\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-lg font-medium\">Gantt view not configured</p>\r\n          <p className=\"text-sm mt-2\">Please configure start date, end date, and title fields in View Options</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!ganttData) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64 text-muted-foreground\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-lg font-medium\">No records with valid dates</p>\r\n          <p className=\"text-sm mt-2\">Add records with both start and end dates to see the Gantt chart</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const getBarColor = (record: EntityRecord) => {\r\n    if (!ganttConfig.colorByField) return 'bg-primary';\r\n\r\n    const colorValue = getFieldValue(record, ganttConfig.colorByField).toLowerCase();\r\n    return STATUS_COLORS[colorValue] || PRIORITY_COLORS[colorValue] || 'bg-primary';\r\n  };\r\n\r\n  const getBarPosition = (startDate: Date, endDate: Date) => {\r\n    const daysFromStart = differenceInDays(startDate, ganttData.minDate);\r\n    const duration = differenceInDays(endDate, startDate) + 1;\r\n    const left = (daysFromStart / ganttData.totalDays) * 100;\r\n    const width = (duration / ganttData.totalDays) * 100;\r\n    return { left: `${left}%`, width: `${width}%` };\r\n  };\r\n\r\n  const handleBarMouseDown = useCallback((e: React.MouseEvent, record: EntityRecord, currentLeft: number) => {\r\n    e.preventDefault();\r\n    setDraggingRecord({ id: record.id, startX: e.clientX, initialLeft: currentLeft });\r\n  }, []);\r\n\r\n  const handleMouseMove = useCallback((e: MouseEvent) => {\r\n    if (!draggingRecord || !ganttData) return;\r\n\r\n    const deltaX = e.clientX - draggingRecord.startX;\r\n    setDragOffset(deltaX);\r\n  }, [draggingRecord, ganttData]);\r\n\r\n  const handleMouseUp = useCallback(async () => {\r\n    if (!draggingRecord || !ganttData || !ganttConfig) {\r\n      setDraggingRecord(null);\r\n      setDragOffset(0);\r\n      return;\r\n    }\r\n\r\n    const record = records.find(r => r.id === draggingRecord.id);\r\n    if (!record) {\r\n      setDraggingRecord(null);\r\n      setDragOffset(0);\r\n      return;\r\n    }\r\n\r\n    // Calculate new dates based on drag offset\r\n    const containerWidth = document.querySelector('.gantt-timeline')?.clientWidth || 1000;\r\n    const pixelsPerDay = containerWidth / ganttData.totalDays;\r\n    const daysMoved = Math.round(dragOffset / pixelsPerDay);\r\n\r\n    if (daysMoved !== 0) {\r\n      const startDateField = fields.find(f => f.id === ganttConfig.startDateField);\r\n      const endDateField = fields.find(f => f.id === ganttConfig.endDateField);\r\n\r\n      if (startDateField && endDateField) {\r\n        const oldStartDate = parseISO(record.data[startDateField.name]);\r\n        const oldEndDate = parseISO(record.data[endDateField.name]);\r\n\r\n        const newStartDate = addDays(oldStartDate, daysMoved);\r\n        const newEndDate = addDays(oldEndDate, daysMoved);\r\n\r\n        // Update the record in the database\r\n        const updatedData = {\r\n          ...record.data,\r\n          [startDateField.name]: format(newStartDate, 'yyyy-MM-dd'),\r\n          [endDateField.name]: format(newEndDate, 'yyyy-MM-dd'),\r\n        };\r\n\r\n        const { error } = await supabase\r\n          .from('entity_records')\r\n          .update({ data: updatedData })\r\n          .eq('id', record.id);\r\n\r\n        if (error) {\r\n          toast.error('Failed to update task dates');\r\n          console.error(error);\r\n        } else {\r\n          toast.success('Task dates updated');\r\n        }\r\n      }\r\n    }\r\n\r\n    setDraggingRecord(null);\r\n    setDragOffset(0);\r\n  }, [draggingRecord, dragOffset, ganttData, ganttConfig, records, fields]);\r\n\r\n  // Attach mouse event listeners\r\n  useState(() => {\r\n    if (draggingRecord) {\r\n      document.addEventListener('mousemove', handleMouseMove);\r\n      document.addEventListener('mouseup', handleMouseUp);\r\n      return () => {\r\n        document.removeEventListener('mousemove', handleMouseMove);\r\n        document.removeEventListener('mouseup', handleMouseUp);\r\n      };\r\n    }\r\n  });\r\n\r\n  const getDependencies = useCallback((record: EntityRecord): string[] => {\r\n    if (!ganttConfig?.dependenciesField) return [];\r\n    const field = fields.find(f => f.id === ganttConfig.dependenciesField);\r\n    if (!field) return [];\r\n\r\n    const deps = record.data[field.name];\r\n    if (!deps) return [];\r\n    if (Array.isArray(deps)) return deps;\r\n    if (typeof deps === 'string') {\r\n      try {\r\n        const parsed = JSON.parse(deps);\r\n        return Array.isArray(parsed) ? parsed : [];\r\n      } catch {\r\n        return deps.split(',').map(d => d.trim()).filter(Boolean);\r\n      }\r\n    }\r\n    return [];\r\n  }, [ganttConfig, fields]);\r\n\r\n  const getProgress = useCallback((record: EntityRecord): number => {\r\n    if (!ganttConfig?.progressField) return 0;\r\n    const field = fields.find(f => f.id === ganttConfig.progressField);\r\n    if (!field) return 0;\r\n\r\n    const progress = record.data[field.name];\r\n    const num = Number(progress);\r\n    return isNaN(num) ? 0 : Math.max(0, Math.min(100, num));\r\n  }, [ganttConfig, fields]);\r\n\r\n  const recordPositions = useMemo(() => {\r\n    if (!ganttData) return new Map();\r\n\r\n    const positions = new Map<string, { top: number; left: number; width: number }>();\r\n    let currentTop = 0;\r\n    const rowHeight = 48; // 32px bar + 16px gap\r\n\r\n    Object.entries(ganttData.grouped).forEach(([groupName, items]) => {\r\n      if (ganttConfig?.groupByField) {\r\n        currentTop += 40; // Group header height\r\n      }\r\n\r\n      items.forEach(({ record, startDate, endDate }) => {\r\n        const position = getBarPosition(startDate, endDate);\r\n        const leftPercent = parseFloat(position.left);\r\n        const widthPercent = parseFloat(position.width);\r\n\r\n        positions.set(record.id, {\r\n          top: currentTop,\r\n          left: leftPercent,\r\n          width: widthPercent,\r\n        });\r\n\r\n        currentTop += rowHeight;\r\n      });\r\n    });\r\n\r\n    return positions;\r\n  }, [ganttData, ganttConfig, getBarPosition]);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"overflow-x-auto border rounded-lg relative\">\r\n        <div className=\"min-w-[800px] gantt-timeline\">{ganttData && ganttConfig?.dependenciesField && (\r\n          <svg\r\n            className=\"absolute inset-0 pointer-events-none z-0\"\r\n            style={{ width: '100%', height: '100%' }}\r\n          >\r\n            {Object.entries(ganttData.grouped).flatMap(([, items]) =>\r\n              items.flatMap(({ record }) => {\r\n                const deps = getDependencies(record);\r\n                const fromPos = recordPositions.get(record.id);\r\n                if (!fromPos || deps.length === 0) return [];\r\n\r\n                return deps.map(depId => {\r\n                  const toPos = recordPositions.get(depId);\r\n                  if (!toPos) return null;\r\n\r\n                  const x1 = fromPos.left + '%';\r\n                  const y1 = fromPos.top + 16;\r\n                  const x2 = toPos.left + toPos.width + '%';\r\n                  const y2 = toPos.top + 16;\r\n\r\n                  return (\r\n                    <g key={`${record.id}-${depId}`}>\r\n                      <defs>\r\n                        <marker\r\n                          id={`arrowhead-${record.id}-${depId}`}\r\n                          markerWidth=\"10\"\r\n                          markerHeight=\"10\"\r\n                          refX=\"9\"\r\n                          refY=\"3\"\r\n                          orient=\"auto\"\r\n                        >\r\n                          <polygon points=\"0 0, 10 3, 0 6\" fill=\"hsl(var(--muted-foreground))\" />\r\n                        </marker>\r\n                      </defs>\r\n                      <line\r\n                        x1={x1}\r\n                        y1={y1}\r\n                        x2={x2}\r\n                        y2={y2}\r\n                        stroke=\"hsl(var(--muted-foreground))\"\r\n                        strokeWidth=\"2\"\r\n                        markerEnd={`url(#arrowhead-${record.id}-${depId})`}\r\n                        strokeDasharray=\"4\"\r\n                      />\r\n                    </g>\r\n                  );\r\n                }).filter(Boolean);\r\n              })\r\n            )}\r\n          </svg>\r\n        )}\r\n          {/* Timeline Header */}\r\n          <div className=\"bg-muted/50 border-b sticky top-0 z-10\">\r\n            <div className=\"flex\">\r\n              <div className=\"w-64 p-3 border-r font-semibold\">Task</div>\r\n              <div className=\"flex-1 flex\">\r\n                {ganttData.months.map((month, idx) => {\r\n                  const monthStart = startOfMonth(month);\r\n                  const monthEnd = endOfMonth(month);\r\n                  const daysInMonth = differenceInDays(monthEnd, monthStart) + 1;\r\n                  const width = (daysInMonth / ganttData.totalDays) * 100;\r\n\r\n                  return (\r\n                    <div\r\n                      key={idx}\r\n                      className=\"border-r px-2 py-3 text-center text-sm font-medium\"\r\n                      style={{ width: `${width}%` }}\r\n                    >\r\n                      {format(month, 'MMM yyyy')}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Gantt Rows */}\r\n          <div className=\"divide-y\">\r\n            {Object.entries(ganttData.grouped).map(([groupName, items]) => (\r\n              <div key={groupName}>\r\n                {ganttConfig.groupByField && (\r\n                  <div className=\"bg-muted/30 px-3 py-2 font-semibold text-sm border-b\">\r\n                    {groupName}\r\n                  </div>\r\n                )}\r\n                {items.map(({ record, startDate, endDate }) => {\r\n                  const title = getFieldValue(record, ganttConfig.titleField);\r\n                  let position = getBarPosition(startDate, endDate);\r\n                  const barColor = getBarColor(record);\r\n                  const progress = getProgress(record);\r\n\r\n                  // Apply drag offset if this record is being dragged\r\n                  if (draggingRecord?.id === record.id && ganttData) {\r\n                    const containerWidth = 1000; // approximate\r\n                    const pixelsPerDay = containerWidth / ganttData.totalDays;\r\n                    const daysMoved = dragOffset / pixelsPerDay;\r\n                    const percentMoved = (daysMoved / ganttData.totalDays) * 100;\r\n\r\n                    const currentLeft = parseFloat(position.left);\r\n                    position = {\r\n                      ...position,\r\n                      left: `${currentLeft + percentMoved}%`\r\n                    };\r\n                  }\r\n\r\n                  return (\r\n                    <div key={record.id} className=\"flex hover:bg-muted/30 transition-colors group\">\r\n                      <div className=\"w-64 p-3 border-r flex items-center justify-between\">\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"font-medium truncate\">{title}</div>\r\n                          <Badge\r\n                            variant={record.is_published ? \"default\" : \"secondary\"}\r\n                            className=\"mt-1 text-xs\"\r\n                          >\r\n                            {record.is_published ? \"Published\" : \"Draft\"}\r\n                          </Badge>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex-1 relative p-3 z-10\">\r\n                        {/* Timeline grid lines */}\r\n                        <div className=\"absolute inset-0 flex\">\r\n                          {ganttData.months.map((month, idx) => {\r\n                            const monthStart = startOfMonth(month);\r\n                            const monthEnd = endOfMonth(month);\r\n                            const daysInMonth = differenceInDays(monthEnd, monthStart) + 1;\r\n                            const width = (daysInMonth / ganttData.totalDays) * 100;\r\n\r\n                            return (\r\n                              <div\r\n                                key={idx}\r\n                                className=\"border-r border-border/30\"\r\n                                style={{ width: `${width}%` }}\r\n                              />\r\n                            );\r\n                          })}\r\n                        </div>\r\n\r\n                        {/* Gantt Bar */}\r\n                        <div\r\n                          className=\"absolute top-1/2 -translate-y-1/2 h-8 cursor-move select-none\"\r\n                          style={position}\r\n                          onMouseDown={(e) => handleBarMouseDown(e, record, parseFloat(position.left))}\r\n                        >\r\n                          <div\r\n                            className={`h-full rounded-md ${barColor} border-2 border-background shadow-sm hover:shadow-md transition-shadow relative flex items-center px-2 text-white text-xs font-medium overflow-hidden`}\r\n                            title={`${title}\\n${format(startDate, 'MMM d')} - ${format(endDate, 'MMM d, yyyy')}${progress > 0 ? `\\n${progress}% complete` : ''}`}\r\n                          >\r\n                            {/* Progress indicator */}\r\n                            {progress > 0 && (\r\n                              <div\r\n                                className=\"absolute inset-0 bg-white/30 rounded-l-md transition-all\"\r\n                                style={{ width: `${progress}%` }}\r\n                              />\r\n                            )}\r\n                            <span className=\"truncate relative z-10\">{title}</span>\r\n                            {progress > 0 && (\r\n                              <span className=\"ml-auto relative z-10 text-[10px] font-bold\">{progress}%</span>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Action Buttons */}\r\n                        <div className=\"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1 bg-background/95 p-1 rounded-md shadow-lg border\">\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            onClick={() => onEdit(record)}\r\n                            className=\"h-7 px-2\"\r\n                          >\r\n                            <Edit className=\"h-3 w-3\" />\r\n                          </Button>\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            onClick={() => onTogglePublish(record)}\r\n                            className=\"h-7 px-2\"\r\n                          >\r\n                            {record.is_published ? (\r\n                              <EyeOff className=\"h-3 w-3\" />\r\n                            ) : (\r\n                              <Eye className=\"h-3 w-3\" />\r\n                            )}\r\n                          </Button>\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            onClick={() => onDelete(record)}\r\n                            className=\"h-7 px-2 text-destructive hover:text-destructive\"\r\n                          >\r\n                            <Trash2 className=\"h-3 w-3\" />\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2521, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/components/entities/CardLayoutEditor.tsx"],"sourcesContent":["import { Label } from \"@/components/ui/label\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Checkbox } from \"@/components/ui/checkbox\";\r\nimport { GripVertical } from \"lucide-react\";\r\nimport { E_FieldDataType } from \"./FieldEditor\";\r\n\r\ntype FieldType = 'text' | 'number' | 'boolean' | 'date' | 'longtext' | 'image' | 'url';\r\n\r\nimport { EntityField } from \"@/types/entity\";\r\n\r\ninterface CardLayout {\r\n  titleField: string;\r\n  subtitleField?: string;\r\n  imageField?: string;\r\n  displayFields: Array<{ fieldId: string; position: number }>;\r\n}\r\n\r\ninterface CardLayoutEditorProps {\r\n  fields: EntityField[];\r\n  layout: CardLayout;\r\n  onChange: (layout: CardLayout) => void;\r\n  showImageField?: boolean;\r\n}\r\n\r\nexport const CardLayoutEditor = ({ fields, layout, onChange, showImageField = true }: CardLayoutEditorProps) => {\r\n  const handleFieldToggle = (fieldId: string, checked: boolean) => {\r\n    const newDisplayFields = checked\r\n      ? [...layout.displayFields, { fieldId, position: layout.displayFields.length }]\r\n      : layout.displayFields.filter(f => f.fieldId !== fieldId);\r\n\r\n    onChange({ ...layout, displayFields: newDisplayFields });\r\n  };\r\n\r\n  const imageFields = fields.filter(f => f.field_type === E_FieldDataType.Image);\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div>\r\n        <Label className=\"text-sm font-medium\">Title Field *</Label>\r\n        <Select value={layout.titleField} onValueChange={(value) => onChange({ ...layout, titleField: value })}>\r\n          <SelectTrigger className=\"mt-1\">\r\n            <SelectValue placeholder=\"Select title field\" />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            {fields.map(field => (\r\n              <SelectItem key={field.name} value={field.name}>\r\n                {field.display_name}\r\n              </SelectItem>\r\n            ))}\r\n          </SelectContent>\r\n        </Select>\r\n      </div>\r\n\r\n      <div>\r\n        <Label className=\"text-sm font-medium\">Subtitle Field (Optional)</Label>\r\n        <Select value={layout.subtitleField || \"none\"} onValueChange={(value) => onChange({ ...layout, subtitleField: value === \"none\" ? undefined : value })}>\r\n          <SelectTrigger className=\"mt-1\">\r\n            <SelectValue placeholder=\"Select subtitle field\" />\r\n          </SelectTrigger>\r\n          <SelectContent>\r\n            <SelectItem value=\"none\">None</SelectItem>\r\n            {fields.map(field => (\r\n              <SelectItem key={field.name} value={field.name}>\r\n                {field.display_name}\r\n              </SelectItem>\r\n            ))}\r\n          </SelectContent>\r\n        </Select>\r\n      </div>\r\n\r\n      {showImageField && imageFields.length > 0 && (\r\n        <div>\r\n          <Label className=\"text-sm font-medium\">Image Field (Optional)</Label>\r\n          <Select value={layout.imageField || \"none\"} onValueChange={(value) => onChange({ ...layout, imageField: value === \"none\" ? undefined : value })}>\r\n            <SelectTrigger className=\"mt-1\">\r\n              <SelectValue placeholder=\"Select image field\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              <SelectItem value=\"none\">None</SelectItem>\r\n              {imageFields.map(field => (\r\n                <SelectItem key={field.name} value={field.name}>\r\n                  {field.display_name}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n      )}\r\n\r\n      <div>\r\n        <Label className=\"text-sm font-medium mb-2 block\">Additional Fields to Display</Label>\r\n        <div className=\"space-y-2 max-h-64 overflow-y-auto\">\r\n          {fields.map(field => {\r\n            const isSelected = layout.displayFields.some(df => df.fieldId === field.name);\r\n            const isTitle = field.name === layout.titleField;\r\n            const isSubtitle = field.name === layout.subtitleField;\r\n            const isImage = field.name === layout.imageField;\r\n            const isReserved = isTitle || isSubtitle || isImage;\r\n\r\n            return (\r\n              <div key={field.name} className=\"flex items-center space-x-2\">\r\n                <GripVertical className=\"h-4 w-4 text-muted-foreground\" />\r\n                <Checkbox\r\n                  id={`display-${field.name}`}\r\n                  checked={isSelected}\r\n                  disabled={isReserved}\r\n                  onCheckedChange={(checked) => handleFieldToggle(field.name, checked as boolean)}\r\n                />\r\n                <Label\r\n                  htmlFor={`display-${field.name}`}\r\n                  className={`font-normal cursor-pointer flex-1 ${isReserved ? 'text-muted-foreground' : ''}`}\r\n                >\r\n                  {field.display_name}\r\n                  {isReserved && (\r\n                    <span className=\"text-xs ml-2\">\r\n                      (Used as {isTitle ? 'title' : isSubtitle ? 'subtitle' : 'image'})\r\n                    </span>\r\n                  )}\r\n                </Label>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}}]
}