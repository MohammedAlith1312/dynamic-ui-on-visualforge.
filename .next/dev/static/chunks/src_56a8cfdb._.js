(globalThis.TURBOPACK || (globalThis.TURBOPACK = [])).push([typeof document === "object" ? document.currentScript : undefined,
"[project]/src/integrations/supabase/client.ts [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "supabase",
    ()=>supabase
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$build$2f$polyfills$2f$process$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = /*#__PURE__*/ __turbopack_context__.i("[project]/node_modules/next/dist/build/polyfills/process.js [app-client] (ecmascript)");
// This file is automatically generated. Do not edit it directly.
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$supabase$2f$supabase$2d$js$2f$dist$2f$module$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@supabase/supabase-js/dist/module/index.js [app-client] (ecmascript) <locals>");
;
const SUPABASE_URL = ("TURBOPACK compile-time value", "https://oyizftuloqjtmjlojbul.supabase.co") || '';
const SUPABASE_PUBLISHABLE_KEY = ("TURBOPACK compile-time value", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im95aXpmdHVsb3FqdG1qbG9qYnVsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk0ODcxOTksImV4cCI6MjA4NTA2MzE5OX0.mdnL4kWI4izaHkSk3dj0A4BzptnAiGbADNmCTPZXM04") || '';
// SSR-safe storage check
const isBrowser = ("TURBOPACK compile-time value", "object") !== 'undefined';
const supabase = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$supabase$2f$supabase$2d$js$2f$dist$2f$module$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["createClient"])(SUPABASE_URL, SUPABASE_PUBLISHABLE_KEY, {
    auth: {
        storage: ("TURBOPACK compile-time truthy", 1) ? window.localStorage : "TURBOPACK unreachable",
        persistSession: true,
        autoRefreshToken: true
    }
});
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/src/hooks/use-mobile.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "useIsMobile",
    ()=>useIsMobile
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var _s = __turbopack_context__.k.signature();
;
const MOBILE_BREAKPOINT = 768;
function useIsMobile() {
    _s();
    const [isMobile, setIsMobile] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"](undefined);
    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"]({
        "useIsMobile.useEffect": ()=>{
            const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`);
            const onChange = {
                "useIsMobile.useEffect.onChange": ()=>{
                    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);
                }
            }["useIsMobile.useEffect.onChange"];
            mql.addEventListener("change", onChange);
            setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);
            return ({
                "useIsMobile.useEffect": ()=>mql.removeEventListener("change", onChange)
            })["useIsMobile.useEffect"];
        }
    }["useIsMobile.useEffect"], []);
    return !!isMobile;
}
_s(useIsMobile, "D6B2cPXNCaIbeOx+abFr1uxLRM0=");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/src/hooks/useHistory.ts [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "useHistory",
    ()=>useHistory
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var _s = __turbopack_context__.k.signature();
;
const useHistory = ()=>{
    _s();
    const [history, setHistory] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [currentIndex, setCurrentIndex] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(-1);
    const execute = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useHistory.useCallback[execute]": (command)=>{
            const newCommand = {
                ...command,
                timestamp: Date.now()
            };
            // Execute the command
            newCommand.execute();
            // Clear any forward history
            const newHistory = history.slice(0, currentIndex + 1);
            newHistory.push(newCommand);
            // Limit history to 50 commands
            if (newHistory.length > 50) {
                newHistory.shift();
                setCurrentIndex(49);
            } else {
                setCurrentIndex(newHistory.length - 1);
            }
            setHistory(newHistory);
        }
    }["useHistory.useCallback[execute]"], [
        history,
        currentIndex
    ]);
    const undo = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useHistory.useCallback[undo]": ()=>{
            if (currentIndex < 0) return;
            const command = history[currentIndex];
            command.undo();
            setCurrentIndex(currentIndex - 1);
        }
    }["useHistory.useCallback[undo]"], [
        history,
        currentIndex
    ]);
    const redo = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useHistory.useCallback[redo]": ()=>{
            if (currentIndex >= history.length - 1) return;
            const nextIndex = currentIndex + 1;
            const command = history[nextIndex];
            command.execute();
            setCurrentIndex(nextIndex);
        }
    }["useHistory.useCallback[redo]"], [
        history,
        currentIndex
    ]);
    const canUndo = currentIndex >= 0;
    const canRedo = currentIndex < history.length - 1;
    const clear = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useCallback"])({
        "useHistory.useCallback[clear]": ()=>{
            setHistory([]);
            setCurrentIndex(-1);
        }
    }["useHistory.useCallback[clear]"], []);
    return {
        execute,
        undo,
        redo,
        canUndo,
        canRedo,
        clear
    };
};
_s(useHistory, "LbX52Y+XcJDSk+ljdsJFfYJZLl4=");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/src/hooks/useKeyboardShortcuts.ts [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "useKeyboardShortcuts",
    ()=>useKeyboardShortcuts
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var _s = __turbopack_context__.k.signature();
;
const useKeyboardShortcuts = (handlers)=>{
    _s();
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "useKeyboardShortcuts.useEffect": ()=>{
            const handleKeyDown = {
                "useKeyboardShortcuts.useEffect.handleKeyDown": (e)=>{
                    const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;
                    const cmdOrCtrl = isMac ? e.metaKey : e.ctrlKey;
                    // Prevent default for our shortcuts
                    const shouldPreventDefault = cmdOrCtrl && (e.key === 'z' || e.key === 'y' || e.key === 'd' || e.key === 'c' || e.key === 'v' || e.key === 's');
                    if (shouldPreventDefault) {
                        e.preventDefault();
                    }
                    // Undo: Cmd+Z / Ctrl+Z
                    if (cmdOrCtrl && e.key === 'z' && !e.shiftKey && handlers.onUndo) {
                        handlers.onUndo();
                        return;
                    }
                    // Redo: Cmd+Shift+Z / Ctrl+Y
                    if (cmdOrCtrl && e.key === 'z' && e.shiftKey || cmdOrCtrl && e.key === 'y') {
                        if (handlers.onRedo) {
                            handlers.onRedo();
                        }
                        return;
                    }
                    // Delete: Backspace or Delete
                    if ((e.key === 'Backspace' || e.key === 'Delete') && !isInputElement(e.target)) {
                        if (handlers.onDelete) {
                            e.preventDefault();
                            handlers.onDelete();
                        }
                        return;
                    }
                    // Duplicate: Cmd+D / Ctrl+D
                    if (cmdOrCtrl && e.key === 'd' && handlers.onDuplicate) {
                        handlers.onDuplicate();
                        return;
                    }
                    // Copy: Cmd+C / Ctrl+C
                    if (cmdOrCtrl && e.key === 'c' && !isInputElement(e.target) && handlers.onCopy) {
                        handlers.onCopy();
                        return;
                    }
                    // Paste: Cmd+V / Ctrl+V
                    if (cmdOrCtrl && e.key === 'v' && !isInputElement(e.target) && handlers.onPaste) {
                        handlers.onPaste();
                        return;
                    }
                    // Save: Cmd+S / Ctrl+S
                    if (cmdOrCtrl && e.key === 's' && handlers.onSave) {
                        handlers.onSave();
                        return;
                    }
                }
            }["useKeyboardShortcuts.useEffect.handleKeyDown"];
            window.addEventListener('keydown', handleKeyDown);
            return ({
                "useKeyboardShortcuts.useEffect": ()=>window.removeEventListener('keydown', handleKeyDown)
            })["useKeyboardShortcuts.useEffect"];
        }
    }["useKeyboardShortcuts.useEffect"], [
        handlers
    ]);
};
_s(useKeyboardShortcuts, "OD7bBpZva5O2jO+Puf00hKivP7c=");
// Helper to check if target is an input element
const isInputElement = (target)=>{
    if (!target) return false;
    const element = target;
    return element.tagName === 'INPUT' || element.tagName === 'TEXTAREA' || element.isContentEditable;
};
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/src/lib/schema-service.ts [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "AUTH_TOKEN",
    ()=>AUTH_TOKEN,
    "createEntity",
    ()=>createEntity,
    "deleteEntity",
    ()=>deleteEntity,
    "getEntities",
    ()=>getEntities,
    "getEntity",
    ()=>getEntity,
    "getFields",
    ()=>getFields,
    "saveFields",
    ()=>saveFields,
    "setAuthToken",
    ()=>setAuthToken,
    "updateEntity",
    ()=>updateEntity
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/integrations/supabase/client.ts [app-client] (ecmascript)");
;
// Remote API base for testing
const REMOTE_API_BASE = "https://apps4x-framework.azurewebsites.net/api/v1";
// Default DataAreaId for testing
const DEFAULT_DATA_AREA = "LGE0000001";
let AUTH_TOKEN = "eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySWQiOiJhLmh5ZGVyIiwiTmFtZSI6Ikh5ZGVyIEFsaSIsIkVtYWlsIjoiaHlkZXJAZmFhenRlY2hzb2x1dGlvbnMuY29tIiwiTW9iaWxlTnVtYmVyIjoiMDk4NzY1NDMyMSIsIkNvbXBhbnlJZCI6IkxHRTAwMDAwMDEiLCJleHAiOjE3NjcwNzIyMTYsImlzcyI6ImFwcHM0eC5jb20iLCJhdWQiOiJhcHBzNHguY29tIn0.b5jc5d6zpx5_mY_fYH3oQS7_4RxMXYZyYNFTUf4Zk8Y";
const setAuthToken = (token)=>{
    AUTH_TOKEN = token;
};
const APP_ID = "Studio";
const USER_ID = "a.hyder";
const CLIENT_PAGE = "/LGE0000001/Studio/a530d8d753214ac7beaf6207aacbbd4c";
// Helper to get authenticated headers
const getHeaders = (extraHeaders = {})=>({
        "Accept": "application/json, text/plain, */*",
        "Authorization": `Bearer ${AUTH_TOKEN}`,
        "appid": APP_ID,
        "companyid": DEFAULT_DATA_AREA,
        "user-id": USER_ID,
        "X-Client-Page": CLIENT_PAGE,
        ...extraHeaders
    });
const fetchWithAuth = async (url, options = {})=>{
    try {
        const res = await fetch(url, options);
        if (res.status === 401) {
            console.error("Unauthorized access (401), signing out...");
            await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].auth.signOut();
            window.location.href = "/auth";
            throw new Error("Unauthorized");
        }
        return res;
    } catch (error) {
        throw error;
    }
};
// Helper to convert internal format to UI format
const mapEntity = (mo)=>{
    try {
        const data = JSON.parse(mo.Data);
        return {
            id: mo.Id,
            name: data.TableName,
            display_name: data.Name,
            description: data.Description,
            is_published: mo.Status === "Published",
            dataAreaId: mo.DataAreaId,
            recId: mo.RecId,
            collectionId: data.CollectionId
        };
    } catch (e) {
        console.error("Error parsing entity data:", mo);
        return {
            id: mo.Id,
            name: mo.Name,
            display_name: mo.Name,
            description: "",
            is_published: mo.Status === "Published",
            dataAreaId: mo.DataAreaId,
            recId: mo.RecId,
            collectionId: ""
        };
    }
};
const getEntities = async ()=>{
    try {
        const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}?type=Entity`, {
            headers: getHeaders()
        });
        const data = await res.json();
        // API might return a single object or an array
        const metaobjects = Array.isArray(data.Data) ? data.Data : [
            data.Data
        ];
        const filterentity = metaobjects.filter((mo)=>(mo.RecId ?? 0) >= 709);
        return filterentity.map(mapEntity);
    } catch (error) {
        console.error("Error fetching entities:", error);
        return [];
    }
};
const getEntity = async (id)=>{
    try {
        // If id is numeric, it's likely a RecId, otherwise use as is
        // const targetId = id === '9ca55aad170e45b9835adf7e5983161a' ? '709' : id;
        let entity = id.replace(/-/g, "");
        const query = `byobjectId?objectId=${entity}`;
        const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}/${query}`, {
            headers: getHeaders()
        });
        const mo = await res.json();
        return mapEntity(mo);
    } catch (error) {
        console.error(`Error fetching entity ${id}:`, error);
        return null;
    }
};
const getFields = async (entityId)=>{
    try {
        let entity = entityId.replace(/-/g, "");
        const query = `byobjectId?objectId=${entity}`;
        const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}/${query}`, {
            headers: getHeaders()
        });
        const mo = await res.json();
        if (!mo) return [];
        const entityData = JSON.parse(mo.Data);
        return (entityData.Fields || []).map((f)=>({
                id: f.Id,
                entity_id: entityId,
                name: f.Name,
                display_name: f.Label,
                field_type: f.DataType,
                is_required: f.IsRequired,
                default_value: f.DefaultValue,
                position: f.Position
            }));
    } catch (error) {
        console.error(`Error fetching fields for entity ${entityId}:`, error);
        return [];
    }
};
const createEntity = async (entity)=>{
    try {
        const parentId = "a530d8d753214ac7beaf6207aacbbd4c";
        const appId = "a530d8d753214ac7beaf6207aacbbd4c";
        const connectorId = "eb6e7a03f0ed4e09b259fc2abf4507e2";
        const dataObj = {
            Name: entity.name,
            TableName: entity.name,
            Description: entity.description || entity.display_name,
            Image: null,
            TypeName: entity.name,
            CollectionType: "Single",
            ConnectorId: connectorId,
            Fields: null,
            IsWorkFlow: null,
            AppId: appId
        };
        const payload = {
            Type: "Collection",
            Data: JSON.stringify(dataObj),
            Name: entity.name,
            ParentId: parentId,
            ParentType: "Apps",
            AppId: appId
        };
        const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}/create`, {
            method: 'POST',
            headers: getHeaders({
                'Content-Type': 'application/json'
            }),
            body: JSON.stringify(payload)
        });
        return {
            sucess: true,
            res: await res.json()
        };
    } catch (error) {
        console.error("Error creating entity:", error);
        return {
            success: false,
            error: "Failed to create entity"
        };
    }
};
const updateEntity = async (id, updates)=>{
    try {
        const targetId = id === '9ca55aad170e45b9835adf7e5983161a' ? '709' : id;
        const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}/${targetId}`, {
            method: 'PUT',
            headers: getHeaders({
                'Content-Type': 'application/json'
            }),
            body: JSON.stringify(updates)
        });
        return {
            sucess: true,
            res: await res.json()
        };
    } catch (error) {
        console.error(`Error updating entity ${id}:`, error);
        return {
            success: false,
            error: "Failed to update entity"
        };
    }
};
const deleteEntity = async (id)=>{
    try {
        const targetId = id === '9ca55aad170e45b9835adf7e5983161a' ? '709' : id;
        const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}/${targetId}`, {
            method: 'DELETE',
            headers: getHeaders()
        });
        return await res.json();
    } catch (error) {
        console.error(`Error deleting entity ${id}:`, error);
        return {
            success: false,
            error: "Failed to delete entity"
        };
    }
};
const saveFields = async (entityId, fields, entity)=>{
    try {
        const collectionId = entity?.collectionId || "6e8ef8e548704cfb90a01c1f597fb264";
        const remoteId = entity?.recId || (entityId === '9ca55aad170e45b9835adf7e5983161a' ? '709' : entityId);
        // Fetch existing fields to identify new ones vs updates
        const existingFields = await getFields(entityId);
        const existingMap = new Map(existingFields.map((f)=>[
                f.id,
                f
            ]));
        const existingNames = new Set(existingFields.map((f)=>(f.name || "").toLowerCase()));
        const toCreate = [];
        const toUpdate = [];
        for (const f of fields){
            if (f.id && existingMap.has(f.id)) {
                // Check for changes
                const existing = existingMap.get(f.id);
                if (existing) {
                    const hasChanges = existing.name !== f.name || existing.display_name !== f.display_name || existing.field_type !== f.field_type || existing.is_required !== f.is_required || existing.default_value !== f.default_value || existing.position !== f.position;
                    if (hasChanges) {
                        toUpdate.push(f);
                    }
                }
            } else {
                // New field: Check name to prevent duplicates if ID is missing/temp
                const fieldName = (f.name || f.Name || "").toLowerCase();
                if (!existingNames.has(fieldName)) {
                    toCreate.push(f);
                }
            }
        }
        const toDelete = existingFields.filter((ef)=>!fields.some((f)=>f.name === ef.name));
        const results = {
            success: true,
            creates: null,
            updates: null,
            deletes: null
        };
        // Handle Updates
        if (toUpdate.length > 0) {
            const updatePayload = toUpdate.map((f)=>({
                    Id: f.id,
                    Label: f.display_name || f.Label,
                    Name: f.name || f.Name,
                    DataType: f.field_type || f.DataType || "String",
                    IsRequired: f.is_required,
                    DefaultValue: f.default_value,
                    Position: f.position,
                    EntityId: entity?.id || entityId,
                    CollectionId: collectionId
                }));
            const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}/${remoteId}/fields/update`, {
                method: 'PUT',
                headers: getHeaders({
                    'Content-Type': 'application/json'
                }),
                body: JSON.stringify(updatePayload)
            });
            results.updates = await res.json();
        }
        // Handle Creates
        if (toCreate.length > 0) {
            // Filter out potential duplicates by name if we want to be extra safe, trying to respect implicit logic
            // But typically we trust the list provided.
            const createPayload = toCreate.map((f)=>({
                    Label: f.display_name || f.Label,
                    Name: f.name || f.Name,
                    DataType: f.field_type || f.DataType || "String",
                    IsRequired: f.is_required,
                    DefaultValue: f.default_value,
                    Position: f.position,
                    EntityId: entity?.id || entityId,
                    CollectionId: collectionId
                }));
            const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}/${remoteId}/fields/create`, {
                method: 'POST',
                headers: getHeaders({
                    'Content-Type': 'application/json'
                }),
                body: JSON.stringify(createPayload)
            });
            results.creates = await res.json();
        }
        // Handle Deletes
        if (toDelete.length > 0) {
            const deletePayload = toDelete.map((f)=>f.name);
            const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}/${remoteId}/fields/delete`, {
                method: 'DELETE',
                headers: getHeaders({
                    'Content-Type': 'application/json'
                }),
                body: JSON.stringify(deletePayload)
            });
            results.deletes = await res.json();
        }
        return {
            success: true,
            details: results
        };
    } catch (error) {
        console.error(`Error saving fields for entity ${entityId}:`, error);
        return {
            success: false,
            error: "Failed to save fields"
        };
    }
};
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/src/lib/static-generator.ts [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "generateStaticHtml",
    ()=>generateStaticHtml
]);
const generateStaticHtml = (page, rows, components)=>{
    const title = page.title || "Untitled Page";
    // Sort rows and components
    const sortedRows = [
        ...rows
    ].sort((a, b)=>a.position - b.position);
    const generateComponentHtml = (component)=>{
        const { component_type, content, styles } = component;
        const styleObj = styles || {};
        let htmlContent = "";
        // Parse content if it's wrapped
        let parsedContent = content;
        if (parsedContent && typeof parsedContent === 'object' && 'content' in parsedContent && Object.keys(parsedContent).length === 1) {
            parsedContent = parsedContent.content;
        }
        switch(component_type){
            case "heading":
                const level = parsedContent.level || "h2";
                const text = parsedContent.text || "";
                const headingClasses = {
                    h1: "text-4xl font-bold mb-4",
                    h2: "text-3xl font-bold mb-3",
                    h3: "text-2xl font-semibold mb-2",
                    h4: "text-xl font-semibold mb-2",
                    h5: "text-lg font-medium mb-1",
                    h6: "text-base font-medium mb-1"
                };
                const hClass = headingClasses[level] || headingClasses.h2;
                htmlContent = `<${level} class="${hClass}">${text}</${level}>`;
                break;
            case "paragraph":
                htmlContent = `<p class="text-base leading-relaxed whitespace-pre-wrap mb-4">${parsedContent.text || ""}</p>`;
                break;
            case "image":
                if (parsedContent.url) {
                    htmlContent = `<img src="${parsedContent.url}" alt="${parsedContent.alt || ''}" class="w-full h-auto rounded-lg shadow-md mb-4" />`;
                }
                break;
            case "button":
                htmlContent = `
          <div class="mb-4">
            <a href="${parsedContent.link || '#'}" class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2">
              ${parsedContent.text || "Click me"}
            </a>
          </div>`;
                break;
            case "link":
                htmlContent = `<a href="${parsedContent.url || '#'}" class="text-primary hover:underline mb-4 inline-block">${parsedContent.text || "Link"}</a>`;
                break;
            case "divider":
                htmlContent = `<hr class="my-6 border-gray-200" />`;
                break;
            case "spacer":
                const heights = {
                    small: "h-5",
                    medium: "h-10",
                    large: "h-20"
                };
                const h = heights[parsedContent.height] || heights.medium;
                htmlContent = `<div class="${h}"></div>`;
                break;
            case "quote":
                htmlContent = `
          <blockquote class="border-l-4 border-gray-300 pl-4 py-2 italic mb-4">
            <p class="text-lg text-gray-700">${parsedContent.text || ""}</p>
            ${parsedContent.author ? `<footer class="mt-2 text-sm text-gray-500">â€” ${parsedContent.author}</footer>` : ''}
          </blockquote>`;
                break;
            case "list":
                const items = (parsedContent.items || "").split("\n").filter((i)=>i.trim());
                const tag = parsedContent.type === "numbered" ? "ol" : "ul";
                const listClass = parsedContent.type === "numbered" ? "list-decimal" : "list-disc";
                htmlContent = `
          <${tag} class="${listClass} list-inside space-y-1 mb-4 pl-4">
            ${items.map((item)=>`<li>${item}</li>`).join('')}
          </${tag}>`;
                break;
            case "code":
                htmlContent = `
          <div class="relative mb-4 bg-gray-100 p-4 rounded-lg overflow-x-auto">
            ${parsedContent.language ? `<div class="absolute top-2 right-2 text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded">${parsedContent.language}</div>` : ''}
            <pre><code class="text-sm font-mono">${parsedContent.code || ""}</code></pre>
          </div>`;
                break;
            case "card":
                htmlContent = `
          <div class="rounded-lg border bg-card text-card-foreground shadow-sm mb-4 overflow-hidden">
             ${parsedContent.imageUrl ? `<img src="${parsedContent.imageUrl}" class="w-full h-48 object-cover" alt="${parsedContent.title || ''}" />` : ''}
            <div class="p-6">
              <h3 class="text-2xl font-semibold leading-none tracking-tight mb-2">${parsedContent.title || 'Card Title'}</h3>
              <p class="text-sm text-muted-foreground mb-4">${parsedContent.description || ''}</p>
              ${parsedContent.buttonText ? `
                <a href="${parsedContent.buttonLink || '#'}" class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 bg-secondary text-secondary-foreground hover:bg-secondary/80 h-9 px-3">
                  ${parsedContent.buttonText}
                </a>
              ` : ''}
            </div>
          </div>`;
                break;
            // Complex components placeholders
            case "entity-list":
            case "entity-detail":
            case "query":
            case "datasource":
            case "chart":
                htmlContent = `
          <div class="p-4 border border-dashed border-gray-300 rounded-lg bg-gray-50 mb-4 text-center">
            <p class="text-sm text-gray-500">Dynamic Content (${component_type}) - Not available in static export</p>
          </div>`;
                break;
            default:
                htmlContent = `<!-- Unsupported component: ${component_type} -->`;
        }
        return htmlContent;
    };
    const generateRowHtml = (row)=>{
        const rowComponents = components.filter((c)=>c.row_id === row.id).sort((a, b)=>a.position - b.position);
        // Create columns
        let columnsHtml = "";
        for(let i = 0; i < row.columns; i++){
            const colComponents = rowComponents.filter((c)=>c.column_index === i);
            const colContent = colComponents.map(generateComponentHtml).join("\n");
            columnsHtml += `
        <div class="flex flex-col gap-4">
          ${colContent}
        </div>
      `;
        }
        // Grid Setup
        // Using simple CSS grid for columns
        return `
      <div class="grid grid-cols-1 md:grid-cols-${row.columns} gap-6 mb-8 w-full max-w-7xl mx-auto px-4">
        ${columnsHtml}
      </div>
    `;
    };
    const bodyContent = sortedRows.map(generateRowHtml).join("\n");
    return `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${title}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              border: "hsl(var(--border))",
              input: "hsl(var(--input))",
              ring: "hsl(var(--ring))",
              background: "hsl(var(--background))",
              foreground: "hsl(var(--foreground))",
              primary: {
                DEFAULT: "hsl(var(--primary))",
                foreground: "hsl(var(--primary-foreground))",
              },
              secondary: {
                DEFAULT: "hsl(var(--secondary))",
                foreground: "hsl(var(--secondary-foreground))",
              },
              destructive: {
                DEFAULT: "hsl(var(--destructive))",
                foreground: "hsl(var(--destructive-foreground))",
              },
              muted: {
                DEFAULT: "hsl(var(--muted))",
                foreground: "hsl(var(--muted-foreground))",
              },
              accent: {
                DEFAULT: "hsl(var(--accent))",
                foreground: "hsl(var(--accent-foreground))",
              },
              popover: {
                DEFAULT: "hsl(var(--popover))",
                foreground: "hsl(var(--popover-foreground))",
              },
              card: {
                DEFAULT: "hsl(var(--card))",
                foreground: "hsl(var(--card-foreground))",
              },
            },
          },
        },
      }
    </script>
    <style>
      :root {
        --background: 0 0% 100%;
        --foreground: 222.2 84% 4.9%;
        --card: 0 0% 100%;
        --card-foreground: 222.2 84% 4.9%;
        --popover: 0 0% 100%;
        --popover-foreground: 222.2 84% 4.9%;
        --primary: 222.2 47.4% 11.2%;
        --primary-foreground: 210 40% 98%;
        --secondary: 210 40% 96.1%;
        --secondary-foreground: 222.2 47.4% 11.2%;
        --muted: 210 40% 96.1%;
        --muted-foreground: 215.4 16.3% 46.9%;
        --accent: 210 40% 96.1%;
        --accent-foreground: 222.2 47.4% 11.2%;
        --destructive: 0 84.2% 60.2%;
        --destructive-foreground: 210 40% 98%;
        --border: 214.3 31.8% 91.4%;
        --input: 214.3 31.8% 91.4%;
        --ring: 222.2 84% 4.9%;
        --radius: 0.5rem;
      }
      body {
        font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        color: hsl(var(--foreground));
        background-color: hsl(var(--background));
      }
    </style>
</head>
<body class="min-h-screen bg-background text-foreground py-10">
    <main>
        ${bodyContent}
    </main>
</body>
</html>`;
};
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
"[project]/src/views/PageEditor.tsx [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/navigation.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/integrations/supabase/client.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$contexts$2f$ClipboardContext$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/contexts/ClipboardContext.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/ui/button.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/ui/select.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$label$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/ui/label.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/sonner/dist/index.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$arrow$2d$left$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ArrowLeft$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/arrow-left.js [app-client] (ecmascript) <export default as ArrowLeft>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$eye$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Eye$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/eye.js [app-client] (ecmascript) <export default as Eye>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$eye$2d$off$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__EyeOff$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/eye-off.js [app-client] (ecmascript) <export default as EyeOff>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$monitor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Monitor$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/monitor.js [app-client] (ecmascript) <export default as Monitor>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$undo$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Undo$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/undo.js [app-client] (ecmascript) <export default as Undo>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$redo$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Redo$3e$__ = __turbopack_context__.i("[project]/node_modules/lucide-react/dist/esm/icons/redo.js [app-client] (ecmascript) <export default as Redo>");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$editor$2f$SidebarToggle$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/editor/SidebarToggle.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$editor$2f$PagePreviewModal$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/editor/PagePreviewModal.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$editor$2f$GridCanvas$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/editor/GridCanvas.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$sidebar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/ui/sidebar.tsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$dnd$2d$kit$2f$core$2f$dist$2f$core$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@dnd-kit/core/dist/core.esm.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$hooks$2f$useHistory$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/hooks/useHistory.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$hooks$2f$useKeyboardShortcuts$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/hooks/useKeyboardShortcuts.ts [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$static$2d$generator$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/static-generator.ts [app-client] (ecmascript)");
;
var _s = __turbopack_context__.k.signature();
"use client";
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
;
const PageEditor = ()=>{
    _s();
    const params = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useParams"])();
    const pageId = params.pageId;
    const router = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRouter"])();
    const { copiedComponent } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$contexts$2f$ClipboardContext$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useClipboard"])();
    const [page, setPage] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [rows, setRows] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [components, setComponents] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [loading, setLoading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(true);
    const [showPreview, setShowPreview] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [activeComponentType, setActiveComponentType] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [layouts, setLayouts] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [previewLayout, setPreviewLayout] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [previewLayoutRows, setPreviewLayoutRows] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [previewLayoutComponents, setPreviewLayoutComponents] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [widgetData, setWidgetData] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(new Map());
    const [selectedComponent, setSelectedComponent] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [showOutline, setShowOutline] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const history = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$hooks$2f$useHistory$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useHistory"])();
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$hooks$2f$useKeyboardShortcuts$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useKeyboardShortcuts"])({
        onUndo: {
            "PageEditor.useKeyboardShortcuts": ()=>history.canUndo && history.undo()
        }["PageEditor.useKeyboardShortcuts"],
        onRedo: {
            "PageEditor.useKeyboardShortcuts": ()=>history.canRedo && history.redo()
        }["PageEditor.useKeyboardShortcuts"],
        onDelete: {
            "PageEditor.useKeyboardShortcuts": ()=>selectedComponent && handleDeleteComponent(selectedComponent)
        }["PageEditor.useKeyboardShortcuts"],
        onDuplicate: {
            "PageEditor.useKeyboardShortcuts": ()=>selectedComponent && handleDuplicateComponent(selectedComponent)
        }["PageEditor.useKeyboardShortcuts"]
    });
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "PageEditor.useEffect": ()=>{
            loadPage();
            loadLayouts();
        }
    }["PageEditor.useEffect"], [
        pageId
    ]);
    const loadLayouts = async ()=>{
        const { data } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("layouts").select("*").eq("is_published", true).order("title");
        setLayouts(data || []);
    };
    const loadPage = async ()=>{
        if (!pageId) return;
        const { data: pageData, error: pageError } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("pages").select("*").eq("id", pageId).single();
        if (pageError) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to load page");
            router.push("/admin");
            return;
        }
        const { data: rowsData } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_rows").select("*").eq("page_id", pageId).order("position");
        const { data: componentsData } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_components").select("*").eq("page_id", pageId).order("position");
        setPage(pageData);
        setRows(rowsData || []);
        setComponents(componentsData || []);
        setLoading(false);
    };
    const handleAddRow = async ()=>{
        if (!pageId) return;
        const { data, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_rows").insert({
            page_id: pageId,
            position: rows.length,
            columns: 1
        }).select().single();
        if (error) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to add row");
            return;
        }
        setRows([
            ...rows,
            data
        ]);
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success("Row added");
    };
    const handleDeleteRow = async (rowId)=>{
        if (!confirm("Delete this row and all its components?")) return;
        const { error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_rows").delete().eq("id", rowId);
        if (error) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to delete row");
            return;
        }
        setRows(rows.filter((r)=>r.id !== rowId));
        setComponents(components.filter((c)=>c.row_id !== rowId));
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success("Row deleted");
    };
    const handleUpdateRowColumns = async (rowId, columns)=>{
        const { error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_rows").update({
            columns
        }).eq("id", rowId);
        if (error) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to update columns");
            return;
        }
        setRows(rows.map((r)=>r.id === rowId ? {
                ...r,
                columns
            } : r));
    };
    const handleUpdateRowStyles = async (rowId, styles)=>{
        const { error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_rows").update({
            styles
        }).eq("id", rowId);
        if (error) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to update row styles");
            return;
        }
        setRows(rows.map((r)=>r.id === rowId ? {
                ...r,
                styles
            } : r));
    };
    const handleUpdateRowColumnWidths = async (rowId, widths)=>{
        const { error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_rows").update({
            column_widths: widths
        }).eq("id", rowId);
        if (error) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to update column widths");
            return;
        }
        setRows(rows.map((r)=>r.id === rowId ? {
                ...r,
                column_widths: widths
            } : r));
    };
    const handleUpdateRowResponsiveConfig = async (rowId, config)=>{
        const { error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_rows").update({
            responsive_config: config
        }).eq("id", rowId);
        if (error) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to update responsive config");
            return;
        }
        setRows(rows.map((r)=>r.id === rowId ? {
                ...r,
                responsive_config: config
            } : r));
    };
    const handleUpdateComponentStyles = async (id, styles)=>{
        const { error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_components").update({
            styles
        }).eq("id", id);
        if (error) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to update component styles");
            return;
        }
        setComponents(components.map((c)=>c.id === id ? {
                ...c,
                styles
            } : c));
    };
    const handleReorderRows = async (newRows)=>{
        setRows(newRows);
        // Update positions in database
        for(let i = 0; i < newRows.length; i++){
            await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_rows").update({
                position: i
            }).eq("id", newRows[i].id);
        }
    };
    const getDefaultContent = (type)=>{
        switch(type){
            case "heading":
                return {
                    text: "New Heading",
                    level: "h2"
                };
            case "paragraph":
                return {
                    text: "New paragraph text"
                };
            case "image":
                return {
                    url: "",
                    alt: "Image"
                };
            case "button":
                return {
                    text: "Click me",
                    link: ""
                };
            case "link":
                return {
                    text: "Link",
                    url: ""
                };
            case "video":
                return {
                    url: ""
                };
            case "divider":
                return {};
            case "spacer":
                return {
                    height: "medium"
                };
            case "quote":
                return {
                    text: "Quote text",
                    author: ""
                };
            case "list":
                return {
                    items: "Item 1\nItem 2\nItem 3",
                    type: "bullet"
                };
            case "code":
                return {
                    code: "console.log('Hello');",
                    language: "javascript"
                };
            case "page-content":
                return {};
            case "entity-list":
                return {
                    entityId: "",
                    fields: [],
                    displayStyle: "grid",
                    limit: 10,
                    sortBy: "",
                    sortOrder: "desc",
                    showPublishedOnly: true
                };
            case "entity-detail":
                return {
                    entityId: "",
                    recordId: "",
                    fields: [],
                    layout: "vertical"
                };
            case "query":
                return {
                    queryId: ""
                };
            case "datasource":
                return {
                    dataSourceType: "entity",
                    viewType: "table",
                    viewOptions: {
                        visibleColumns: [],
                        sortField: null,
                        sortOrder: "asc",
                        filters: []
                    }
                };
            case "chart":
                return {
                    chartType: "bar",
                    data: JSON.stringify([
                        {
                            name: "Jan",
                            value: 400
                        },
                        {
                            name: "Feb",
                            value: 300
                        },
                        {
                            name: "Mar",
                            value: 600
                        },
                        {
                            name: "Apr",
                            value: 800
                        },
                        {
                            name: "May",
                            value: 500
                        },
                        {
                            name: "Jun",
                            value: 700
                        }
                    ], null, 2),
                    title: "Sample Bar Chart",
                    xAxisKey: "name",
                    yAxisKey: "value"
                };
            case "tabs":
                return {
                    tabs: [
                        {
                            id: "tab-1",
                            label: "Tab 1",
                            content: "Content 1"
                        },
                        {
                            id: "tab-2",
                            label: "Tab 2",
                            content: "Content 2"
                        }
                    ]
                };
            case "accordion":
                return {
                    items: [
                        {
                            id: "item-1",
                            title: "Section 1",
                            content: "Content 1"
                        },
                        {
                            id: "item-2",
                            title: "Section 2",
                            content: "Content 2"
                        }
                    ]
                };
            case "card":
                return {
                    layout: "image-top",
                    title: "Card Title",
                    description: "Card description",
                    imageUrl: "",
                    buttonText: "Learn More",
                    buttonLink: ""
                };
            case "form-input":
                return {
                    fieldName: "field_name",
                    label: "Field Label",
                    placeholder: "Enter value...",
                    inputType: "text",
                    required: false
                };
            case "form-textarea":
                return {
                    fieldName: "message",
                    label: "Message",
                    placeholder: "Enter your message...",
                    rows: 4,
                    required: false
                };
            case "form-select":
                return {
                    fieldName: "select_field",
                    label: "Select Option",
                    placeholder: "Choose...",
                    options: "Option 1\nOption 2\nOption 3",
                    required: false
                };
            case "form-checkbox":
                return {
                    fieldName: "checkbox_field",
                    label: "Select Options",
                    options: "Option 1\nOption 2\nOption 3",
                    type: "checkbox",
                    required: false
                };
            case "form-submit":
                return {
                    buttonText: "Submit",
                    buttonVariant: "default",
                    successMessage: "Form submitted successfully!",
                    submitAction: "custom"
                };
            default:
                return {};
        }
    };
    const handleUpdateComponent = async (id, content)=>{
        const { error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_components").update({
            content
        }).eq("id", id);
        if (error) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to update component");
            return;
        }
        setComponents(components.map((c)=>c.id === id ? {
                ...c,
                content
            } : c));
    };
    const handleDeleteComponent = async (id)=>{
        const { error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_components").delete().eq("id", id);
        if (error) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to delete component");
            return;
        }
        setComponents(components.filter((c)=>c.id !== id));
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success("Component deleted");
    };
    const handleInsertTemplate = async (templateData)=>{
        if (!pageId) return;
        const templateRows = templateData.rows || [];
        for (const templateRow of templateRows){
            const { data: newRow, error: rowError } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_rows").insert({
                page_id: pageId,
                position: rows.length,
                columns: templateRow.columns || 1,
                column_widths: templateRow.column_widths || [],
                styles: templateRow.styles || {}
            }).select().single();
            if (rowError || !newRow) {
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to insert template row");
                continue;
            }
            const templateComponents = templateRow.components || [];
            for (const templateComp of templateComponents){
                await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_components").insert({
                    page_id: pageId,
                    row_id: newRow.id,
                    component_type: templateComp.component_type,
                    column_index: templateComp.column_index,
                    position: templateComp.position,
                    content: templateComp.content || {},
                    styles: templateComp.styles || {}
                });
            }
        }
        await loadPage();
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success("Template inserted successfully");
    };
    const handleDuplicateComponent = async (id)=>{
        const component = components.find((c)=>c.id === id);
        if (!component || !pageId) return;
        const columnComponents = components.filter((c)=>c.row_id === component.row_id && c.column_index === component.column_index);
        const { data, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_components").insert({
            page_id: pageId,
            row_id: component.row_id,
            column_index: component.column_index,
            component_type: component.component_type,
            content: component.content,
            position: columnComponents.length,
            is_widget_instance: component.is_widget_instance,
            widget_id: component.widget_id
        }).select().single();
        if (error) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to duplicate component");
            return;
        }
        setComponents([
            ...components,
            data
        ]);
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success("Component duplicated");
    };
    const handlePasteComponent = async (rowId, columnIndex)=>{
        if (!copiedComponent || !pageId) return;
        const columnComponents = components.filter((c)=>c.row_id === rowId && c.column_index === columnIndex);
        const { data, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_components").insert({
            page_id: pageId,
            row_id: rowId,
            column_index: columnIndex,
            component_type: copiedComponent.component_type,
            content: copiedComponent.content,
            position: columnComponents.length,
            is_widget_instance: copiedComponent.is_widget_instance,
            widget_id: copiedComponent.widget_id
        }).select().single();
        if (error) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to paste component");
            return;
        }
        setComponents([
            ...components,
            data
        ]);
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success("Component pasted");
    };
    const handleMoveComponentToPosition = async (id, newPosition)=>{
        const component = components.find((c)=>c.id === id);
        if (!component) return;
        const columnComponents = components.filter((c)=>c.row_id === component.row_id && c.column_index === component.column_index).sort((a, b)=>a.position - b.position);
        const updates = columnComponents.map((comp, index)=>{
            if (comp.id === id) {
                return __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_components").update({
                    position: newPosition
                }).eq("id", comp.id);
            }
            if (index >= newPosition && comp.position < component.position) {
                return __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_components").update({
                    position: index + 1
                }).eq("id", comp.id);
            }
            if (index <= newPosition && comp.position > component.position) {
                return __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_components").update({
                    position: index - 1
                }).eq("id", comp.id);
            }
            return null;
        }).filter(Boolean);
        await Promise.all(updates);
        await loadPage();
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success("Component moved");
    };
    const handleAddRowAbove = async (rowId)=>{
        const targetRow = rows.find((r)=>r.id === rowId);
        if (!targetRow || !pageId) return;
        const { error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_rows").insert({
            page_id: pageId,
            position: targetRow.position,
            columns: 1
        });
        if (error) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to add row");
            return;
        }
        const rowsToUpdate = rows.filter((r)=>r.position >= targetRow.position);
        await Promise.all(rowsToUpdate.map((r)=>__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_rows").update({
                position: r.position + 1
            }).eq("id", r.id)));
        await loadPage();
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success("Row added");
    };
    const handleAddRowBelow = async (rowId)=>{
        const targetRow = rows.find((r)=>r.id === rowId);
        if (!targetRow || !pageId) return;
        const { error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_rows").insert({
            page_id: pageId,
            position: targetRow.position + 1,
            columns: 1
        });
        if (error) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to add row");
            return;
        }
        const rowsToUpdate = rows.filter((r)=>r.position > targetRow.position);
        await Promise.all(rowsToUpdate.map((r)=>__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_rows").update({
                position: r.position + 1
            }).eq("id", r.id)));
        await loadPage();
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success("Row added");
    };
    const handleDuplicateRow = async (rowId)=>{
        const targetRow = rows.find((r)=>r.id === rowId);
        if (!targetRow || !pageId) return;
        const { data: newRow, error: rowError } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_rows").insert({
            page_id: pageId,
            position: targetRow.position + 1,
            columns: targetRow.columns,
            styles: targetRow.styles,
            column_widths: targetRow.column_widths
        }).select().single();
        if (rowError || !newRow) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to duplicate row");
            return;
        }
        const rowComponents = components.filter((c)=>c.row_id === rowId);
        await Promise.all(rowComponents.map((comp)=>__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_components").insert({
                page_id: pageId,
                row_id: newRow.id,
                column_index: comp.column_index,
                position: comp.position,
                component_type: comp.component_type,
                content: comp.content,
                styles: comp.styles
            })));
        await loadPage();
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success("Row duplicated");
    };
    const handleToggleVisibility = async (componentId)=>{
        console.log('[PageEditor] Toggle visibility for:', componentId);
        const component = components.find((c)=>c.id === componentId);
        if (!component) {
            console.log('[PageEditor] Component not found!');
            return;
        }
        const currentStyles = component.styles || {};
        const currentVisible = currentStyles.visible !== false; // true if not explicitly false
        const newVisible = !currentVisible;
        console.log('[PageEditor] Visibility change:', {
            currentVisible,
            newVisible,
            currentStyles
        });
        const { error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_components").update({
            styles: {
                ...currentStyles,
                visible: newVisible
            }
        }).eq("id", componentId);
        if (error) {
            console.error('[PageEditor] Error updating visibility:', error);
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to update visibility");
            return;
        }
        await loadPage();
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success(newVisible ? "Component shown" : "Component hidden");
    };
    const handleToggleLock = async (componentId)=>{
        console.log('[PageEditor] Toggle lock for:', componentId);
        const component = components.find((c)=>c.id === componentId);
        if (!component) {
            console.log('[PageEditor] Component not found!');
            return;
        }
        const currentStyles = component.styles || {};
        const newLocked = !currentStyles.locked;
        console.log('[PageEditor] Lock change:', {
            currentLocked: currentStyles.locked,
            newLocked,
            currentStyles
        });
        const { error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_components").update({
            styles: {
                ...currentStyles,
                locked: newLocked
            }
        }).eq("id", componentId);
        if (error) {
            console.error('[PageEditor] Error updating lock:', error);
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to update lock");
            return;
        }
        await loadPage();
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success(newLocked ? "Component locked" : "Component unlocked");
    };
    const handleDragStart = (event)=>{
        const { active } = event;
        const activeData = active.data.current;
        if (activeData?.type === "new-component") {
            setActiveComponentType(activeData.componentType);
        } else if (activeData?.type === "new-widget") {
            setActiveComponentType("widget");
        }
    };
    const handleDragOver = (event)=>{
        const { active, over } = event;
        if (!over) return;
        const activeId = active.id;
        const overId = over.id;
        const activeData = active.data.current;
        const overData = over.data.current;
        // Only handle dragging existing components between columns (not new components from sidebar)
        if (activeData?.type === "component" && overData?.type === "droppable-column") {
            const component = activeData.component;
            const targetRowId = overData.rowId;
            const targetColumnIndex = overData.columnIndex;
            if (component.row_id !== targetRowId || component.column_index !== targetColumnIndex) {
                setComponents(components.map((c)=>c.id === activeId ? {
                        ...c,
                        row_id: targetRowId,
                        column_index: targetColumnIndex
                    } : c));
            }
        }
    };
    const handleDragEnd = async (event)=>{
        const { active, over } = event;
        if (!over) {
            setActiveComponentType(null);
            return;
        }
        const activeId = active.id;
        const activeData = active.data.current;
        const overData = over.data.current;
        // Handle dropping new component or widget from sidebar
        if ((activeId.startsWith("new-") || activeId.startsWith("new-widget-")) && (activeData?.type === "new-component" || activeData?.type === "new-widget")) {
            const targetRowId = overData?.rowId;
            const targetColumnIndex = overData?.columnIndex;
            if (!targetRowId || targetColumnIndex === null || !pageId) {
                setActiveComponentType(null);
                return;
            }
            const columnComponents = components.filter((c)=>c.row_id === targetRowId && c.column_index === targetColumnIndex);
            if (activeData.type === "new-widget") {
                // Handle widget drop
                const { data, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_components").insert({
                    page_id: pageId,
                    row_id: targetRowId,
                    column_index: targetColumnIndex,
                    component_type: "paragraph",
                    content: {
                        text: `Widget: ${activeData.widgetTitle}`
                    },
                    position: columnComponents.length,
                    is_widget_instance: true,
                    widget_id: activeData.widgetId
                }).select().single();
                if (error) {
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to add widget");
                } else {
                    setComponents([
                        ...components,
                        data
                    ]);
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success("Widget added");
                }
            } else {
                // Handle component drop
                const componentType = activeData.componentType;
                const { data, error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_components").insert({
                    page_id: pageId,
                    row_id: targetRowId,
                    column_index: targetColumnIndex,
                    component_type: componentType,
                    content: getDefaultContent(componentType),
                    position: columnComponents.length
                }).select().single();
                if (error) {
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to add component");
                } else {
                    setComponents([
                        ...components,
                        data
                    ]);
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success("Component added");
                }
            }
            setActiveComponentType(null);
            return;
        }
        // Handle moving existing component
        const component = components.find((c)=>c.id === activeId);
        if (!component) {
            setActiveComponentType(null);
            return;
        }
        // Update in database
        await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_components").update({
            row_id: component.row_id,
            column_index: component.column_index
        }).eq("id", activeId);
        // Reorder components in the same column
        const columnComponents = components.filter((c)=>c.row_id === component.row_id && c.column_index === component.column_index).sort((a, b)=>a.position - b.position);
        for(let i = 0; i < columnComponents.length; i++){
            await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("page_components").update({
                position: i
            }).eq("id", columnComponents[i].id);
        }
        setActiveComponentType(null);
    };
    const handlePreview = async ()=>{
        if (!page) return;
        let layout = null;
        let layoutRows = [];
        let layoutComponents = [];
        if (page.layout_id) {
            const { data: layoutData } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("layouts").select("*").eq("id", page.layout_id).single();
            if (layoutData) {
                layout = layoutData;
                const { data: lRows } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("layout_rows").select("*").eq("layout_id", page.layout_id).order("position");
                const { data: lComponents } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("layout_components").select("*").eq("layout_id", page.layout_id).order("position");
                layoutRows = lRows || [];
                layoutComponents = lComponents || [];
            }
        }
        // Fetch widget data for all widget instances
        const widgetInstances = components.filter((c)=>Boolean(c.is_widget_instance && c.widget_id));
        const widgetDataMap = new Map();
        for (const instance of widgetInstances){
            if (!widgetDataMap.has(instance.widget_id)) {
                const { data: widgetRows } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("widget_rows").select("*").eq("widget_id", instance.widget_id).order("position");
                const { data: widgetComponents } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("widget_components").select("*").eq("widget_id", instance.widget_id).order("position");
                widgetDataMap.set(instance.widget_id, {
                    rows: widgetRows || [],
                    components: widgetComponents || []
                });
            }
        }
        setPreviewLayout(layout);
        setPreviewLayoutRows(layoutRows);
        setPreviewLayoutComponents(layoutComponents);
        setWidgetData(widgetDataMap);
        setShowPreview(true);
    };
    const handlePublishToggle = async ()=>{
        if (!page) return;
        const { error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("pages").update({
            is_published: !page.is_published
        }).eq("id", page.id);
        if (error) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to update page");
            return;
        }
        // If we are publishing (was not published, now is), generate and download static HTML
        if (!page.is_published) {
            try {
                const html = (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$static$2d$generator$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["generateStaticHtml"])(page, rows, components);
                const blob = new Blob([
                    html
                ], {
                    type: "text/html"
                });
                const url = URL.createObjectURL(blob);
                const a = document.createElement("a");
                a.href = url;
                a.download = `${(page.title || "page").toLowerCase().replace(/\s+/g, '-')}.html`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success("Static HTML downloaded");
            } catch (err) {
                console.error("Failed to generate static HTML", err);
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to generate static export");
            }
        }
        setPage({
            ...page,
            is_published: !page.is_published
        });
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success(page.is_published ? "Page unpublished" : "Page published");
    };
    const handleLayoutChange = async (layoutId)=>{
        if (!page) return;
        const { error } = await __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$integrations$2f$supabase$2f$client$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["supabase"].from("pages").update({
            layout_id: layoutId || null
        }).eq("id", page.id);
        if (error) {
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].error("Failed to update layout");
            return;
        }
        setPage({
            ...page,
            layout_id: layoutId || null
        });
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$sonner$2f$dist$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["toast"].success("Layout updated");
    };
    if (loading) {
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
            className: "min-h-screen flex items-center justify-center",
            children: "Loading..."
        }, void 0, false, {
            fileName: "[project]/src/views/PageEditor.tsx",
            lineNumber: 861,
            columnNumber: 12
        }, ("TURBOPACK compile-time value", void 0));
    }
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$editor$2f$PagePreviewModal$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PagePreviewModal"], {
                open: showPreview,
                onOpenChange: setShowPreview,
                page: page,
                rows: rows,
                components: components,
                layout: previewLayout,
                layoutRows: previewLayoutRows,
                layoutComponents: previewLayoutComponents,
                widgetData: widgetData
            }, void 0, false, {
                fileName: "[project]/src/views/PageEditor.tsx",
                lineNumber: 866,
                columnNumber: 7
            }, ("TURBOPACK compile-time value", void 0)),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$dnd$2d$kit$2f$core$2f$dist$2f$core$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DndContext"], {
                collisionDetection: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$dnd$2d$kit$2f$core$2f$dist$2f$core$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["pointerWithin"],
                onDragStart: handleDragStart,
                onDragEnd: handleDragEnd,
                onDragOver: handleDragOver,
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$sidebar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SidebarProvider"], {
                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "min-h-screen flex w-full bg-background",
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$editor$2f$SidebarToggle$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SidebarToggle"], {
                                showOutline: showOutline,
                                onToggle: ()=>setShowOutline(!showOutline),
                                title: page?.title || "Page",
                                rows: rows,
                                components: components,
                                selectedComponentId: selectedComponent,
                                onSelectComponent: setSelectedComponent,
                                onToggleVisibility: handleToggleVisibility,
                                onToggleLock: handleToggleLock
                            }, void 0, false, {
                                fileName: "[project]/src/views/PageEditor.tsx",
                                lineNumber: 885,
                                columnNumber: 13
                            }, ("TURBOPACK compile-time value", void 0)),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                className: "flex-1 flex flex-col",
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("header", {
                                        className: "border-b bg-card shadow-[var(--shadow-soft)] sticky top-0 z-50",
                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                            className: "px-4 py-3 flex items-center justify-between",
                                            children: [
                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                    className: "flex items-center gap-4",
                                                    children: [
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$sidebar$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SidebarTrigger"], {}, void 0, false, {
                                                            fileName: "[project]/src/views/PageEditor.tsx",
                                                            lineNumber: 901,
                                                            columnNumber: 21
                                                        }, ("TURBOPACK compile-time value", void 0)),
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                            variant: "outline",
                                                            onClick: ()=>router.push("/admin"),
                                                            className: "gap-2",
                                                            children: [
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$arrow$2d$left$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__ArrowLeft$3e$__["ArrowLeft"], {
                                                                    className: "h-4 w-4"
                                                                }, void 0, false, {
                                                                    fileName: "[project]/src/views/PageEditor.tsx",
                                                                    lineNumber: 903,
                                                                    columnNumber: 23
                                                                }, ("TURBOPACK compile-time value", void 0)),
                                                                "Back"
                                                            ]
                                                        }, void 0, true, {
                                                            fileName: "[project]/src/views/PageEditor.tsx",
                                                            lineNumber: 902,
                                                            columnNumber: 21
                                                        }, ("TURBOPACK compile-time value", void 0)),
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h1", {
                                                            className: "text-xl font-bold",
                                                            children: page?.title
                                                        }, void 0, false, {
                                                            fileName: "[project]/src/views/PageEditor.tsx",
                                                            lineNumber: 906,
                                                            columnNumber: 21
                                                        }, ("TURBOPACK compile-time value", void 0))
                                                    ]
                                                }, void 0, true, {
                                                    fileName: "[project]/src/views/PageEditor.tsx",
                                                    lineNumber: 900,
                                                    columnNumber: 19
                                                }, ("TURBOPACK compile-time value", void 0)),
                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                    className: "flex items-center gap-4",
                                                    children: [
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                            className: "flex items-center gap-2",
                                                            children: [
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$label$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Label"], {
                                                                    htmlFor: "layout-select",
                                                                    className: "text-sm",
                                                                    children: "Layout:"
                                                                }, void 0, false, {
                                                                    fileName: "[project]/src/views/PageEditor.tsx",
                                                                    lineNumber: 910,
                                                                    columnNumber: 23
                                                                }, ("TURBOPACK compile-time value", void 0)),
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Select"], {
                                                                    value: page?.layout_id ?? "none",
                                                                    onValueChange: (value)=>handleLayoutChange(value === "none" ? null : value),
                                                                    children: [
                                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectTrigger"], {
                                                                            id: "layout-select",
                                                                            className: "w-[200px]",
                                                                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectValue"], {
                                                                                placeholder: "No layout"
                                                                            }, void 0, false, {
                                                                                fileName: "[project]/src/views/PageEditor.tsx",
                                                                                lineNumber: 913,
                                                                                columnNumber: 27
                                                                            }, ("TURBOPACK compile-time value", void 0))
                                                                        }, void 0, false, {
                                                                            fileName: "[project]/src/views/PageEditor.tsx",
                                                                            lineNumber: 912,
                                                                            columnNumber: 25
                                                                        }, ("TURBOPACK compile-time value", void 0)),
                                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectContent"], {
                                                                            children: [
                                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectItem"], {
                                                                                    value: "none",
                                                                                    children: "No layout"
                                                                                }, void 0, false, {
                                                                                    fileName: "[project]/src/views/PageEditor.tsx",
                                                                                    lineNumber: 916,
                                                                                    columnNumber: 27
                                                                                }, ("TURBOPACK compile-time value", void 0)),
                                                                                layouts.map((layout)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$select$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SelectItem"], {
                                                                                        value: layout.id,
                                                                                        children: layout.title
                                                                                    }, layout.id, false, {
                                                                                        fileName: "[project]/src/views/PageEditor.tsx",
                                                                                        lineNumber: 918,
                                                                                        columnNumber: 29
                                                                                    }, ("TURBOPACK compile-time value", void 0)))
                                                                            ]
                                                                        }, void 0, true, {
                                                                            fileName: "[project]/src/views/PageEditor.tsx",
                                                                            lineNumber: 915,
                                                                            columnNumber: 25
                                                                        }, ("TURBOPACK compile-time value", void 0))
                                                                    ]
                                                                }, void 0, true, {
                                                                    fileName: "[project]/src/views/PageEditor.tsx",
                                                                    lineNumber: 911,
                                                                    columnNumber: 23
                                                                }, ("TURBOPACK compile-time value", void 0))
                                                            ]
                                                        }, void 0, true, {
                                                            fileName: "[project]/src/views/PageEditor.tsx",
                                                            lineNumber: 909,
                                                            columnNumber: 21
                                                        }, ("TURBOPACK compile-time value", void 0)),
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                            variant: "ghost",
                                                            size: "icon",
                                                            onClick: ()=>history.undo(),
                                                            disabled: !history.canUndo,
                                                            title: "Undo (Cmd+Z)",
                                                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$undo$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Undo$3e$__["Undo"], {
                                                                className: "h-4 w-4"
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/views/PageEditor.tsx",
                                                                lineNumber: 932,
                                                                columnNumber: 23
                                                            }, ("TURBOPACK compile-time value", void 0))
                                                        }, void 0, false, {
                                                            fileName: "[project]/src/views/PageEditor.tsx",
                                                            lineNumber: 925,
                                                            columnNumber: 21
                                                        }, ("TURBOPACK compile-time value", void 0)),
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                            variant: "ghost",
                                                            size: "icon",
                                                            onClick: ()=>history.redo(),
                                                            disabled: !history.canRedo,
                                                            title: "Redo (Cmd+Shift+Z)",
                                                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$redo$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Redo$3e$__["Redo"], {
                                                                className: "h-4 w-4"
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/views/PageEditor.tsx",
                                                                lineNumber: 941,
                                                                columnNumber: 23
                                                            }, ("TURBOPACK compile-time value", void 0))
                                                        }, void 0, false, {
                                                            fileName: "[project]/src/views/PageEditor.tsx",
                                                            lineNumber: 934,
                                                            columnNumber: 21
                                                        }, ("TURBOPACK compile-time value", void 0)),
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                            variant: "outline",
                                                            onClick: handlePreview,
                                                            className: "gap-2",
                                                            children: [
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$monitor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Monitor$3e$__["Monitor"], {
                                                                    className: "h-4 w-4"
                                                                }, void 0, false, {
                                                                    fileName: "[project]/src/views/PageEditor.tsx",
                                                                    lineNumber: 948,
                                                                    columnNumber: 23
                                                                }, ("TURBOPACK compile-time value", void 0)),
                                                                "Preview"
                                                            ]
                                                        }, void 0, true, {
                                                            fileName: "[project]/src/views/PageEditor.tsx",
                                                            lineNumber: 943,
                                                            columnNumber: 21
                                                        }, ("TURBOPACK compile-time value", void 0)),
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$ui$2f$button$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Button"], {
                                                            variant: page?.is_published ? "outline" : "default",
                                                            onClick: handlePublishToggle,
                                                            className: "gap-2",
                                                            children: page?.is_published ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
                                                                children: [
                                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$eye$2d$off$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__EyeOff$3e$__["EyeOff"], {
                                                                        className: "h-4 w-4"
                                                                    }, void 0, false, {
                                                                        fileName: "[project]/src/views/PageEditor.tsx",
                                                                        lineNumber: 958,
                                                                        columnNumber: 27
                                                                    }, ("TURBOPACK compile-time value", void 0)),
                                                                    "Unpublish"
                                                                ]
                                                            }, void 0, true) : /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Fragment"], {
                                                                children: [
                                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$eye$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__Eye$3e$__["Eye"], {
                                                                        className: "h-4 w-4"
                                                                    }, void 0, false, {
                                                                        fileName: "[project]/src/views/PageEditor.tsx",
                                                                        lineNumber: 963,
                                                                        columnNumber: 27
                                                                    }, ("TURBOPACK compile-time value", void 0)),
                                                                    "Publish"
                                                                ]
                                                            }, void 0, true)
                                                        }, void 0, false, {
                                                            fileName: "[project]/src/views/PageEditor.tsx",
                                                            lineNumber: 951,
                                                            columnNumber: 21
                                                        }, ("TURBOPACK compile-time value", void 0))
                                                    ]
                                                }, void 0, true, {
                                                    fileName: "[project]/src/views/PageEditor.tsx",
                                                    lineNumber: 908,
                                                    columnNumber: 19
                                                }, ("TURBOPACK compile-time value", void 0))
                                            ]
                                        }, void 0, true, {
                                            fileName: "[project]/src/views/PageEditor.tsx",
                                            lineNumber: 899,
                                            columnNumber: 17
                                        }, ("TURBOPACK compile-time value", void 0))
                                    }, void 0, false, {
                                        fileName: "[project]/src/views/PageEditor.tsx",
                                        lineNumber: 898,
                                        columnNumber: 15
                                    }, ("TURBOPACK compile-time value", void 0)),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("main", {
                                        className: "flex-1 overflow-auto px-4 py-8",
                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$editor$2f$GridCanvas$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["GridCanvas"], {
                                            rows: rows,
                                            components: components,
                                            onUpdateComponent: handleUpdateComponent,
                                            onUpdateComponentStyles: handleUpdateComponentStyles,
                                            onDeleteComponent: handleDeleteComponent,
                                            onAddRow: handleAddRow,
                                            onDeleteRow: handleDeleteRow,
                                            onUpdateRowColumns: handleUpdateRowColumns,
                                            onUpdateRowStyles: handleUpdateRowStyles,
                                            onUpdateRowColumnWidths: handleUpdateRowColumnWidths,
                                            onUpdateRowResponsiveConfig: handleUpdateRowResponsiveConfig,
                                            onReorderRows: handleReorderRows,
                                            activeComponentType: activeComponentType,
                                            onDuplicateComponent: handleDuplicateComponent,
                                            onPasteComponent: handlePasteComponent,
                                            onInsertTemplate: handleInsertTemplate,
                                            onMoveComponentToPosition: handleMoveComponentToPosition,
                                            onAddRowAbove: handleAddRowAbove,
                                            onAddRowBelow: handleAddRowBelow,
                                            onDuplicateRow: handleDuplicateRow
                                        }, void 0, false, {
                                            fileName: "[project]/src/views/PageEditor.tsx",
                                            lineNumber: 973,
                                            columnNumber: 17
                                        }, ("TURBOPACK compile-time value", void 0))
                                    }, void 0, false, {
                                        fileName: "[project]/src/views/PageEditor.tsx",
                                        lineNumber: 972,
                                        columnNumber: 15
                                    }, ("TURBOPACK compile-time value", void 0))
                                ]
                            }, void 0, true, {
                                fileName: "[project]/src/views/PageEditor.tsx",
                                lineNumber: 897,
                                columnNumber: 13
                            }, ("TURBOPACK compile-time value", void 0))
                        ]
                    }, void 0, true, {
                        fileName: "[project]/src/views/PageEditor.tsx",
                        lineNumber: 884,
                        columnNumber: 11
                    }, ("TURBOPACK compile-time value", void 0))
                }, void 0, false, {
                    fileName: "[project]/src/views/PageEditor.tsx",
                    lineNumber: 883,
                    columnNumber: 9
                }, ("TURBOPACK compile-time value", void 0))
            }, void 0, false, {
                fileName: "[project]/src/views/PageEditor.tsx",
                lineNumber: 877,
                columnNumber: 7
            }, ("TURBOPACK compile-time value", void 0))
        ]
    }, void 0, true);
};
_s(PageEditor, "w9+1ZAjjDcmr7EArjmulmzn1diE=", false, function() {
    return [
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useParams"],
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRouter"],
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$contexts$2f$ClipboardContext$2e$tsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useClipboard"],
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$hooks$2f$useHistory$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useHistory"],
        __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$hooks$2f$useKeyboardShortcuts$2e$ts__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useKeyboardShortcuts"]
    ];
});
_c = PageEditor;
const __TURBOPACK__default__export__ = PageEditor;
var _c;
__turbopack_context__.k.register(_c, "PageEditor");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
]);

//# sourceMappingURL=src_56a8cfdb._.js.map