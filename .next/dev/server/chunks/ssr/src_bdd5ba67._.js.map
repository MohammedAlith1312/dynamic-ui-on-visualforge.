{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/integrations/supabase/client.ts"],"sourcesContent":["// This file is automatically generated. Do not edit it directly.\r\nimport { createClient } from '@supabase/supabase-js';\r\nimport type { Database } from './types';\r\n\r\nconst SUPABASE_URL = process.env.NEXT_PUBLIC_SUPABASE_URL || '';\r\nconst SUPABASE_PUBLISHABLE_KEY = process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY || '';\r\n\r\n// SSR-safe storage check\r\nconst isBrowser = typeof window !== 'undefined';\r\n\r\nexport const supabase = createClient<Database>(SUPABASE_URL, SUPABASE_PUBLISHABLE_KEY, {\r\n  auth: {\r\n    storage: isBrowser ? window.localStorage : undefined,\r\n    persistSession: true,\r\n    autoRefreshToken: true,\r\n  }\r\n});"],"names":[],"mappings":";;;;AAAA,iEAAiE;AACjE;;AAGA,MAAM,eAAe,gFAAwC;AAC7D,MAAM,2BAA2B,wPAAoD;AAErF,yBAAyB;AACzB,MAAM,YAAY,kDAAkB;AAE7B,MAAM,WAAW,IAAA,uMAAY,EAAW,cAAc,0BAA0B;IACrF,MAAM;QACJ,SAAS,sCAAY,0BAAsB;QAC3C,gBAAgB;QAChB,kBAAkB;IACpB;AACF"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/hooks/use-mobile.tsx"],"sourcesContent":["import * as React from \"react\";\r\n\r\nconst MOBILE_BREAKPOINT = 768;\r\n\r\nexport function useIsMobile() {\r\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined);\r\n\r\n  React.useEffect(() => {\r\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`);\r\n    const onChange = () => {\r\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);\r\n    };\r\n    mql.addEventListener(\"change\", onChange);\r\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);\r\n    return () => mql.removeEventListener(\"change\", onChange);\r\n  }, []);\r\n\r\n  return !!isMobile;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,oBAAoB;AAEnB,SAAS;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,iNAAc,CAAsB;IAEpE,kNAAe,CAAC;QACd,MAAM,MAAM,OAAO,UAAU,CAAC,CAAC,YAAY,EAAE,oBAAoB,EAAE,GAAG,CAAC;QACvE,MAAM,WAAW;YACf,YAAY,OAAO,UAAU,GAAG;QAClC;QACA,IAAI,gBAAgB,CAAC,UAAU;QAC/B,YAAY,OAAO,UAAU,GAAG;QAChC,OAAO,IAAM,IAAI,mBAAmB,CAAC,UAAU;IACjD,GAAG,EAAE;IAEL,OAAO,CAAC,CAAC;AACX"}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/hooks/useHistory.ts"],"sourcesContent":["import { useState, useCallback } from \"react\";\r\n\r\ninterface HistoryCommand {\r\n  execute: () => void;\r\n  undo: () => void;\r\n  timestamp: number;\r\n}\r\n\r\nexport const useHistory = () => {\r\n  const [history, setHistory] = useState<HistoryCommand[]>([]);\r\n  const [currentIndex, setCurrentIndex] = useState(-1);\r\n\r\n  const execute = useCallback((command: Omit<HistoryCommand, 'timestamp'>) => {\r\n    const newCommand: HistoryCommand = {\r\n      ...command,\r\n      timestamp: Date.now(),\r\n    };\r\n\r\n    // Execute the command\r\n    newCommand.execute();\r\n\r\n    // Clear any forward history\r\n    const newHistory = history.slice(0, currentIndex + 1);\r\n    newHistory.push(newCommand);\r\n\r\n    // Limit history to 50 commands\r\n    if (newHistory.length > 50) {\r\n      newHistory.shift();\r\n      setCurrentIndex(49);\r\n    } else {\r\n      setCurrentIndex(newHistory.length - 1);\r\n    }\r\n\r\n    setHistory(newHistory);\r\n  }, [history, currentIndex]);\r\n\r\n  const undo = useCallback(() => {\r\n    if (currentIndex < 0) return;\r\n\r\n    const command = history[currentIndex];\r\n    command.undo();\r\n    setCurrentIndex(currentIndex - 1);\r\n  }, [history, currentIndex]);\r\n\r\n  const redo = useCallback(() => {\r\n    if (currentIndex >= history.length - 1) return;\r\n\r\n    const nextIndex = currentIndex + 1;\r\n    const command = history[nextIndex];\r\n    command.execute();\r\n    setCurrentIndex(nextIndex);\r\n  }, [history, currentIndex]);\r\n\r\n  const canUndo = currentIndex >= 0;\r\n  const canRedo = currentIndex < history.length - 1;\r\n\r\n  const clear = useCallback(() => {\r\n    setHistory([]);\r\n    setCurrentIndex(-1);\r\n  }, []);\r\n\r\n  return {\r\n    execute,\r\n    undo,\r\n    redo,\r\n    canUndo,\r\n    canRedo,\r\n    clear,\r\n  };\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAQO,MAAM,aAAa;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAmB,EAAE;IAC3D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC,CAAC;IAElD,MAAM,UAAU,IAAA,oNAAW,EAAC,CAAC;QAC3B,MAAM,aAA6B;YACjC,GAAG,OAAO;YACV,WAAW,KAAK,GAAG;QACrB;QAEA,sBAAsB;QACtB,WAAW,OAAO;QAElB,4BAA4B;QAC5B,MAAM,aAAa,QAAQ,KAAK,CAAC,GAAG,eAAe;QACnD,WAAW,IAAI,CAAC;QAEhB,+BAA+B;QAC/B,IAAI,WAAW,MAAM,GAAG,IAAI;YAC1B,WAAW,KAAK;YAChB,gBAAgB;QAClB,OAAO;YACL,gBAAgB,WAAW,MAAM,GAAG;QACtC;QAEA,WAAW;IACb,GAAG;QAAC;QAAS;KAAa;IAE1B,MAAM,OAAO,IAAA,oNAAW,EAAC;QACvB,IAAI,eAAe,GAAG;QAEtB,MAAM,UAAU,OAAO,CAAC,aAAa;QACrC,QAAQ,IAAI;QACZ,gBAAgB,eAAe;IACjC,GAAG;QAAC;QAAS;KAAa;IAE1B,MAAM,OAAO,IAAA,oNAAW,EAAC;QACvB,IAAI,gBAAgB,QAAQ,MAAM,GAAG,GAAG;QAExC,MAAM,YAAY,eAAe;QACjC,MAAM,UAAU,OAAO,CAAC,UAAU;QAClC,QAAQ,OAAO;QACf,gBAAgB;IAClB,GAAG;QAAC;QAAS;KAAa;IAE1B,MAAM,UAAU,gBAAgB;IAChC,MAAM,UAAU,eAAe,QAAQ,MAAM,GAAG;IAEhD,MAAM,QAAQ,IAAA,oNAAW,EAAC;QACxB,WAAW,EAAE;QACb,gBAAgB,CAAC;IACnB,GAAG,EAAE;IAEL,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/hooks/useKeyboardShortcuts.ts"],"sourcesContent":["import { useEffect } from \"react\";\r\n\r\ninterface KeyboardShortcutHandlers {\r\n  onUndo?: () => void;\r\n  onRedo?: () => void;\r\n  onDelete?: () => void;\r\n  onDuplicate?: () => void;\r\n  onCopy?: () => void;\r\n  onPaste?: () => void;\r\n  onSave?: () => void;\r\n}\r\n\r\nexport const useKeyboardShortcuts = (handlers: KeyboardShortcutHandlers) => {\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      const isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;\r\n      const cmdOrCtrl = isMac ? e.metaKey : e.ctrlKey;\r\n\r\n      // Prevent default for our shortcuts\r\n      const shouldPreventDefault = cmdOrCtrl && (\r\n        e.key === 'z' || \r\n        e.key === 'y' || \r\n        e.key === 'd' || \r\n        e.key === 'c' || \r\n        e.key === 'v' ||\r\n        e.key === 's'\r\n      );\r\n\r\n      if (shouldPreventDefault) {\r\n        e.preventDefault();\r\n      }\r\n\r\n      // Undo: Cmd+Z / Ctrl+Z\r\n      if (cmdOrCtrl && e.key === 'z' && !e.shiftKey && handlers.onUndo) {\r\n        handlers.onUndo();\r\n        return;\r\n      }\r\n\r\n      // Redo: Cmd+Shift+Z / Ctrl+Y\r\n      if ((cmdOrCtrl && e.key === 'z' && e.shiftKey) || (cmdOrCtrl && e.key === 'y')) {\r\n        if (handlers.onRedo) {\r\n          handlers.onRedo();\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Delete: Backspace or Delete\r\n      if ((e.key === 'Backspace' || e.key === 'Delete') && !isInputElement(e.target)) {\r\n        if (handlers.onDelete) {\r\n          e.preventDefault();\r\n          handlers.onDelete();\r\n        }\r\n        return;\r\n      }\r\n\r\n      // Duplicate: Cmd+D / Ctrl+D\r\n      if (cmdOrCtrl && e.key === 'd' && handlers.onDuplicate) {\r\n        handlers.onDuplicate();\r\n        return;\r\n      }\r\n\r\n      // Copy: Cmd+C / Ctrl+C\r\n      if (cmdOrCtrl && e.key === 'c' && !isInputElement(e.target) && handlers.onCopy) {\r\n        handlers.onCopy();\r\n        return;\r\n      }\r\n\r\n      // Paste: Cmd+V / Ctrl+V\r\n      if (cmdOrCtrl && e.key === 'v' && !isInputElement(e.target) && handlers.onPaste) {\r\n        handlers.onPaste();\r\n        return;\r\n      }\r\n\r\n      // Save: Cmd+S / Ctrl+S\r\n      if (cmdOrCtrl && e.key === 's' && handlers.onSave) {\r\n        handlers.onSave();\r\n        return;\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, [handlers]);\r\n};\r\n\r\n// Helper to check if target is an input element\r\nconst isInputElement = (target: EventTarget | null): boolean => {\r\n  if (!target) return false;\r\n  const element = target as HTMLElement;\r\n  return (\r\n    element.tagName === 'INPUT' ||\r\n    element.tagName === 'TEXTAREA' ||\r\n    element.isContentEditable\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAYO,MAAM,uBAAuB,CAAC;IACnC,IAAA,kNAAS,EAAC;QACR,MAAM,gBAAgB,CAAC;YACrB,MAAM,QAAQ,UAAU,QAAQ,CAAC,WAAW,GAAG,OAAO,CAAC,UAAU;YACjE,MAAM,YAAY,QAAQ,EAAE,OAAO,GAAG,EAAE,OAAO;YAE/C,oCAAoC;YACpC,MAAM,uBAAuB,aAAa,CACxC,EAAE,GAAG,KAAK,OACV,EAAE,GAAG,KAAK,OACV,EAAE,GAAG,KAAK,OACV,EAAE,GAAG,KAAK,OACV,EAAE,GAAG,KAAK,OACV,EAAE,GAAG,KAAK,GACZ;YAEA,IAAI,sBAAsB;gBACxB,EAAE,cAAc;YAClB;YAEA,uBAAuB;YACvB,IAAI,aAAa,EAAE,GAAG,KAAK,OAAO,CAAC,EAAE,QAAQ,IAAI,SAAS,MAAM,EAAE;gBAChE,SAAS,MAAM;gBACf;YACF;YAEA,6BAA6B;YAC7B,IAAI,AAAC,aAAa,EAAE,GAAG,KAAK,OAAO,EAAE,QAAQ,IAAM,aAAa,EAAE,GAAG,KAAK,KAAM;gBAC9E,IAAI,SAAS,MAAM,EAAE;oBACnB,SAAS,MAAM;gBACjB;gBACA;YACF;YAEA,8BAA8B;YAC9B,IAAI,CAAC,EAAE,GAAG,KAAK,eAAe,EAAE,GAAG,KAAK,QAAQ,KAAK,CAAC,eAAe,EAAE,MAAM,GAAG;gBAC9E,IAAI,SAAS,QAAQ,EAAE;oBACrB,EAAE,cAAc;oBAChB,SAAS,QAAQ;gBACnB;gBACA;YACF;YAEA,4BAA4B;YAC5B,IAAI,aAAa,EAAE,GAAG,KAAK,OAAO,SAAS,WAAW,EAAE;gBACtD,SAAS,WAAW;gBACpB;YACF;YAEA,uBAAuB;YACvB,IAAI,aAAa,EAAE,GAAG,KAAK,OAAO,CAAC,eAAe,EAAE,MAAM,KAAK,SAAS,MAAM,EAAE;gBAC9E,SAAS,MAAM;gBACf;YACF;YAEA,wBAAwB;YACxB,IAAI,aAAa,EAAE,GAAG,KAAK,OAAO,CAAC,eAAe,EAAE,MAAM,KAAK,SAAS,OAAO,EAAE;gBAC/E,SAAS,OAAO;gBAChB;YACF;YAEA,uBAAuB;YACvB,IAAI,aAAa,EAAE,GAAG,KAAK,OAAO,SAAS,MAAM,EAAE;gBACjD,SAAS,MAAM;gBACf;YACF;QACF;QAEA,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;IACrD,GAAG;QAAC;KAAS;AACf;AAEA,gDAAgD;AAChD,MAAM,iBAAiB,CAAC;IACtB,IAAI,CAAC,QAAQ,OAAO;IACpB,MAAM,UAAU;IAChB,OACE,QAAQ,OAAO,KAAK,WACpB,QAAQ,OAAO,KAAK,cACpB,QAAQ,iBAAiB;AAE7B"}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/lib/schema-service.ts"],"sourcesContent":["import { supabase } from \"@/integrations/supabase/client\";\r\n\r\n// Remote API base for testing\r\nconst REMOTE_API_BASE = \"https://apps4x-framework.azurewebsites.net/api/v1\";\r\n// Default DataAreaId for testing\r\nconst DEFAULT_DATA_AREA = \"LGE0000001\";\r\n\r\n// API Authentication Constants\r\nexport let AUTH_TOKEN = \"eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySWQiOiJhLmh5ZGVyIiwiTmFtZSI6Ikh5ZGVyIEFsaSIsIkVtYWlsIjoiaHlkZXJAZmFhenRlY2hzb2x1dGlvbnMuY29tIiwiTW9iaWxlTnVtYmVyIjoiMDk4NzY1NDMyMSIsIkNvbXBhbnlJZCI6IkxHRTAwMDAwMDEiLCJleHAiOjE3NjcwNzIyMTYsImlzcyI6ImFwcHM0eC5jb20iLCJhdWQiOiJhcHBzNHguY29tIn0.b5jc5d6zpx5_mY_fYH3oQS7_4RxMXYZyYNFTUf4Zk8Y\";\r\n\r\nexport const setAuthToken = (token: string) => {\r\n  AUTH_TOKEN = token;\r\n};\r\nconst APP_ID = \"Studio\";\r\nconst USER_ID = \"a.hyder\";\r\nconst CLIENT_PAGE = \"/LGE0000001/Studio/a530d8d753214ac7beaf6207aacbbd4c\";\r\n\r\n// Helper to get authenticated headers\r\nconst getHeaders = (extraHeaders: Record<string, string> = {}) => ({\r\n  \"Accept\": \"application/json, text/plain, */*\",\r\n  \"Authorization\": `Bearer ${AUTH_TOKEN}`,\r\n  \"appid\": APP_ID,\r\n  \"companyid\": DEFAULT_DATA_AREA,\r\n  \"user-id\": USER_ID,\r\n  \"X-Client-Page\": CLIENT_PAGE,\r\n  ...extraHeaders\r\n});\r\n\r\nconst fetchWithAuth = async (url: string, options: RequestInit = {}) => {\r\n  try {\r\n    const res = await fetch(url, options);\r\n    if (res.status === 401) {\r\n      console.error(\"Unauthorized access (401), signing out...\");\r\n      await supabase.auth.signOut();\r\n      window.location.href = \"/auth\";\r\n      throw new Error(\"Unauthorized\");\r\n    }\r\n    return res;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport interface MetaObject {\r\n  Id: string;\r\n  Type: string;\r\n  Name: string;\r\n  Status: string;\r\n  Data: string; // JSON string of EntityData\r\n  DataAreaId?: string;\r\n  RecId?: number;\r\n}\r\n\r\nexport interface EntityField {\r\n  Id: string;\r\n  Name: string;\r\n  Label: string;\r\n  DataType: string;\r\n  IsRequired?: boolean;\r\n  DefaultValue?: any;\r\n  Position?: number;\r\n  EntityId?: string;\r\n  CollectionId?: string;\r\n}\r\n\r\nexport interface EntityData {\r\n  EntityId: string;\r\n  CollectionId?: string;\r\n  Name: string;\r\n  Description: string | null;\r\n  TableName: string;\r\n  Fields: EntityField[];\r\n}\r\n\r\n// Helper to convert internal format to UI format\r\nconst mapEntity = (mo: MetaObject) => {\r\n  try {\r\n    const data: EntityData = JSON.parse(mo.Data);\r\n    return {\r\n      id: mo.Id,\r\n      name: data.TableName,\r\n      display_name: data.Name,\r\n      description: data.Description,\r\n      is_published: mo.Status === \"Published\",\r\n      dataAreaId: mo.DataAreaId,\r\n      recId: mo.RecId,\r\n      collectionId: data.CollectionId\r\n    };\r\n  } catch (e) {\r\n    console.error(\"Error parsing entity data:\", mo);\r\n    return {\r\n      id: mo.Id,\r\n      name: mo.Name,\r\n      display_name: mo.Name,\r\n      description: \"\",\r\n      is_published: mo.Status === \"Published\",\r\n      dataAreaId: mo.DataAreaId,\r\n      recId: mo.RecId,\r\n      collectionId: \"\"\r\n    };\r\n  }\r\n};\r\n\r\nexport const getEntities = async () => {\r\n  try {\r\n    const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}?type=Entity`, {\r\n      headers: getHeaders()\r\n    });\r\n    const data = await res.json();\r\n    // API might return a single object or an array\r\n    const metaobjects = Array.isArray(data.Data) ? data.Data : [data.Data];\r\n    const filterentity = metaobjects.filter((mo: MetaObject) => (mo.RecId ?? 0) >= 709);\r\n    return filterentity.map(mapEntity);\r\n  } catch (error) {\r\n    console.error(\"Error fetching entities:\", error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const getEntity = async (id: string) => {\r\n  try {\r\n    // If id is numeric, it's likely a RecId, otherwise use as is\r\n    // const targetId = id === '9ca55aad170e45b9835adf7e5983161a' ? '709' : id;\r\n    let entity = id.replace(/-/g, \"\");\r\n    const query = `byobjectId?objectId=${entity}`\r\n    const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}/${query}`, {\r\n      headers: getHeaders()\r\n    });\r\n    const mo = await res.json();\r\n    return mapEntity(mo);\r\n  } catch (error) {\r\n    console.error(`Error fetching entity ${id}:`, error);\r\n    return null;\r\n  }\r\n};\r\n\r\nexport const getFields = async (entityId: string) => {\r\n  try {\r\n    let entity = entityId.replace(/-/g, \"\");\r\n    const query = `byobjectId?objectId=${entity}`\r\n    const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}/${query}`, {\r\n      headers: getHeaders()\r\n    });\r\n    const mo = await res.json();\r\n\r\n    if (!mo) return [];\r\n    const entityData: EntityData = JSON.parse(mo.Data);\r\n    return (entityData.Fields || []).map((f) => ({\r\n      id: f.Id,\r\n      entity_id: entityId,\r\n      name: f.Name,\r\n      display_name: f.Label,\r\n      field_type: f.DataType,\r\n      is_required: f.IsRequired,\r\n      default_value: f.DefaultValue,\r\n      position: f.Position,\r\n    }));\r\n  } catch (error) {\r\n    console.error(`Error fetching fields for entity ${entityId}:`, error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const createEntity = async (entity: { name: string; display_name: string; description?: string }) => {\r\n  try {\r\n    const parentId = \"a530d8d753214ac7beaf6207aacbbd4c\";\r\n    const appId = \"a530d8d753214ac7beaf6207aacbbd4c\";\r\n    const connectorId = \"eb6e7a03f0ed4e09b259fc2abf4507e2\";\r\n\r\n    const dataObj = {\r\n      Name: entity.name,\r\n      TableName: entity.name,\r\n      Description: entity.description || entity.display_name,\r\n      Image: null,\r\n      TypeName: entity.name,\r\n      CollectionType: \"Single\",\r\n      ConnectorId: connectorId,\r\n      Fields: null,\r\n      IsWorkFlow: null,\r\n      AppId: appId\r\n    };\r\n\r\n    const payload = {\r\n      Type: \"Collection\",\r\n      Data: JSON.stringify(dataObj),\r\n      Name: entity.name,\r\n      ParentId: parentId,\r\n      ParentType: \"Apps\",\r\n      AppId: appId\r\n    };\r\n\r\n    const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}/create`, {\r\n      method: 'POST',\r\n      headers: getHeaders({ 'Content-Type': 'application/json' }),\r\n      body: JSON.stringify(payload)\r\n    });\r\n    return { sucess: true, res: await res.json() }\r\n  } catch (error) {\r\n    console.error(\"Error creating entity:\", error);\r\n    return { success: false, error: \"Failed to create entity\" };\r\n  }\r\n};\r\n\r\nexport const updateEntity = async (id: string, updates: any) => {\r\n  try {\r\n    const targetId = id === '9ca55aad170e45b9835adf7e5983161a' ? '709' : id;\r\n    const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}/${targetId}`, {\r\n      method: 'PUT',\r\n      headers: getHeaders({ 'Content-Type': 'application/json' }),\r\n      body: JSON.stringify(updates)\r\n    });\r\n    return { sucess: true, res: await res.json() }\r\n  } catch (error) {\r\n    console.error(`Error updating entity ${id}:`, error);\r\n    return { success: false, error: \"Failed to update entity\" };\r\n  }\r\n};\r\n\r\nexport const deleteEntity = async (id: string) => {\r\n  try {\r\n    const targetId = id === '9ca55aad170e45b9835adf7e5983161a' ? '709' : id;\r\n    const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}/${targetId}`, {\r\n      method: 'DELETE',\r\n      headers: getHeaders()\r\n    });\r\n    return await res.json();\r\n  } catch (error) {\r\n    console.error(`Error deleting entity ${id}:`, error);\r\n    return { success: false, error: \"Failed to delete entity\" };\r\n  }\r\n};\r\n\r\nexport const saveFields = async (entityId: string, fields: any[], entity: any) => {\r\n  try {\r\n    const collectionId = entity?.collectionId || \"6e8ef8e548704cfb90a01c1f597fb264\";\r\n    const remoteId = entity?.recId || (entityId === '9ca55aad170e45b9835adf7e5983161a' ? '709' : entityId);\r\n\r\n    // Fetch existing fields to identify new ones vs updates\r\n    const existingFields = await getFields(entityId);\r\n    const existingMap = new Map(existingFields.map(f => [f.id, f]));\r\n    const existingNames = new Set(existingFields.map(f => (f.name || \"\").toLowerCase()));\r\n\r\n    const toCreate = [];\r\n    const toUpdate = [];\r\n\r\n    for (const f of fields) {\r\n      if (f.id && existingMap.has(f.id)) {\r\n        // Check for changes\r\n        const existing = existingMap.get(f.id);\r\n\r\n        if (existing) {\r\n          const hasChanges =\r\n            existing.name !== f.name ||\r\n            existing.display_name !== f.display_name ||\r\n            existing.field_type !== f.field_type ||\r\n            existing.is_required !== f.is_required ||\r\n            existing.default_value !== f.default_value ||\r\n            existing.position !== f.position;\r\n\r\n          if (hasChanges) {\r\n            toUpdate.push(f);\r\n          }\r\n        }\r\n      } else {\r\n        // New field: Check name to prevent duplicates if ID is missing/temp\r\n        const fieldName = (f.name || f.Name || \"\").toLowerCase();\r\n        if (!existingNames.has(fieldName)) {\r\n          toCreate.push(f);\r\n        }\r\n      }\r\n    }\r\n\r\n    const toDelete = existingFields.filter(ef => !fields.some(f => f.name === ef.name));\r\n\r\n    const results = { success: true, creates: null, updates: null, deletes: null };\r\n\r\n    // Handle Updates\r\n    if (toUpdate.length > 0) {\r\n      const updatePayload = toUpdate.map(f => ({\r\n        Id: f.id,\r\n        Label: f.display_name || f.Label,\r\n        Name: f.name || f.Name,\r\n        DataType: f.field_type || f.DataType || \"String\",\r\n        IsRequired: f.is_required,\r\n        DefaultValue: f.default_value,\r\n        Position: f.position,\r\n        EntityId: entity?.id || entityId,\r\n        CollectionId: collectionId\r\n      }));\r\n\r\n      const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}/${remoteId}/fields/update`, {\r\n        method: 'PUT',\r\n        headers: getHeaders({ 'Content-Type': 'application/json' }),\r\n        body: JSON.stringify(updatePayload)\r\n      });\r\n      results.updates = await res.json();\r\n    }\r\n\r\n    // Handle Creates\r\n    if (toCreate.length > 0) {\r\n      // Filter out potential duplicates by name if we want to be extra safe, trying to respect implicit logic\r\n      // But typically we trust the list provided.\r\n      const createPayload = toCreate.map(f => ({\r\n        Label: f.display_name || f.Label,\r\n        Name: f.name || f.Name,\r\n        DataType: f.field_type || f.DataType || \"String\",\r\n        IsRequired: f.is_required,\r\n        DefaultValue: f.default_value,\r\n        Position: f.position,\r\n        EntityId: entity?.id || entityId,\r\n        CollectionId: collectionId\r\n      }));\r\n\r\n      const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}/${remoteId}/fields/create`, {\r\n        method: 'POST',\r\n        headers: getHeaders({ 'Content-Type': 'application/json' }),\r\n        body: JSON.stringify(createPayload)\r\n      });\r\n      results.creates = await res.json();\r\n    }\r\n\r\n    // Handle Deletes\r\n    if (toDelete.length > 0) {\r\n      const deletePayload = toDelete.map(f => f.name);\r\n\r\n      const res = await fetchWithAuth(`${REMOTE_API_BASE}/metaobject/${DEFAULT_DATA_AREA}/${remoteId}/fields/delete`, {\r\n        method: 'DELETE',\r\n        headers: getHeaders({ 'Content-Type': 'application/json' }),\r\n        body: JSON.stringify(deletePayload)\r\n      });\r\n      results.deletes = await res.json();\r\n    }\r\n\r\n    return { success: true, details: results };\r\n  } catch (error) {\r\n    console.error(`Error saving fields for entity ${entityId}:`, error);\r\n    return { success: false, error: \"Failed to save fields\" };\r\n  }\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 528, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/lib/static-generator.ts"],"sourcesContent":["\r\nimport { Tables } from \"@/integrations/supabase/types\";\r\n\r\ntype Page = Tables<\"pages\">;\r\ntype PageRow = Tables<\"page_rows\">;\r\ntype PageComponent = Tables<\"page_components\">;\r\n\r\nexport const generateStaticHtml = (\r\n    page: Page,\r\n    rows: PageRow[],\r\n    components: PageComponent[]\r\n): string => {\r\n    const title = page.title || \"Untitled Page\";\r\n\r\n    // Sort rows and components\r\n    const sortedRows = [...rows].sort((a, b) => a.position - b.position);\r\n\r\n    const generateComponentHtml = (component: PageComponent): string => {\r\n        const { component_type, content, styles } = component;\r\n        const styleObj = (styles as any) || {};\r\n\r\n        let htmlContent = \"\";\r\n\r\n        // Parse content if it's wrapped\r\n        let parsedContent = content as any;\r\n        if (parsedContent && typeof parsedContent === 'object' && 'content' in parsedContent && Object.keys(parsedContent).length === 1) {\r\n            parsedContent = parsedContent.content;\r\n        }\r\n\r\n        switch (component_type) {\r\n            case \"heading\":\r\n                const level = parsedContent.level || \"h2\";\r\n                const text = parsedContent.text || \"\";\r\n                const headingClasses = {\r\n                    h1: \"text-4xl font-bold mb-4\",\r\n                    h2: \"text-3xl font-bold mb-3\",\r\n                    h3: \"text-2xl font-semibold mb-2\",\r\n                    h4: \"text-xl font-semibold mb-2\",\r\n                    h5: \"text-lg font-medium mb-1\",\r\n                    h6: \"text-base font-medium mb-1\",\r\n                };\r\n                const hClass = headingClasses[level as keyof typeof headingClasses] || headingClasses.h2;\r\n                htmlContent = `<${level} class=\"${hClass}\">${text}</${level}>`;\r\n                break;\r\n\r\n            case \"paragraph\":\r\n                htmlContent = `<p class=\"text-base leading-relaxed whitespace-pre-wrap mb-4\">${parsedContent.text || \"\"}</p>`;\r\n                break;\r\n\r\n            case \"image\":\r\n                if (parsedContent.url) {\r\n                    htmlContent = `<img src=\"${parsedContent.url}\" alt=\"${parsedContent.alt || ''}\" class=\"w-full h-auto rounded-lg shadow-md mb-4\" />`;\r\n                }\r\n                break;\r\n\r\n            case \"button\":\r\n                htmlContent = `\r\n          <div class=\"mb-4\">\r\n            <a href=\"${parsedContent.link || '#'}\" class=\"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2\">\r\n              ${parsedContent.text || \"Click me\"}\r\n            </a>\r\n          </div>`;\r\n                break;\r\n\r\n            case \"link\":\r\n                htmlContent = `<a href=\"${parsedContent.url || '#'}\" class=\"text-primary hover:underline mb-4 inline-block\">${parsedContent.text || \"Link\"}</a>`;\r\n                break;\r\n\r\n            case \"divider\":\r\n                htmlContent = `<hr class=\"my-6 border-gray-200\" />`;\r\n                break;\r\n\r\n            case \"spacer\":\r\n                const heights = {\r\n                    small: \"h-5\",\r\n                    medium: \"h-10\",\r\n                    large: \"h-20\",\r\n                };\r\n                const h = heights[parsedContent.height as keyof typeof heights] || heights.medium;\r\n                htmlContent = `<div class=\"${h}\"></div>`;\r\n                break;\r\n\r\n            case \"quote\":\r\n                htmlContent = `\r\n          <blockquote class=\"border-l-4 border-gray-300 pl-4 py-2 italic mb-4\">\r\n            <p class=\"text-lg text-gray-700\">${parsedContent.text || \"\"}</p>\r\n            ${parsedContent.author ? `<footer class=\"mt-2 text-sm text-gray-500\">â€” ${parsedContent.author}</footer>` : ''}\r\n          </blockquote>`;\r\n                break;\r\n\r\n            case \"list\":\r\n                const items = (parsedContent.items || \"\").split(\"\\n\").filter((i: string) => i.trim());\r\n                const tag = parsedContent.type === \"numbered\" ? \"ol\" : \"ul\";\r\n                const listClass = parsedContent.type === \"numbered\" ? \"list-decimal\" : \"list-disc\";\r\n                htmlContent = `\r\n          <${tag} class=\"${listClass} list-inside space-y-1 mb-4 pl-4\">\r\n            ${items.map((item: string) => `<li>${item}</li>`).join('')}\r\n          </${tag}>`;\r\n                break;\r\n\r\n            case \"code\":\r\n                htmlContent = `\r\n          <div class=\"relative mb-4 bg-gray-100 p-4 rounded-lg overflow-x-auto\">\r\n            ${parsedContent.language ? `<div class=\"absolute top-2 right-2 text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded\">${parsedContent.language}</div>` : ''}\r\n            <pre><code class=\"text-sm font-mono\">${parsedContent.code || \"\"}</code></pre>\r\n          </div>`;\r\n                break;\r\n\r\n            case \"card\":\r\n                htmlContent = `\r\n          <div class=\"rounded-lg border bg-card text-card-foreground shadow-sm mb-4 overflow-hidden\">\r\n             ${parsedContent.imageUrl ? `<img src=\"${parsedContent.imageUrl}\" class=\"w-full h-48 object-cover\" alt=\"${parsedContent.title || ''}\" />` : ''}\r\n            <div class=\"p-6\">\r\n              <h3 class=\"text-2xl font-semibold leading-none tracking-tight mb-2\">${parsedContent.title || 'Card Title'}</h3>\r\n              <p class=\"text-sm text-muted-foreground mb-4\">${parsedContent.description || ''}</p>\r\n              ${parsedContent.buttonText ? `\r\n                <a href=\"${parsedContent.buttonLink || '#'}\" class=\"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 bg-secondary text-secondary-foreground hover:bg-secondary/80 h-9 px-3\">\r\n                  ${parsedContent.buttonText}\r\n                </a>\r\n              ` : ''}\r\n            </div>\r\n          </div>`;\r\n                break;\r\n\r\n            // Complex components placeholders\r\n            case \"entity-list\":\r\n            case \"entity-detail\":\r\n            case \"query\":\r\n            case \"datasource\":\r\n            case \"chart\":\r\n                htmlContent = `\r\n          <div class=\"p-4 border border-dashed border-gray-300 rounded-lg bg-gray-50 mb-4 text-center\">\r\n            <p class=\"text-sm text-gray-500\">Dynamic Content (${component_type}) - Not available in static export</p>\r\n          </div>`;\r\n                break;\r\n\r\n            default:\r\n                htmlContent = `<!-- Unsupported component: ${component_type} -->`;\r\n        }\r\n\r\n        return htmlContent;\r\n    };\r\n\r\n    const generateRowHtml = (row: PageRow): string => {\r\n        const rowComponents = components\r\n            .filter(c => c.row_id === row.id)\r\n            .sort((a, b) => a.position - b.position);\r\n\r\n        // Create columns\r\n        let columnsHtml = \"\";\r\n        for (let i = 0; i < row.columns; i++) {\r\n            const colComponents = rowComponents.filter(c => c.column_index === i);\r\n            const colContent = colComponents.map(generateComponentHtml).join(\"\\n\");\r\n            columnsHtml += `\r\n        <div class=\"flex flex-col gap-4\">\r\n          ${colContent}\r\n        </div>\r\n      `;\r\n        }\r\n\r\n        // Grid Setup\r\n        // Using simple CSS grid for columns\r\n        return `\r\n      <div class=\"grid grid-cols-1 md:grid-cols-${row.columns} gap-6 mb-8 w-full max-w-7xl mx-auto px-4\">\r\n        ${columnsHtml}\r\n      </div>\r\n    `;\r\n    };\r\n\r\n    const bodyContent = sortedRows.map(generateRowHtml).join(\"\\n\");\r\n\r\n    return `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>${title}</title>\r\n    <script src=\"https://cdn.tailwindcss.com\"></script>\r\n    <script>\r\n      tailwind.config = {\r\n        theme: {\r\n          extend: {\r\n            colors: {\r\n              border: \"hsl(var(--border))\",\r\n              input: \"hsl(var(--input))\",\r\n              ring: \"hsl(var(--ring))\",\r\n              background: \"hsl(var(--background))\",\r\n              foreground: \"hsl(var(--foreground))\",\r\n              primary: {\r\n                DEFAULT: \"hsl(var(--primary))\",\r\n                foreground: \"hsl(var(--primary-foreground))\",\r\n              },\r\n              secondary: {\r\n                DEFAULT: \"hsl(var(--secondary))\",\r\n                foreground: \"hsl(var(--secondary-foreground))\",\r\n              },\r\n              destructive: {\r\n                DEFAULT: \"hsl(var(--destructive))\",\r\n                foreground: \"hsl(var(--destructive-foreground))\",\r\n              },\r\n              muted: {\r\n                DEFAULT: \"hsl(var(--muted))\",\r\n                foreground: \"hsl(var(--muted-foreground))\",\r\n              },\r\n              accent: {\r\n                DEFAULT: \"hsl(var(--accent))\",\r\n                foreground: \"hsl(var(--accent-foreground))\",\r\n              },\r\n              popover: {\r\n                DEFAULT: \"hsl(var(--popover))\",\r\n                foreground: \"hsl(var(--popover-foreground))\",\r\n              },\r\n              card: {\r\n                DEFAULT: \"hsl(var(--card))\",\r\n                foreground: \"hsl(var(--card-foreground))\",\r\n              },\r\n            },\r\n          },\r\n        },\r\n      }\r\n    </script>\r\n    <style>\r\n      :root {\r\n        --background: 0 0% 100%;\r\n        --foreground: 222.2 84% 4.9%;\r\n        --card: 0 0% 100%;\r\n        --card-foreground: 222.2 84% 4.9%;\r\n        --popover: 0 0% 100%;\r\n        --popover-foreground: 222.2 84% 4.9%;\r\n        --primary: 222.2 47.4% 11.2%;\r\n        --primary-foreground: 210 40% 98%;\r\n        --secondary: 210 40% 96.1%;\r\n        --secondary-foreground: 222.2 47.4% 11.2%;\r\n        --muted: 210 40% 96.1%;\r\n        --muted-foreground: 215.4 16.3% 46.9%;\r\n        --accent: 210 40% 96.1%;\r\n        --accent-foreground: 222.2 47.4% 11.2%;\r\n        --destructive: 0 84.2% 60.2%;\r\n        --destructive-foreground: 210 40% 98%;\r\n        --border: 214.3 31.8% 91.4%;\r\n        --input: 214.3 31.8% 91.4%;\r\n        --ring: 222.2 84% 4.9%;\r\n        --radius: 0.5rem;\r\n      }\r\n      body {\r\n        font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif;\r\n        color: hsl(var(--foreground));\r\n        background-color: hsl(var(--background));\r\n      }\r\n    </style>\r\n</head>\r\n<body class=\"min-h-screen bg-background text-foreground py-10\">\r\n    <main>\r\n        ${bodyContent}\r\n    </main>\r\n</body>\r\n</html>`;\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 760, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/views/PageEditor.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter, useParams } from \"next/navigation\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { useClipboard } from \"@/contexts/ClipboardContext\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { toast } from \"sonner\";\r\nimport { ArrowLeft, Eye, EyeOff, Monitor, Undo, Redo, List, Shapes } from \"lucide-react\";\r\nimport { ComponentsSidebar, ComponentType } from \"@/components/editor/ComponentsSidebar\";\r\nimport { SidebarToggle } from \"@/components/editor/SidebarToggle\";\r\nimport { PagePreviewModal } from \"@/components/editor/PagePreviewModal\";\r\nimport { GridCanvas } from \"@/components/editor/GridCanvas\";\r\nimport { Tables } from \"@/integrations/supabase/types\";\r\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\r\nimport { DndContext, DragEndEvent, DragOverEvent, DragStartEvent, pointerWithin } from \"@dnd-kit/core\";\r\nimport { useHistory } from \"@/hooks/useHistory\";\r\nimport { useKeyboardShortcuts } from \"@/hooks/useKeyboardShortcuts\";\r\nimport { DeviceFrame } from \"@/components/editor/DeviceFrame\";\r\nimport { generateStaticHtml } from \"@/lib/static-generator\";\r\n\r\ntype Page = Tables<\"pages\">;\r\ntype PageRow = Tables<\"page_rows\">;\r\ntype PageComponent = Tables<\"page_components\">;\r\ntype Layout = Tables<\"layouts\">;\r\ntype LayoutRow = Tables<\"layout_rows\">;\r\ntype LayoutComponent = Tables<\"layout_components\">;\r\n\r\nconst PageEditor = () => {\r\n  const params = useParams();\r\n  const pageId = params.pageId as string;\r\n  const router = useRouter();\r\n  const { copiedComponent } = useClipboard();\r\n  const [page, setPage] = useState<Page | null>(null);\r\n  const [rows, setRows] = useState<PageRow[]>([]);\r\n  const [components, setComponents] = useState<PageComponent[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [activeComponentType, setActiveComponentType] = useState<ComponentType | null>(null);\r\n  const [layouts, setLayouts] = useState<Layout[]>([]);\r\n  const [previewLayout, setPreviewLayout] = useState<Layout | null>(null);\r\n  const [previewLayoutRows, setPreviewLayoutRows] = useState<LayoutRow[]>([]);\r\n  const [previewLayoutComponents, setPreviewLayoutComponents] = useState<LayoutComponent[]>([]);\r\n  const [widgetData, setWidgetData] = useState<Map<string, { rows: any[]; components: any[] }>>(new Map());\r\n  const [selectedComponent, setSelectedComponent] = useState<string | null>(null);\r\n  const [showOutline, setShowOutline] = useState(false);\r\n\r\n  const history = useHistory();\r\n\r\n  useKeyboardShortcuts({\r\n    onUndo: () => history.canUndo && history.undo(),\r\n    onRedo: () => history.canRedo && history.redo(),\r\n    onDelete: () => selectedComponent && handleDeleteComponent(selectedComponent),\r\n    onDuplicate: () => selectedComponent && handleDuplicateComponent(selectedComponent),\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadPage();\r\n    loadLayouts();\r\n  }, [pageId]);\r\n\r\n  const loadLayouts = async () => {\r\n    const { data } = await supabase\r\n      .from(\"layouts\")\r\n      .select(\"*\")\r\n      .eq(\"is_published\", true)\r\n      .order(\"title\");\r\n\r\n    setLayouts(data || []);\r\n  };\r\n\r\n  const loadPage = async () => {\r\n    if (!pageId) return;\r\n\r\n    const { data: pageData, error: pageError } = await supabase\r\n      .from(\"pages\")\r\n      .select(\"*\")\r\n      .eq(\"id\", pageId)\r\n      .single();\r\n\r\n    if (pageError) {\r\n      toast.error(\"Failed to load page\");\r\n      router.push(\"/admin\");\r\n      return;\r\n    }\r\n\r\n    const { data: rowsData } = await supabase\r\n      .from(\"page_rows\")\r\n      .select(\"*\")\r\n      .eq(\"page_id\", pageId)\r\n      .order(\"position\");\r\n\r\n    const { data: componentsData } = await supabase\r\n      .from(\"page_components\")\r\n      .select(\"*\")\r\n      .eq(\"page_id\", pageId)\r\n      .order(\"position\");\r\n\r\n    setPage(pageData);\r\n    setRows(rowsData || []);\r\n    setComponents(componentsData || []);\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleAddRow = async () => {\r\n    if (!pageId) return;\r\n\r\n    const { data, error } = await supabase\r\n      .from(\"page_rows\")\r\n      .insert({\r\n        page_id: pageId,\r\n        position: rows.length,\r\n        columns: 1,\r\n      })\r\n      .select()\r\n      .single();\r\n\r\n    if (error) {\r\n      toast.error(\"Failed to add row\");\r\n      return;\r\n    }\r\n\r\n    setRows([...rows, data]);\r\n    toast.success(\"Row added\");\r\n  };\r\n\r\n  const handleDeleteRow = async (rowId: string) => {\r\n    if (!confirm(\"Delete this row and all its components?\")) return;\r\n\r\n    const { error } = await supabase.from(\"page_rows\").delete().eq(\"id\", rowId);\r\n\r\n    if (error) {\r\n      toast.error(\"Failed to delete row\");\r\n      return;\r\n    }\r\n\r\n    setRows(rows.filter((r) => r.id !== rowId));\r\n    setComponents(components.filter((c) => c.row_id !== rowId));\r\n    toast.success(\"Row deleted\");\r\n  };\r\n\r\n  const handleUpdateRowColumns = async (rowId: string, columns: number) => {\r\n    const { error } = await supabase\r\n      .from(\"page_rows\")\r\n      .update({ columns })\r\n      .eq(\"id\", rowId);\r\n\r\n    if (error) {\r\n      toast.error(\"Failed to update columns\");\r\n      return;\r\n    }\r\n\r\n    setRows(rows.map((r) => (r.id === rowId ? { ...r, columns } : r)));\r\n  };\r\n\r\n  const handleUpdateRowStyles = async (rowId: string, styles: any) => {\r\n    const { error } = await supabase\r\n      .from(\"page_rows\")\r\n      .update({ styles })\r\n      .eq(\"id\", rowId);\r\n\r\n    if (error) {\r\n      toast.error(\"Failed to update row styles\");\r\n      return;\r\n    }\r\n\r\n    setRows(rows.map((r) => (r.id === rowId ? { ...r, styles } as PageRow : r)));\r\n  };\r\n\r\n  const handleUpdateRowColumnWidths = async (rowId: string, widths: number[]) => {\r\n    const { error } = await supabase\r\n      .from(\"page_rows\")\r\n      .update({ column_widths: widths })\r\n      .eq(\"id\", rowId);\r\n\r\n    if (error) {\r\n      toast.error(\"Failed to update column widths\");\r\n      return;\r\n    }\r\n\r\n    setRows(rows.map((r) => (r.id === rowId ? { ...r, column_widths: widths } as any : r)));\r\n  };\r\n\r\n  const handleUpdateRowResponsiveConfig = async (rowId: string, config: any) => {\r\n    const { error } = await supabase\r\n      .from(\"page_rows\")\r\n      .update({ responsive_config: config })\r\n      .eq(\"id\", rowId);\r\n\r\n    if (error) {\r\n      toast.error(\"Failed to update responsive config\");\r\n      return;\r\n    }\r\n\r\n    setRows(rows.map((r) => (r.id === rowId ? { ...r, responsive_config: config } as any : r)));\r\n  };\r\n\r\n  const handleUpdateComponentStyles = async (id: string, styles: any) => {\r\n    const { error } = await supabase\r\n      .from(\"page_components\")\r\n      .update({ styles })\r\n      .eq(\"id\", id);\r\n\r\n    if (error) {\r\n      toast.error(\"Failed to update component styles\");\r\n      return;\r\n    }\r\n\r\n    setComponents(components.map((c) => (c.id === id ? { ...c, styles } as PageComponent : c)));\r\n  };\r\n\r\n  const handleReorderRows = async (newRows: PageRow[]) => {\r\n    setRows(newRows);\r\n\r\n    // Update positions in database\r\n    for (let i = 0; i < newRows.length; i++) {\r\n      await supabase\r\n        .from(\"page_rows\")\r\n        .update({ position: i })\r\n        .eq(\"id\", newRows[i].id);\r\n    }\r\n  };\r\n\r\n  const getDefaultContent = (type: ComponentType) => {\r\n    switch (type) {\r\n      case \"heading\": return { text: \"New Heading\", level: \"h2\" };\r\n      case \"paragraph\": return { text: \"New paragraph text\" };\r\n      case \"image\": return { url: \"\", alt: \"Image\" };\r\n      case \"button\": return { text: \"Click me\", link: \"\" };\r\n      case \"link\": return { text: \"Link\", url: \"\" };\r\n      case \"video\": return { url: \"\" };\r\n      case \"divider\": return {};\r\n      case \"spacer\": return { height: \"medium\" };\r\n      case \"quote\": return { text: \"Quote text\", author: \"\" };\r\n      case \"list\": return { items: \"Item 1\\nItem 2\\nItem 3\", type: \"bullet\" };\r\n      case \"code\": return { code: \"console.log('Hello');\", language: \"javascript\" };\r\n      case \"page-content\": return {};\r\n      case \"entity-list\": return { entityId: \"\", fields: [], displayStyle: \"grid\", limit: 10, sortBy: \"\", sortOrder: \"desc\", showPublishedOnly: true };\r\n      case \"entity-detail\": return { entityId: \"\", recordId: \"\", fields: [], layout: \"vertical\" };\r\n      case \"query\": return { queryId: \"\" };\r\n      case \"datasource\": return {\r\n        dataSourceType: \"entity\",\r\n        viewType: \"table\",\r\n        viewOptions: {\r\n          visibleColumns: [],\r\n          sortField: null,\r\n          sortOrder: \"asc\",\r\n          filters: [],\r\n        },\r\n      };\r\n      case \"chart\": return {\r\n        chartType: \"bar\",\r\n        data: JSON.stringify([\r\n          { name: \"Jan\", value: 400 },\r\n          { name: \"Feb\", value: 300 },\r\n          { name: \"Mar\", value: 600 },\r\n          { name: \"Apr\", value: 800 },\r\n          { name: \"May\", value: 500 },\r\n          { name: \"Jun\", value: 700 }\r\n        ], null, 2),\r\n        title: \"Sample Bar Chart\",\r\n        xAxisKey: \"name\",\r\n        yAxisKey: \"value\"\r\n      };\r\n      case \"tabs\": return { tabs: [{ id: \"tab-1\", label: \"Tab 1\", content: \"Content 1\" }, { id: \"tab-2\", label: \"Tab 2\", content: \"Content 2\" }] };\r\n      case \"accordion\": return { items: [{ id: \"item-1\", title: \"Section 1\", content: \"Content 1\" }, { id: \"item-2\", title: \"Section 2\", content: \"Content 2\" }] };\r\n      case \"card\": return { layout: \"image-top\", title: \"Card Title\", description: \"Card description\", imageUrl: \"\", buttonText: \"Learn More\", buttonLink: \"\" };\r\n      case \"form-input\": return { fieldName: \"field_name\", label: \"Field Label\", placeholder: \"Enter value...\", inputType: \"text\", required: false };\r\n      case \"form-textarea\": return { fieldName: \"message\", label: \"Message\", placeholder: \"Enter your message...\", rows: 4, required: false };\r\n      case \"form-select\": return { fieldName: \"select_field\", label: \"Select Option\", placeholder: \"Choose...\", options: \"Option 1\\nOption 2\\nOption 3\", required: false };\r\n      case \"form-checkbox\": return { fieldName: \"checkbox_field\", label: \"Select Options\", options: \"Option 1\\nOption 2\\nOption 3\", type: \"checkbox\", required: false };\r\n      case \"form-submit\": return { buttonText: \"Submit\", buttonVariant: \"default\", successMessage: \"Form submitted successfully!\", submitAction: \"custom\" };\r\n      default: return {};\r\n    }\r\n  };\r\n\r\n  const handleUpdateComponent = async (id: string, content: any) => {\r\n    const { error } = await supabase\r\n      .from(\"page_components\")\r\n      .update({ content })\r\n      .eq(\"id\", id);\r\n\r\n    if (error) {\r\n      toast.error(\"Failed to update component\");\r\n      return;\r\n    }\r\n\r\n    setComponents(components.map((c) => (c.id === id ? { ...c, content } : c)));\r\n  };\r\n\r\n  const handleDeleteComponent = async (id: string) => {\r\n    const { error } = await supabase.from(\"page_components\").delete().eq(\"id\", id);\r\n\r\n    if (error) {\r\n      toast.error(\"Failed to delete component\");\r\n      return;\r\n    }\r\n\r\n    setComponents(components.filter((c) => c.id !== id));\r\n    toast.success(\"Component deleted\");\r\n  };\r\n\r\n  const handleInsertTemplate = async (templateData: any) => {\r\n    if (!pageId) return;\r\n\r\n    const templateRows = templateData.rows || [];\r\n\r\n    for (const templateRow of templateRows) {\r\n      const { data: newRow, error: rowError } = await supabase\r\n        .from(\"page_rows\")\r\n        .insert({\r\n          page_id: pageId,\r\n          position: rows.length,\r\n          columns: templateRow.columns || 1,\r\n          column_widths: templateRow.column_widths || [],\r\n          styles: templateRow.styles || {},\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n      if (rowError || !newRow) {\r\n        toast.error(\"Failed to insert template row\");\r\n        continue;\r\n      }\r\n\r\n      const templateComponents = templateRow.components || [];\r\n      for (const templateComp of templateComponents) {\r\n        await supabase.from(\"page_components\").insert({\r\n          page_id: pageId,\r\n          row_id: newRow.id,\r\n          component_type: templateComp.component_type,\r\n          column_index: templateComp.column_index,\r\n          position: templateComp.position,\r\n          content: templateComp.content || {},\r\n          styles: templateComp.styles || {},\r\n        });\r\n      }\r\n    }\r\n\r\n    await loadPage();\r\n    toast.success(\"Template inserted successfully\");\r\n  };\r\n\r\n  const handleDuplicateComponent = async (id: string) => {\r\n    const component = components.find((c) => c.id === id);\r\n    if (!component || !pageId) return;\r\n\r\n    const columnComponents = components.filter(\r\n      (c) => c.row_id === component.row_id && c.column_index === component.column_index\r\n    );\r\n\r\n    const { data, error } = await supabase\r\n      .from(\"page_components\")\r\n      .insert({\r\n        page_id: pageId,\r\n        row_id: component.row_id,\r\n        column_index: component.column_index,\r\n        component_type: component.component_type,\r\n        content: component.content,\r\n        position: columnComponents.length,\r\n        is_widget_instance: component.is_widget_instance,\r\n        widget_id: component.widget_id,\r\n      })\r\n      .select()\r\n      .single();\r\n\r\n    if (error) {\r\n      toast.error(\"Failed to duplicate component\");\r\n      return;\r\n    }\r\n\r\n    setComponents([...components, data]);\r\n    toast.success(\"Component duplicated\");\r\n  };\r\n\r\n  const handlePasteComponent = async (rowId: string, columnIndex: number) => {\r\n    if (!copiedComponent || !pageId) return;\r\n\r\n    const columnComponents = components.filter(\r\n      (c) => c.row_id === rowId && c.column_index === columnIndex\r\n    );\r\n\r\n    const { data, error } = await supabase\r\n      .from(\"page_components\")\r\n      .insert({\r\n        page_id: pageId,\r\n        row_id: rowId,\r\n        column_index: columnIndex,\r\n        component_type: copiedComponent.component_type,\r\n        content: copiedComponent.content,\r\n        position: columnComponents.length,\r\n        is_widget_instance: (copiedComponent as any).is_widget_instance,\r\n        widget_id: (copiedComponent as any).widget_id,\r\n      })\r\n      .select()\r\n      .single();\r\n\r\n    if (error) {\r\n      toast.error(\"Failed to paste component\");\r\n      return;\r\n    }\r\n\r\n    setComponents([...components, data]);\r\n    toast.success(\"Component pasted\");\r\n  };\r\n\r\n  const handleMoveComponentToPosition = async (id: string, newPosition: number) => {\r\n    const component = components.find((c) => c.id === id);\r\n    if (!component) return;\r\n\r\n    const columnComponents = components\r\n      .filter((c) => c.row_id === component.row_id && c.column_index === component.column_index)\r\n      .sort((a, b) => a.position - b.position);\r\n\r\n    const updates = columnComponents.map((comp, index) => {\r\n      if (comp.id === id) {\r\n        return supabase.from(\"page_components\").update({ position: newPosition }).eq(\"id\", comp.id);\r\n      }\r\n      if (index >= newPosition && comp.position < component.position) {\r\n        return supabase.from(\"page_components\").update({ position: index + 1 }).eq(\"id\", comp.id);\r\n      }\r\n      if (index <= newPosition && comp.position > component.position) {\r\n        return supabase.from(\"page_components\").update({ position: index - 1 }).eq(\"id\", comp.id);\r\n      }\r\n      return null;\r\n    }).filter(Boolean);\r\n\r\n    await Promise.all(updates);\r\n    await loadPage();\r\n    toast.success(\"Component moved\");\r\n  };\r\n\r\n  const handleAddRowAbove = async (rowId: string) => {\r\n    const targetRow = rows.find((r) => r.id === rowId);\r\n    if (!targetRow || !pageId) return;\r\n\r\n    const { error } = await supabase.from(\"page_rows\").insert({\r\n      page_id: pageId,\r\n      position: targetRow.position,\r\n      columns: 1,\r\n    });\r\n\r\n    if (error) {\r\n      toast.error(\"Failed to add row\");\r\n      return;\r\n    }\r\n\r\n    const rowsToUpdate = rows.filter((r) => r.position >= targetRow.position);\r\n    await Promise.all(\r\n      rowsToUpdate.map((r) =>\r\n        supabase.from(\"page_rows\").update({ position: r.position + 1 }).eq(\"id\", r.id)\r\n      )\r\n    );\r\n\r\n    await loadPage();\r\n    toast.success(\"Row added\");\r\n  };\r\n\r\n  const handleAddRowBelow = async (rowId: string) => {\r\n    const targetRow = rows.find((r) => r.id === rowId);\r\n    if (!targetRow || !pageId) return;\r\n\r\n    const { error } = await supabase.from(\"page_rows\").insert({\r\n      page_id: pageId,\r\n      position: targetRow.position + 1,\r\n      columns: 1,\r\n    });\r\n\r\n    if (error) {\r\n      toast.error(\"Failed to add row\");\r\n      return;\r\n    }\r\n\r\n    const rowsToUpdate = rows.filter((r) => r.position > targetRow.position);\r\n    await Promise.all(\r\n      rowsToUpdate.map((r) =>\r\n        supabase.from(\"page_rows\").update({ position: r.position + 1 }).eq(\"id\", r.id)\r\n      )\r\n    );\r\n\r\n    await loadPage();\r\n    toast.success(\"Row added\");\r\n  };\r\n\r\n  const handleDuplicateRow = async (rowId: string) => {\r\n    const targetRow = rows.find((r) => r.id === rowId);\r\n    if (!targetRow || !pageId) return;\r\n\r\n    const { data: newRow, error: rowError } = await supabase\r\n      .from(\"page_rows\")\r\n      .insert({\r\n        page_id: pageId,\r\n        position: targetRow.position + 1,\r\n        columns: targetRow.columns,\r\n        styles: targetRow.styles,\r\n        column_widths: targetRow.column_widths,\r\n      })\r\n      .select()\r\n      .single();\r\n\r\n    if (rowError || !newRow) {\r\n      toast.error(\"Failed to duplicate row\");\r\n      return;\r\n    }\r\n\r\n    const rowComponents = components.filter((c) => c.row_id === rowId);\r\n    await Promise.all(\r\n      rowComponents.map((comp) =>\r\n        supabase.from(\"page_components\").insert({\r\n          page_id: pageId,\r\n          row_id: newRow.id,\r\n          column_index: comp.column_index,\r\n          position: comp.position,\r\n          component_type: comp.component_type,\r\n          content: comp.content,\r\n          styles: comp.styles,\r\n        })\r\n      )\r\n    );\r\n\r\n    await loadPage();\r\n    toast.success(\"Row duplicated\");\r\n  };\r\n\r\n  const handleToggleVisibility = async (componentId: string) => {\r\n    console.log('[PageEditor] Toggle visibility for:', componentId);\r\n    const component = components.find((c) => c.id === componentId);\r\n    if (!component) {\r\n      console.log('[PageEditor] Component not found!');\r\n      return;\r\n    }\r\n\r\n    const currentStyles = (component as any).styles || {};\r\n    const currentVisible = currentStyles.visible !== false; // true if not explicitly false\r\n    const newVisible = !currentVisible;\r\n\r\n    console.log('[PageEditor] Visibility change:', { currentVisible, newVisible, currentStyles });\r\n\r\n    const { error } = await supabase\r\n      .from(\"page_components\")\r\n      .update({\r\n        styles: { ...currentStyles, visible: newVisible },\r\n      })\r\n      .eq(\"id\", componentId);\r\n\r\n    if (error) {\r\n      console.error('[PageEditor] Error updating visibility:', error);\r\n      toast.error(\"Failed to update visibility\");\r\n      return;\r\n    }\r\n\r\n    await loadPage();\r\n    toast.success(newVisible ? \"Component shown\" : \"Component hidden\");\r\n  };\r\n\r\n  const handleToggleLock = async (componentId: string) => {\r\n    console.log('[PageEditor] Toggle lock for:', componentId);\r\n    const component = components.find((c) => c.id === componentId);\r\n    if (!component) {\r\n      console.log('[PageEditor] Component not found!');\r\n      return;\r\n    }\r\n\r\n    const currentStyles = (component as any).styles || {};\r\n    const newLocked = !currentStyles.locked;\r\n\r\n    console.log('[PageEditor] Lock change:', { currentLocked: currentStyles.locked, newLocked, currentStyles });\r\n\r\n    const { error } = await supabase\r\n      .from(\"page_components\")\r\n      .update({\r\n        styles: { ...currentStyles, locked: newLocked },\r\n      })\r\n      .eq(\"id\", componentId);\r\n\r\n    if (error) {\r\n      console.error('[PageEditor] Error updating lock:', error);\r\n      toast.error(\"Failed to update lock\");\r\n      return;\r\n    }\r\n\r\n    await loadPage();\r\n    toast.success(newLocked ? \"Component locked\" : \"Component unlocked\");\r\n  };\r\n\r\n  const handleDragStart = (event: DragStartEvent) => {\r\n    const { active } = event;\r\n    const activeData = active.data.current;\r\n\r\n    if (activeData?.type === \"new-component\") {\r\n      setActiveComponentType(activeData.componentType);\r\n    } else if (activeData?.type === \"new-widget\") {\r\n      setActiveComponentType(\"widget\" as ComponentType);\r\n    }\r\n  };\r\n\r\n  const handleDragOver = (event: DragOverEvent) => {\r\n    const { active, over } = event;\r\n    if (!over) return;\r\n\r\n    const activeId = active.id as string;\r\n    const overId = over.id as string;\r\n    const activeData = active.data.current;\r\n    const overData = over.data.current;\r\n\r\n    // Only handle dragging existing components between columns (not new components from sidebar)\r\n    if (activeData?.type === \"component\" && overData?.type === \"droppable-column\") {\r\n      const component = activeData.component;\r\n      const targetRowId = overData.rowId;\r\n      const targetColumnIndex = overData.columnIndex;\r\n\r\n      if (component.row_id !== targetRowId || component.column_index !== targetColumnIndex) {\r\n        setComponents(\r\n          components.map((c) =>\r\n            c.id === activeId\r\n              ? { ...c, row_id: targetRowId, column_index: targetColumnIndex }\r\n              : c\r\n          )\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDragEnd = async (event: DragEndEvent) => {\r\n    const { active, over } = event;\r\n\r\n    if (!over) {\r\n      setActiveComponentType(null);\r\n      return;\r\n    }\r\n\r\n    const activeId = active.id as string;\r\n    const activeData = active.data.current;\r\n    const overData = over.data.current;\r\n\r\n    // Handle dropping new component or widget from sidebar\r\n    if ((activeId.startsWith(\"new-\") || activeId.startsWith(\"new-widget-\")) &&\r\n      (activeData?.type === \"new-component\" || activeData?.type === \"new-widget\")) {\r\n      const targetRowId = overData?.rowId;\r\n      const targetColumnIndex = overData?.columnIndex;\r\n\r\n      if (!targetRowId || targetColumnIndex === null || !pageId) {\r\n        setActiveComponentType(null);\r\n        return;\r\n      }\r\n\r\n      const columnComponents = components.filter(\r\n        (c) => c.row_id === targetRowId && c.column_index === targetColumnIndex\r\n      );\r\n\r\n      if (activeData.type === \"new-widget\") {\r\n        // Handle widget drop\r\n        const { data, error } = await supabase\r\n          .from(\"page_components\")\r\n          .insert({\r\n            page_id: pageId,\r\n            row_id: targetRowId,\r\n            column_index: targetColumnIndex,\r\n            component_type: \"paragraph\", // placeholder type\r\n            content: { text: `Widget: ${activeData.widgetTitle}` },\r\n            position: columnComponents.length,\r\n            is_widget_instance: true,\r\n            widget_id: activeData.widgetId,\r\n          })\r\n          .select()\r\n          .single();\r\n\r\n        if (error) {\r\n          toast.error(\"Failed to add widget\");\r\n        } else {\r\n          setComponents([...components, data]);\r\n          toast.success(\"Widget added\");\r\n        }\r\n      } else {\r\n        // Handle component drop\r\n        const componentType = activeData.componentType;\r\n\r\n        const { data, error } = await supabase\r\n          .from(\"page_components\")\r\n          .insert({\r\n            page_id: pageId,\r\n            row_id: targetRowId,\r\n            column_index: targetColumnIndex,\r\n            component_type: componentType,\r\n            content: getDefaultContent(componentType),\r\n            position: columnComponents.length,\r\n          })\r\n          .select()\r\n          .single();\r\n\r\n        if (error) {\r\n          toast.error(\"Failed to add component\");\r\n        } else {\r\n          setComponents([...components, data]);\r\n          toast.success(\"Component added\");\r\n        }\r\n      }\r\n\r\n      setActiveComponentType(null);\r\n      return;\r\n    }\r\n\r\n    // Handle moving existing component\r\n    const component = components.find((c) => c.id === activeId);\r\n    if (!component) {\r\n      setActiveComponentType(null);\r\n      return;\r\n    }\r\n\r\n    // Update in database\r\n    await supabase\r\n      .from(\"page_components\")\r\n      .update({\r\n        row_id: component.row_id,\r\n        column_index: component.column_index,\r\n      })\r\n      .eq(\"id\", activeId);\r\n\r\n    // Reorder components in the same column\r\n    const columnComponents = components\r\n      .filter((c) => c.row_id === component.row_id && c.column_index === component.column_index)\r\n      .sort((a, b) => a.position - b.position);\r\n\r\n    for (let i = 0; i < columnComponents.length; i++) {\r\n      await supabase\r\n        .from(\"page_components\")\r\n        .update({ position: i })\r\n        .eq(\"id\", columnComponents[i].id);\r\n    }\r\n\r\n    setActiveComponentType(null);\r\n  };\r\n\r\n  const handlePreview = async () => {\r\n    if (!page) return;\r\n\r\n    let layout = null;\r\n    let layoutRows: LayoutRow[] = [];\r\n    let layoutComponents: LayoutComponent[] = [];\r\n\r\n    if (page.layout_id) {\r\n      const { data: layoutData } = await supabase\r\n        .from(\"layouts\")\r\n        .select(\"*\")\r\n        .eq(\"id\", page.layout_id)\r\n        .single();\r\n\r\n      if (layoutData) {\r\n        layout = layoutData;\r\n\r\n        const { data: lRows } = await supabase\r\n          .from(\"layout_rows\")\r\n          .select(\"*\")\r\n          .eq(\"layout_id\", page.layout_id)\r\n          .order(\"position\");\r\n\r\n        const { data: lComponents } = await supabase\r\n          .from(\"layout_components\")\r\n          .select(\"*\")\r\n          .eq(\"layout_id\", page.layout_id)\r\n          .order(\"position\");\r\n\r\n        layoutRows = lRows || [];\r\n        layoutComponents = lComponents || [];\r\n      }\r\n    }\r\n\r\n    // Fetch widget data for all widget instances\r\n    const widgetInstances = components.filter((c): c is PageComponent & { widget_id: string } =>\r\n      Boolean(c.is_widget_instance && c.widget_id)\r\n    );\r\n    const widgetDataMap = new Map<string, { rows: any[]; components: any[] }>();\r\n\r\n    for (const instance of widgetInstances) {\r\n      if (!widgetDataMap.has(instance.widget_id)) {\r\n        const { data: widgetRows } = await supabase\r\n          .from(\"widget_rows\")\r\n          .select(\"*\")\r\n          .eq(\"widget_id\", instance.widget_id)\r\n          .order(\"position\");\r\n\r\n        const { data: widgetComponents } = await supabase\r\n          .from(\"widget_components\")\r\n          .select(\"*\")\r\n          .eq(\"widget_id\", instance.widget_id)\r\n          .order(\"position\");\r\n\r\n        widgetDataMap.set(instance.widget_id, {\r\n          rows: widgetRows || [],\r\n          components: widgetComponents || []\r\n        });\r\n      }\r\n    }\r\n\r\n    setPreviewLayout(layout);\r\n    setPreviewLayoutRows(layoutRows);\r\n    setPreviewLayoutComponents(layoutComponents);\r\n    setWidgetData(widgetDataMap);\r\n    setShowPreview(true);\r\n  };\r\n\r\n\r\n\r\n  const handlePublishToggle = async () => {\r\n    if (!page) return;\r\n\r\n    const { error } = await supabase\r\n      .from(\"pages\")\r\n      .update({ is_published: !page.is_published })\r\n      .eq(\"id\", page.id);\r\n\r\n    if (error) {\r\n      toast.error(\"Failed to update page\");\r\n      return;\r\n    }\r\n\r\n    // If we are publishing (was not published, now is), generate and download static HTML\r\n    if (!page.is_published) {\r\n      try {\r\n        const html = generateStaticHtml(page, rows, components);\r\n        const blob = new Blob([html], { type: \"text/html\" });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement(\"a\");\r\n        a.href = url;\r\n        a.download = `${(page.title || \"page\").toLowerCase().replace(/\\s+/g, '-')}.html`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        URL.revokeObjectURL(url);\r\n        toast.success(\"Static HTML downloaded\");\r\n      } catch (err) {\r\n        console.error(\"Failed to generate static HTML\", err);\r\n        toast.error(\"Failed to generate static export\");\r\n      }\r\n    }\r\n\r\n    setPage({ ...page, is_published: !page.is_published });\r\n    toast.success(page.is_published ? \"Page unpublished\" : \"Page published\");\r\n  };\r\n\r\n  const handleLayoutChange = async (layoutId: string | null) => {\r\n    if (!page) return;\r\n\r\n    const { error } = await supabase\r\n      .from(\"pages\")\r\n      .update({ layout_id: layoutId || null })\r\n      .eq(\"id\", page.id);\r\n\r\n    if (error) {\r\n      toast.error(\"Failed to update layout\");\r\n      return;\r\n    }\r\n\r\n    setPage({ ...page, layout_id: layoutId || null });\r\n    toast.success(\"Layout updated\");\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"min-h-screen flex items-center justify-center\">Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <PagePreviewModal\r\n        open={showPreview}\r\n        onOpenChange={setShowPreview}\r\n        page={page}\r\n        rows={rows}\r\n        components={components}\r\n        layout={previewLayout}\r\n        layoutRows={previewLayoutRows}\r\n        layoutComponents={previewLayoutComponents}\r\n        widgetData={widgetData}\r\n      />\r\n      <DndContext\r\n        collisionDetection={pointerWithin}\r\n        onDragStart={handleDragStart}\r\n        onDragEnd={handleDragEnd}\r\n        onDragOver={handleDragOver}\r\n      >\r\n        <SidebarProvider>\r\n          <div className=\"min-h-screen flex w-full bg-background\">\r\n            <SidebarToggle\r\n              showOutline={showOutline}\r\n              onToggle={() => setShowOutline(!showOutline)}\r\n              title={page?.title || \"Page\"}\r\n              rows={rows}\r\n              components={components}\r\n              selectedComponentId={selectedComponent}\r\n              onSelectComponent={setSelectedComponent}\r\n              onToggleVisibility={handleToggleVisibility}\r\n              onToggleLock={handleToggleLock}\r\n            />\r\n\r\n            <div className=\"flex-1 flex flex-col\">\r\n              <header className=\"border-b bg-card shadow-[var(--shadow-soft)] sticky top-0 z-50\">\r\n                <div className=\"px-4 py-3 flex items-center justify-between\">\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <SidebarTrigger />\r\n                    <Button variant=\"outline\" onClick={() => router.push(\"/admin\")} className=\"gap-2\">\r\n                      <ArrowLeft className=\"h-4 w-4\" />\r\n                      Back\r\n                    </Button>\r\n                    <h1 className=\"text-xl font-bold\">{page?.title}</h1>\r\n                  </div>\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Label htmlFor=\"layout-select\" className=\"text-sm\">Layout:</Label>\r\n                      <Select value={page?.layout_id ?? \"none\"} onValueChange={(value) => handleLayoutChange(value === \"none\" ? null : value)}>\r\n                        <SelectTrigger id=\"layout-select\" className=\"w-[200px]\">\r\n                          <SelectValue placeholder=\"No layout\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                          <SelectItem value=\"none\">No layout</SelectItem>\r\n                          {layouts.map((layout) => (\r\n                            <SelectItem key={layout.id} value={layout.id}>\r\n                              {layout.title}\r\n                            </SelectItem>\r\n                          ))}\r\n                        </SelectContent>\r\n                      </Select>\r\n                    </div>\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"icon\"\r\n                      onClick={() => history.undo()}\r\n                      disabled={!history.canUndo}\r\n                      title=\"Undo (Cmd+Z)\"\r\n                    >\r\n                      <Undo className=\"h-4 w-4\" />\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"ghost\"\r\n                      size=\"icon\"\r\n                      onClick={() => history.redo()}\r\n                      disabled={!history.canRedo}\r\n                      title=\"Redo (Cmd+Shift+Z)\"\r\n                    >\r\n                      <Redo className=\"h-4 w-4\" />\r\n                    </Button>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      onClick={handlePreview}\r\n                      className=\"gap-2\"\r\n                    >\r\n                      <Monitor className=\"h-4 w-4\" />\r\n                      Preview\r\n                    </Button>\r\n                    <Button\r\n                      variant={page?.is_published ? \"outline\" : \"default\"}\r\n                      onClick={handlePublishToggle}\r\n                      className=\"gap-2\"\r\n                    >\r\n                      {page?.is_published ? (\r\n                        <>\r\n                          <EyeOff className=\"h-4 w-4\" />\r\n                          Unpublish\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <Eye className=\"h-4 w-4\" />\r\n                          Publish\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </header>\r\n\r\n              <main className=\"flex-1 overflow-auto px-4 py-8\">\r\n                <GridCanvas\r\n                  rows={rows}\r\n                  components={components}\r\n                  onUpdateComponent={handleUpdateComponent}\r\n                  onUpdateComponentStyles={handleUpdateComponentStyles}\r\n                  onDeleteComponent={handleDeleteComponent}\r\n                  onAddRow={handleAddRow}\r\n                  onDeleteRow={handleDeleteRow}\r\n                  onUpdateRowColumns={handleUpdateRowColumns}\r\n                  onUpdateRowStyles={handleUpdateRowStyles}\r\n                  onUpdateRowColumnWidths={handleUpdateRowColumnWidths}\r\n                  onUpdateRowResponsiveConfig={handleUpdateRowResponsiveConfig}\r\n                  onReorderRows={handleReorderRows}\r\n                  activeComponentType={activeComponentType}\r\n                  onDuplicateComponent={handleDuplicateComponent}\r\n                  onPasteComponent={handlePasteComponent}\r\n                  onInsertTemplate={handleInsertTemplate}\r\n                  onMoveComponentToPosition={handleMoveComponentToPosition}\r\n                  onAddRowAbove={handleAddRowAbove}\r\n                  onAddRowBelow={handleAddRowBelow}\r\n                  onDuplicateRow={handleDuplicateRow}\r\n                />\r\n              </main>\r\n            </div>\r\n          </div>\r\n        </SidebarProvider>\r\n      </DndContext>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PageEditor;\r\n"],"names":[],"mappings":"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"}}]
}