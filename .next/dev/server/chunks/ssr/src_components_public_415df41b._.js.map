{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/components/public/ChartRenderer.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  ChartContainer,\r\n  ChartTooltip,\r\n  ChartTooltipContent,\r\n  ChartLegend,\r\n  ChartLegendContent,\r\n} from \"@/components/ui/chart\";\r\nimport {\r\n  Bar,\r\n  BarChart,\r\n  Line,\r\n  LineChart,\r\n  Area,\r\n  AreaChart,\r\n  Pie,\r\n  PieChart,\r\n  Radar,\r\n  RadarChart,\r\n  PolarGrid,\r\n  PolarAngleAxis,\r\n  PolarRadiusAxis,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Cell,\r\n} from \"recharts\";\r\n\r\ninterface ChartRendererProps {\r\n  content: {\r\n    chartType: string;\r\n    data: string;\r\n    title: string;\r\n    xAxisKey?: string;\r\n    yAxisKey?: string;\r\n    dataKeys?: string;\r\n  };\r\n}\r\n\r\nconst COLORS = [\r\n  \"hsl(var(--chart-1))\",\r\n  \"hsl(var(--chart-2))\",\r\n  \"hsl(var(--chart-3))\",\r\n  \"hsl(var(--chart-4))\",\r\n  \"hsl(var(--chart-5))\",\r\n];\r\n\r\nexport const ChartRenderer = ({ content }: ChartRendererProps) => {\r\n  let chartData: any[] = [];\r\n\r\n  try {\r\n    chartData = JSON.parse(content.data || \"[]\");\r\n  } catch (error) {\r\n    return (\r\n      <div className=\"p-4 border border-destructive/50 rounded-lg bg-destructive/10\">\r\n        <p className=\"text-destructive font-semibold\">Invalid chart data</p>\r\n        <p className=\"text-sm text-muted-foreground\">Please provide valid JSON data</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!chartData.length) {\r\n    return (\r\n      <div className=\"p-4 border border-border rounded-lg bg-muted/20\">\r\n        <p className=\"text-muted-foreground\">No chart data available</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const chartConfig = chartData.reduce((acc, item, index) => {\r\n    Object.keys(item).forEach(key => {\r\n      if (key !== content.xAxisKey && key !== \"name\" && !acc[key]) {\r\n        acc[key] = {\r\n          label: key.charAt(0).toUpperCase() + key.slice(1),\r\n          color: COLORS[Object.keys(acc).length % COLORS.length],\r\n        };\r\n      }\r\n    });\r\n    return acc;\r\n  }, {} as Record<string, { label: string; color: string }>);\r\n\r\n  const renderChart = () => {\r\n    switch (content.chartType) {\r\n      case \"bar\":\r\n        return (\r\n          <ChartContainer config={chartConfig}>\r\n            <BarChart data={chartData}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\r\n              <XAxis\r\n                dataKey={content.xAxisKey || \"name\"}\r\n                tickLine={false}\r\n                axisLine={false}\r\n              />\r\n              <YAxis tickLine={false} axisLine={false} />\r\n              <ChartTooltip content={<ChartTooltipContent />} />\r\n              <Bar\r\n                dataKey={content.yAxisKey || \"value\"}\r\n                fill={COLORS[0]}\r\n                radius={[8, 8, 0, 0]}\r\n              />\r\n            </BarChart>\r\n          </ChartContainer>\r\n        );\r\n\r\n      case \"line\":\r\n        const lineDataKeys = (content.dataKeys || \"\").split(\",\").filter(Boolean);\r\n        return (\r\n          <ChartContainer config={chartConfig}>\r\n            <LineChart data={chartData}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\r\n              <XAxis\r\n                dataKey={content.xAxisKey || \"month\"}\r\n                tickLine={false}\r\n                axisLine={false}\r\n              />\r\n              <YAxis tickLine={false} axisLine={false} />\r\n              <ChartTooltip content={<ChartTooltipContent />} />\r\n              <ChartLegend content={<ChartLegendContent />} />\r\n              {lineDataKeys.map((key, idx) => (\r\n                <Line\r\n                  key={key}\r\n                  type=\"monotone\"\r\n                  dataKey={key.trim()}\r\n                  stroke={COLORS[idx % COLORS.length]}\r\n                  strokeWidth={2}\r\n                  dot={false}\r\n                />\r\n              ))}\r\n            </LineChart>\r\n          </ChartContainer>\r\n        );\r\n\r\n      case \"area\":\r\n        const areaDataKeys = (content.dataKeys || \"\").split(\",\").filter(Boolean);\r\n        return (\r\n          <ChartContainer config={chartConfig}>\r\n            <AreaChart data={chartData}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\r\n              <XAxis\r\n                dataKey={content.xAxisKey || \"time\"}\r\n                tickLine={false}\r\n                axisLine={false}\r\n              />\r\n              <YAxis tickLine={false} axisLine={false} />\r\n              <ChartTooltip content={<ChartTooltipContent />} />\r\n              {areaDataKeys.map((key, idx) => (\r\n                <Area\r\n                  key={key}\r\n                  type=\"monotone\"\r\n                  dataKey={key.trim()}\r\n                  stroke={COLORS[idx % COLORS.length]}\r\n                  fill={COLORS[idx % COLORS.length]}\r\n                  fillOpacity={0.6}\r\n                />\r\n              ))}\r\n            </AreaChart>\r\n          </ChartContainer>\r\n        );\r\n\r\n      case \"pie\":\r\n        return (\r\n          <ChartContainer config={chartConfig}>\r\n            <PieChart>\r\n              <ChartTooltip content={<ChartTooltipContent />} />\r\n              <Pie\r\n                data={chartData}\r\n                dataKey=\"value\"\r\n                nameKey=\"name\"\r\n                cx=\"50%\"\r\n                cy=\"50%\"\r\n                outerRadius={80}\r\n                label\r\n              >\r\n                {chartData.map((entry, index) => (\r\n                  <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                ))}\r\n              </Pie>\r\n            </PieChart>\r\n          </ChartContainer>\r\n        );\r\n\r\n      case \"radar\":\r\n        return (\r\n          <ChartContainer config={chartConfig}>\r\n            <RadarChart data={chartData}>\r\n              <PolarGrid className=\"stroke-muted\" />\r\n              <PolarAngleAxis dataKey=\"subject\" />\r\n              <PolarRadiusAxis />\r\n              <ChartTooltip content={<ChartTooltipContent />} />\r\n              <Radar\r\n                name=\"Score\"\r\n                dataKey=\"value\"\r\n                stroke={COLORS[0]}\r\n                fill={COLORS[0]}\r\n                fillOpacity={0.6}\r\n              />\r\n            </RadarChart>\r\n          </ChartContainer>\r\n        );\r\n\r\n      default:\r\n        return <div className=\"text-muted-foreground\">Unsupported chart type</div>;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full space-y-4\">\r\n      {content.title && (\r\n        <h3 className=\"text-xl font-semibold text-center\">{content.title}</h3>\r\n      )}\r\n      <div className=\"w-full min-h-[300px] max-h-[400px] h-[400px]\">\r\n        {renderChart()}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 453, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/components/public/DatasourceRenderer.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, useMemo } from \"react\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { CardView } from \"@/components/entities/views/CardView\";\r\nimport { KanbanView } from \"@/components/entities/views/KanbanView\";\r\nimport { GalleryView } from \"@/components/entities/views/GalleryView\";\r\nimport { ListView } from \"@/components/entities/views/ListView\";\r\nimport { TimelineView } from \"@/components/entities/views/TimelineView\";\r\nimport { CalendarView } from \"@/components/entities/views/CalendarView\";\r\nimport { GanttView } from \"@/components/entities/views/GanttView\";\r\nimport { fetchEntityData } from \"@/components/datasource/adapters/EntityAdapter\";\r\nimport { fetchQueryData } from \"@/components/datasource/adapters/QueryAdapter\";\r\nimport { fetchApiData } from \"@/components/datasource/adapters/ApiAdapter\";\r\nimport type { FieldInfo, DataRecord } from \"@/components/datasource/adapters/EntityAdapter\";\r\nimport { E_FieldDataType } from \"@/components/entities/FieldEditor\";\r\n\r\ninterface DatasourceRendererProps {\r\n  content?: {\r\n    dataSourceType?: 'entity' | 'query' | 'api';\r\n    entityId?: string;\r\n    queryId?: string;\r\n    apiRequestId?: string;\r\n    viewType?: 'table' | 'card' | 'kanban' | 'gallery' | 'list' | 'timeline' | 'calendar' | 'gantt';\r\n    viewOptions?: {\r\n      visibleColumns?: string[];\r\n      sortField?: string | null;\r\n      sortOrder?: 'asc' | 'desc';\r\n      filters?: Array<{ field: string; operator: string; value: string }>;\r\n      cardLayout?: any;\r\n      kanbanConfig?: any;\r\n      galleryConfig?: any;\r\n      listConfig?: any;\r\n      timelineConfig?: any;\r\n      calendarConfig?: any;\r\n      ganttConfig?: any;\r\n    };\r\n  };\r\n}\r\n\r\nimport { EntityRecord, EntityField } from \"@/types/entity\";\r\n\r\nexport const DatasourceRenderer = ({ content }: DatasourceRendererProps) => {\r\n  const [data, setData] = useState<DataRecord[]>([]);\r\n  const [fields, setFields] = useState<FieldInfo[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Handle content that might be a JSON string or nested object\r\n  let normalizedContent = content;\r\n  if (typeof content === 'string') {\r\n    try {\r\n      normalizedContent = JSON.parse(content);\r\n    } catch {\r\n      normalizedContent = {};\r\n    }\r\n  }\r\n\r\n  // Handle nested content structure (in case it was saved incorrectly)\r\n  if (normalizedContent && typeof normalizedContent === 'object' && 'content' in normalizedContent && Object.keys(normalizedContent).length === 1) {\r\n    normalizedContent = (normalizedContent as any).content;\r\n  }\r\n\r\n  // Provide default values if content is missing or incomplete\r\n  const safeContent = {\r\n    dataSourceType: normalizedContent?.dataSourceType || 'entity',\r\n    entityId: normalizedContent?.entityId,\r\n    queryId: normalizedContent?.queryId,\r\n    apiRequestId: normalizedContent?.apiRequestId,\r\n    viewType: normalizedContent?.viewType || 'table',\r\n    viewOptions: {\r\n      visibleColumns: normalizedContent?.viewOptions?.visibleColumns || [],\r\n      sortField: normalizedContent?.viewOptions?.sortField || null,\r\n      sortOrder: (normalizedContent?.viewOptions?.sortOrder || 'asc') as 'asc' | 'desc',\r\n      filters: normalizedContent?.viewOptions?.filters || [],\r\n      cardLayout: normalizedContent?.viewOptions?.cardLayout,\r\n      kanbanConfig: normalizedContent?.viewOptions?.kanbanConfig,\r\n      galleryConfig: normalizedContent?.viewOptions?.galleryConfig,\r\n      listConfig: normalizedContent?.viewOptions?.listConfig,\r\n      timelineConfig: normalizedContent?.viewOptions?.timelineConfig,\r\n      calendarConfig: normalizedContent?.viewOptions?.calendarConfig,\r\n      ganttConfig: normalizedContent?.viewOptions?.ganttConfig,\r\n    },\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadDataSource();\r\n  }, [safeContent.dataSourceType, safeContent.entityId, safeContent.queryId, safeContent.apiRequestId]);\r\n\r\n  const loadDataSource = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      let result;\r\n\r\n      // Check which data source type is configured and has an ID\r\n      if (safeContent.dataSourceType === 'entity') {\r\n        if (!safeContent.entityId) {\r\n          setError(\"Please select an entity in the component editor.\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        result = await fetchEntityData(safeContent.entityId);\r\n      } else if (safeContent.dataSourceType === 'query') {\r\n        if (!safeContent.queryId) {\r\n          setError(\"Please select a query in the component editor.\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        result = await fetchQueryData(safeContent.queryId);\r\n      } else if (safeContent.dataSourceType === 'api') {\r\n        if (!safeContent.apiRequestId) {\r\n          setError(\"Please select an API request in the component editor.\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        result = await fetchApiData(safeContent.apiRequestId);\r\n      } else {\r\n        setError(\"Please configure the data source type in the component editor.\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      setData(result.data);\r\n      setFields(result.fields);\r\n    } catch (err: any) {\r\n      console.error(\"Error loading data source:\", err);\r\n      setError(err.message || \"Failed to load data\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Convert FieldInfo to EntityField\r\n  const entityFields: EntityField[] = fields.map(f => ({\r\n    id: f.id,\r\n    name: f.name,\r\n    display_name: f.display_name,\r\n    field_type: f.field_type,\r\n  }));\r\n\r\n  // Convert DataRecord to EntityRecord\r\n  const entityRecords: EntityRecord[] = data.map(record => ({\r\n    id: record.id,\r\n    data: record.data,\r\n    is_published: record.is_published ?? true,\r\n    created_at: record.created_at || new Date().toISOString(),\r\n  }));\r\n\r\n  // Apply filters\r\n  const filteredRecords = useMemo(() => {\r\n    if (!safeContent.viewOptions.filters || safeContent.viewOptions.filters.length === 0) {\r\n      return entityRecords;\r\n    }\r\n\r\n    return entityRecords.filter(record => {\r\n      return safeContent.viewOptions.filters.every(filter => {\r\n        const field = fields.find(f => f.id === filter.field || f.name === filter.field);\r\n        if (!field) return true;\r\n\r\n        const value = record.data[field.name];\r\n        const filterValue = filter.value;\r\n\r\n        switch (filter.operator) {\r\n          case 'equals':\r\n            return String(value) === filterValue;\r\n          case 'contains':\r\n            return String(value).toLowerCase().includes(filterValue.toLowerCase());\r\n          case 'greater_than':\r\n            return Number(value) > Number(filterValue);\r\n          case 'less_than':\r\n            return Number(value) < Number(filterValue);\r\n          default:\r\n            return true;\r\n        }\r\n      });\r\n    });\r\n  }, [entityRecords, safeContent.viewOptions.filters, fields]);\r\n\r\n  // Apply sorting\r\n  const sortedRecords = useMemo(() => {\r\n    if (!safeContent.viewOptions.sortField) {\r\n      return filteredRecords;\r\n    }\r\n\r\n    const field = fields.find(f => f.id === safeContent.viewOptions.sortField || f.name === safeContent.viewOptions.sortField);\r\n    if (!field) return filteredRecords;\r\n\r\n    const sorted = [...filteredRecords].sort((a, b) => {\r\n      const aValue = a.data[field.name];\r\n      const bValue = b.data[field.name];\r\n\r\n      if (aValue === null || aValue === undefined) return 1;\r\n      if (bValue === null || bValue === undefined) return -1;\r\n\r\n      if ([E_FieldDataType.Interger, E_FieldDataType.Decimal, E_FieldDataType.Int64].includes(field.field_type)) {\r\n        return (Number(aValue) - Number(bValue)) * (safeContent.viewOptions.sortOrder === 'asc' ? 1 : -1);\r\n      }\r\n\r\n      if ([E_FieldDataType.Date, E_FieldDataType.DateTime].includes(field.field_type)) {\r\n        const aDate = new Date(aValue).getTime();\r\n        const bDate = new Date(bValue).getTime();\r\n        return (aDate - bDate) * (safeContent.viewOptions.sortOrder === 'asc' ? 1 : -1);\r\n      }\r\n\r\n      return String(aValue).localeCompare(String(bValue)) * (safeContent.viewOptions.sortOrder === 'asc' ? 1 : -1);\r\n    });\r\n\r\n    return sorted;\r\n  }, [filteredRecords, safeContent.viewOptions.sortField, safeContent.viewOptions.sortOrder, fields]);\r\n\r\n  // Get visible fields for table view\r\n  const visibleFields = useMemo(() => {\r\n    if (safeContent.viewOptions.visibleColumns.length === 0) {\r\n      return entityFields;\r\n    }\r\n    return entityFields.filter(f => safeContent.viewOptions.visibleColumns.includes(f.id));\r\n  }, [entityFields, safeContent.viewOptions.visibleColumns]);\r\n\r\n  // No-op handlers for public view (no edit/delete)\r\n  const noopHandlers = {\r\n    onEdit: () => { },\r\n    onDelete: () => { },\r\n    onTogglePublish: () => { },\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"text-muted-foreground p-4\">Loading data...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"text-destructive p-4\">Error: {error}</div>;\r\n  }\r\n\r\n  if (sortedRecords.length === 0) {\r\n    return <div className=\"text-muted-foreground p-4\">No data available</div>;\r\n  }\r\n\r\n  const viewType = safeContent.viewType || 'table';\r\n  const commonProps = {\r\n    records: sortedRecords,\r\n    fields: entityFields,\r\n    ...noopHandlers,\r\n  };\r\n\r\n  switch (viewType) {\r\n    case 'card':\r\n      return <CardView {...commonProps} cardLayout={safeContent.viewOptions.cardLayout} />;\r\n\r\n    case 'kanban':\r\n      return <KanbanView {...commonProps} kanbanConfig={safeContent.viewOptions.kanbanConfig} />;\r\n\r\n    case 'gallery':\r\n      return <GalleryView {...commonProps} galleryConfig={safeContent.viewOptions.galleryConfig} />;\r\n\r\n    case 'list':\r\n      return <ListView {...commonProps} listConfig={safeContent.viewOptions.listConfig} />;\r\n\r\n    case 'timeline':\r\n      return <TimelineView {...commonProps} timelineConfig={safeContent.viewOptions.timelineConfig} />;\r\n\r\n    case 'calendar':\r\n      return <CalendarView {...commonProps} calendarConfig={safeContent.viewOptions.calendarConfig} />;\r\n\r\n    case 'gantt':\r\n      return <GanttView {...commonProps} ganttConfig={safeContent.viewOptions.ganttConfig} entityId={safeContent.entityId || ''} />;\r\n\r\n    case 'table':\r\n    default:\r\n      return (\r\n        <div className=\"overflow-x-auto\">\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                {visibleFields.map((field) => (\r\n                  <TableHead key={field.id} className=\"min-w-[150px]\">\r\n                    {field.display_name}\r\n                  </TableHead>\r\n                ))}\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {sortedRecords.map((record) => (\r\n                <TableRow key={record.id}>\r\n                  {visibleFields.map((field) => (\r\n                    <TableCell key={field.id} className=\"max-w-xs\">\r\n                      <div className=\"truncate\">\r\n                        {renderFieldValue(record.data[field.name], field.field_type)}\r\n                      </div>\r\n                    </TableCell>\r\n                  ))}\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </div>\r\n      );\r\n  }\r\n};\r\n\r\nfunction renderFieldValue(value: any, fieldType: EntityField['field_type']): string {\r\n  if (value === null || value === undefined) return \"-\";\r\n\r\n  if (fieldType === E_FieldDataType.Boolean) return value ? 'Yes' : 'No';\r\n  if (fieldType === E_FieldDataType.Date || fieldType === E_FieldDataType.DateTime) {\r\n    try {\r\n      return new Date(value).toLocaleDateString();\r\n    } catch {\r\n      return String(value);\r\n    }\r\n  }\r\n  if (fieldType === E_FieldDataType.Image) return String(value);\r\n\r\n  return String(value);\r\n}\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 859, "column": 0}, "map": {"version":3,"sources":["file:///D:/visual-forge-hub-next-js/src/components/public/ComponentRenderer.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { Tables } from \"@/integrations/supabase/types\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { getEntity, getFields } from \"@/lib/schema-service\";\r\nimport { Card, CardHeader, CardContent } from \"@/components/ui/card\";\r\nimport { ChartRenderer } from \"./ChartRenderer\";\r\nimport { DatasourceRenderer } from \"./DatasourceRenderer\";\r\n\r\ntype Component =\r\n  | Tables<\"page_components\">\r\n  | Tables<\"layout_components\">\r\n  | Tables<\"widget_components\">;\r\n\r\ninterface ComponentRendererProps {\r\n  component: Component;\r\n}\r\n\r\nexport const ComponentRenderer = ({ component }: ComponentRendererProps) => {\r\n  if (!component) {\r\n    console.error(\"ComponentRenderer received undefined component\");\r\n    return null;\r\n  }\r\n\r\n  let { component_type, content } = component;\r\n\r\n  if (!component_type) {\r\n    console.error(\"Component missing component_type:\", component);\r\n    return null;\r\n  }\r\n\r\n  // Handle malformed content with nested 'content' property\r\n  if (content && typeof content === 'object' && 'content' in content && Object.keys(content).length === 1) {\r\n    content = content.content as any;\r\n  }\r\n\r\n  switch (component_type) {\r\n    case \"heading\": {\r\n      const { text, level } = content as { text: string; level: string };\r\n      const Tag = level as keyof JSX.IntrinsicElements;\r\n      const styles = {\r\n        h1: \"text-4xl font-bold\",\r\n        h2: \"text-3xl font-bold\",\r\n        h3: \"text-2xl font-semibold\",\r\n      };\r\n      return <Tag className={styles[level as keyof typeof styles]}>{text}</Tag>;\r\n    }\r\n\r\n    case \"text\":\r\n    case \"paragraph\": {\r\n      const { text } = content as { text: string };\r\n      return <p className=\"text-base leading-relaxed whitespace-pre-wrap\">{text}</p>;\r\n    }\r\n\r\n    case \"image\": {\r\n      const { url, alt } = content as { url: string; alt: string };\r\n      if (!url) return null;\r\n      return <img src={url} alt={alt} className=\"w-full max-w-2xl rounded-lg shadow-[var(--shadow-medium)]\" />;\r\n    }\r\n\r\n    case \"button\": {\r\n      const { text, link } = content as { text: string; link: string };\r\n      return (\r\n        <Button asChild>\r\n          <a href={link || \"#\"}>{text}</a>\r\n        </Button>\r\n      );\r\n    }\r\n\r\n    case \"link\": {\r\n      const { text, url } = content as { text: string; url: string };\r\n      return (\r\n        <a href={url || \"#\"} className=\"text-primary hover:underline\">\r\n          {text}\r\n        </a>\r\n      );\r\n    }\r\n\r\n    case \"video\": {\r\n      const { url } = content as { url: string };\r\n      if (!url) return null;\r\n\r\n      // Extract video ID from YouTube or Vimeo URL\r\n      let embedUrl = \"\";\r\n      if (url.includes(\"youtube.com\") || url.includes(\"youtu.be\")) {\r\n        const videoId = url.includes(\"youtu.be\")\r\n          ? url.split(\"/\").pop()\r\n          : new URLSearchParams(new URL(url).search).get(\"v\");\r\n        embedUrl = `https://www.youtube.com/embed/${videoId}`;\r\n      } else if (url.includes(\"vimeo.com\")) {\r\n        const videoId = url.split(\"/\").pop();\r\n        embedUrl = `https://player.vimeo.com/video/${videoId}`;\r\n      }\r\n\r\n      if (!embedUrl) return <p className=\"text-muted-foreground\">Invalid video URL</p>;\r\n\r\n      return (\r\n        <div className=\"aspect-video w-full max-w-2xl\">\r\n          <iframe\r\n            src={embedUrl}\r\n            className=\"w-full h-full rounded-lg\"\r\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n            allowFullScreen\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    case \"divider\": {\r\n      return <Separator className=\"my-4\" />;\r\n    }\r\n\r\n    case \"spacer\": {\r\n      const { height } = content as { height: string };\r\n      const heights = {\r\n        small: \"h-5\",\r\n        medium: \"h-10\",\r\n        large: \"h-20\",\r\n      };\r\n      return <div className={heights[height as keyof typeof heights] || heights.medium} />;\r\n    }\r\n\r\n    case \"quote\": {\r\n      const { text, author } = content as { text: string; author: string };\r\n      return (\r\n        <blockquote className=\"border-l-4 border-primary pl-4 italic\">\r\n          <p className=\"text-lg\">{text}</p>\r\n          {author && <footer className=\"mt-2 text-sm text-muted-foreground\">â€” {author}</footer>}\r\n        </blockquote>\r\n      );\r\n    }\r\n\r\n    case \"list\": {\r\n      const { items, type } = content as { items: string; type: string };\r\n      const listItems = items.split(\"\\n\").filter((item) => item.trim());\r\n      const Tag = type === \"numbered\" ? \"ol\" : \"ul\";\r\n      const className = type === \"numbered\" ? \"list-decimal list-inside space-y-1\" : \"list-disc list-inside space-y-1\";\r\n      return (\r\n        <Tag className={className}>\r\n          {listItems.map((item, i) => (\r\n            <li key={i}>{item}</li>\r\n          ))}\r\n        </Tag>\r\n      );\r\n    }\r\n\r\n    case \"code\": {\r\n      const { code, language } = content as { code: string; language: string };\r\n      return (\r\n        <div className=\"relative\">\r\n          {language && (\r\n            <div className=\"absolute top-2 right-2 text-xs text-muted-foreground bg-muted px-2 py-1 rounded\">\r\n              {language}\r\n            </div>\r\n          )}\r\n          <pre className=\"bg-muted p-4 rounded-lg overflow-x-auto\">\r\n            <code className=\"text-sm font-mono\">{code}</code>\r\n          </pre>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    case \"entity-list\": {\r\n      return <EntityListRenderer content={content} />;\r\n    }\r\n\r\n    case \"entity-detail\": {\r\n      return <EntityDetailRenderer content={content} />;\r\n    }\r\n\r\n    case \"query\": {\r\n      return <QueryRenderer content={content} />;\r\n    }\r\n\r\n    case \"datasource\": {\r\n      if (!content || typeof content !== 'object') {\r\n        return (\r\n          <div className=\"p-4 border border-dashed border-muted-foreground/30 rounded-lg bg-muted/20\">\r\n            <p className=\"text-sm text-muted-foreground\">Data Source component not configured. Please configure it in the editor.</p>\r\n          </div>\r\n        );\r\n      }\r\n      return <DatasourceRenderer content={content as any} />;\r\n    }\r\n\r\n    case \"chart\": {\r\n      return <ChartRenderer content={content as any} />;\r\n    }\r\n\r\n    case \"tabs\": {\r\n      const { tabs } = content as { tabs: Array<{ id: string; label: string; content: string }> };\r\n      return (\r\n        <div className=\"w-full\">\r\n          <div className=\"border-b border-border mb-4\">\r\n            <div className=\"flex gap-4\">\r\n              {tabs?.map((tab, idx) => (\r\n                <button\r\n                  key={tab.id}\r\n                  className={`px-4 py-2 font-medium ${idx === 0 ? 'border-b-2 border-primary' : 'text-muted-foreground'}`}\r\n                >\r\n                  {tab.label}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <div className=\"p-4\">\r\n            {tabs?.[0]?.content || \"No content\"}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    case \"accordion\": {\r\n      const { items } = content as { items: Array<{ id: string; title: string; content: string }> };\r\n      return (\r\n        <div className=\"space-y-2\">\r\n          {items?.map((item) => (\r\n            <Card key={item.id}>\r\n              <CardHeader>\r\n                <h3 className=\"font-semibold\">{item.title}</h3>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <p className=\"text-sm text-muted-foreground\">{item.content}</p>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    case \"card\": {\r\n      const { title, description, imageUrl, buttonText, buttonLink } = content as {\r\n        title: string;\r\n        description: string;\r\n        imageUrl: string;\r\n        buttonText: string;\r\n        buttonLink: string;\r\n      };\r\n      return (\r\n        <Card>\r\n          {imageUrl && (\r\n            <img src={imageUrl} alt={title} className=\"w-full h-48 object-cover rounded-t-lg\" />\r\n          )}\r\n          <CardHeader>\r\n            <h3 className=\"text-xl font-semibold\">{title}</h3>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <p className=\"text-muted-foreground mb-4\">{description}</p>\r\n            {buttonText && (\r\n              <Button asChild>\r\n                <a href={buttonLink || \"#\"}>{buttonText}</a>\r\n              </Button>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      );\r\n    }\r\n\r\n    case \"form-input\":\r\n    case \"form-textarea\":\r\n    case \"form-select\":\r\n    case \"form-checkbox\":\r\n    case \"form-submit\": {\r\n      return (\r\n        <div className=\"p-4 border border-dashed border-muted-foreground/30 rounded-lg\">\r\n          <p className=\"text-sm text-muted-foreground\">Form component (preview not available)</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    default:\r\n      console.error(\"Unknown component type:\", component_type, component);\r\n      return (\r\n        <div className=\"p-4 border border-dashed border-muted-foreground/30 rounded-lg bg-muted/20\">\r\n          <p className=\"text-sm text-muted-foreground\">Unknown component type: {component_type}</p>\r\n        </div>\r\n      );\r\n  }\r\n};\r\n\r\n// Entity List Renderer Component\r\nconst EntityListRenderer = ({ content }: { content: any }) => {\r\n  const [records, setRecords] = useState<any[]>([]);\r\n  const [fields, setFields] = useState<any[]>([]);\r\n  const [entity, setEntity] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadEntityData();\r\n  }, [content.entityId]);\r\n\r\n  const loadEntityData = async () => {\r\n    if (!content.entityId) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Load schema from JSON instead of Supabase\r\n      const entityData = await getEntity(content.entityId);\r\n      const fieldsData = await getFields(content.entityId);\r\n\r\n      // Load actual records from Supabase\r\n      const { data: recordsData, error: recordsError } = await supabase\r\n        .from(\"entity_records\")\r\n        .select(\"*\")\r\n        .eq(\"entity_id\", content.entityId)\r\n        .eq(\"is_published\", true)\r\n        .order(\"created_at\", { ascending: content.sortOrder !== \"asc\" })\r\n        .limit(content.limit || 10);\r\n\r\n      if (recordsError) throw recordsError;\r\n\r\n      setEntity(entityData);\r\n      setFields(fieldsData || []);\r\n      setRecords(recordsData || []);\r\n    } catch (error) {\r\n      console.error(\"Error loading entity data:\", error);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  if (loading) return <div className=\"text-muted-foreground\">Loading...</div>;\r\n  if (!entity) return <div className=\"text-muted-foreground\">Entity not found</div>;\r\n  if (records.length === 0) return <div className=\"text-muted-foreground\">No records available</div>;\r\n\r\n  const displayFields = fields.filter(f => (content.fields || []).includes(f.name));\r\n\r\n  if (content.displayStyle === \"table\") {\r\n    return (\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full border-collapse\">\r\n          <thead>\r\n            <tr className=\"border-b\">\r\n              {displayFields.map((field) => (\r\n                <th key={field.id} className=\"text-left p-3 font-semibold\">\r\n                  {field.display_name}\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {records.map((record) => (\r\n              <tr key={record.id} className=\"border-b\">\r\n                {displayFields.map((field) => (\r\n                  <td key={field.id} className=\"p-3\">\r\n                    {renderFieldValue(record.data[field.name], field.field_type)}\r\n                  </td>\r\n                ))}\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (content.displayStyle === \"list\") {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        {records.map((record) => (\r\n          <Card key={record.id} className=\"p-4\">\r\n            {displayFields.map((field) => (\r\n              <div key={field.id} className=\"mb-2\">\r\n                <span className=\"font-semibold\">{field.display_name}: </span>\r\n                <span>{renderFieldValue(record.data[field.name], field.field_type)}</span>\r\n              </div>\r\n            ))}\r\n          </Card>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Grid layout (default)\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n      {records.map((record) => (\r\n        <Card key={record.id} className=\"p-6\">\r\n          {displayFields.map((field) => (\r\n            <div key={field.id} className=\"mb-3\">\r\n              <div className=\"text-sm font-semibold text-muted-foreground mb-1\">\r\n                {field.display_name}\r\n              </div>\r\n              <div className=\"text-base\">\r\n                {renderFieldValue(record.data[field.name], field.field_type)}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </Card>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Entity Detail Renderer Component\r\nconst EntityDetailRenderer = ({ content }: { content: any }) => {\r\n  const [record, setRecord] = useState<any>(null);\r\n  const [fields, setFields] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    loadRecordData();\r\n  }, [content.entityId, content.recordId]);\r\n\r\n  const loadRecordData = async () => {\r\n    if (!content.entityId || !content.recordId) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Load schema from JSON instead of Supabase\r\n      const fieldsData = await getFields(content.entityId);\r\n\r\n      // Load actual record from Supabase\r\n      const { data: recordData, error: recordError } = await supabase\r\n        .from(\"entity_records\")\r\n        .select(\"*\")\r\n        .eq(\"id\", content.recordId)\r\n        .eq(\"is_published\", true)\r\n        .single();\r\n\r\n      if (recordError) throw recordError;\r\n\r\n      setFields(fieldsData || []);\r\n      setRecord(recordData);\r\n    } catch (error) {\r\n      console.error(\"Error loading record:\", error);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  if (loading) return <div className=\"text-muted-foreground\">Loading...</div>;\r\n  if (!record) return <div className=\"text-muted-foreground\">Record not found</div>;\r\n\r\n  const displayFields = fields.filter(f => (content.fields || []).includes(f.name));\r\n\r\n  if (content.layout === \"horizontal\") {\r\n    return (\r\n      <div className=\"flex flex-wrap gap-6\">\r\n        {displayFields.map((field) => (\r\n          <div key={field.id} className=\"flex-1 min-w-[200px]\">\r\n            <div className=\"text-sm font-semibold text-muted-foreground mb-1\">\r\n              {field.display_name}\r\n            </div>\r\n            <div className=\"text-base\">\r\n              {renderFieldValue(record.data[field.name], field.field_type)}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Vertical layout (default)\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {displayFields.map((field) => (\r\n        <div key={field.id}>\r\n          <div className=\"text-sm font-semibold text-muted-foreground mb-1\">\r\n            {field.display_name}\r\n          </div>\r\n          <div className=\"text-base\">\r\n            {renderFieldValue(record.data[field.name], field.field_type)}\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Query Renderer Component\r\nconst QueryRenderer = ({ content }: { content: any }) => {\r\n  const [results, setResults] = useState<any[]>([]);\r\n  const [settings, setSettings] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    executeQuery();\r\n  }, [content.queryId]);\r\n\r\n  const executeQuery = async () => {\r\n    if (!content.queryId) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const { data, error: funcError } = await supabase.functions.invoke('execute-query', {\r\n        body: { queryId: content.queryId }\r\n      });\r\n\r\n      if (funcError) throw funcError;\r\n\r\n      if (data.success) {\r\n        setResults(data.data || []);\r\n        setSettings(data.settings);\r\n      } else {\r\n        setError(data.error || \"Failed to execute query\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error executing query:\", err);\r\n      setError(\"Failed to load query results\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  if (loading) return <div className=\"text-muted-foreground\">Loading query results...</div>;\r\n  if (error) return <div className=\"text-destructive\">{error}</div>;\r\n  if (!settings) return <div className=\"text-muted-foreground\">Query not found</div>;\r\n  if (results.length === 0) return <div className=\"text-muted-foreground\">No results found</div>;\r\n\r\n  const displayStyle = settings.display_style || 'table';\r\n  const showRowNumbers = settings.show_row_numbers || false;\r\n\r\n  if (displayStyle === \"table\") {\r\n    const headers = Object.keys(results[0] || {});\r\n\r\n    return (\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full border-collapse\">\r\n          <thead>\r\n            <tr className=\"border-b\">\r\n              {showRowNumbers && <th className=\"text-left p-3 font-semibold\">#</th>}\r\n              {headers.map((header) => (\r\n                <th key={header} className=\"text-left p-3 font-semibold\">\r\n                  {header}\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {results.map((row, idx) => (\r\n              <tr key={idx} className=\"border-b\">\r\n                {showRowNumbers && <td className=\"p-3 text-muted-foreground\">{idx + 1}</td>}\r\n                {headers.map((header) => (\r\n                  <td key={header} className=\"p-3\">\r\n                    {row[header] !== null && row[header] !== undefined ? String(row[header]) : \"-\"}\r\n                  </td>\r\n                ))}\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (displayStyle === \"list\") {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        {results.map((row, idx) => (\r\n          <Card key={idx} className=\"p-4\">\r\n            {showRowNumbers && <div className=\"text-sm text-muted-foreground mb-2\">#{idx + 1}</div>}\r\n            {Object.entries(row).map(([key, value]) => (\r\n              <div key={key} className=\"mb-2\">\r\n                <span className=\"font-semibold\">{key}: </span>\r\n                <span>{value !== null && value !== undefined ? String(value) : \"-\"}</span>\r\n              </div>\r\n            ))}\r\n          </Card>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Grid layout\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n      {results.map((row, idx) => (\r\n        <Card key={idx} className=\"p-6\">\r\n          {showRowNumbers && <div className=\"text-sm text-muted-foreground mb-3\">#{idx + 1}</div>}\r\n          {Object.entries(row).map(([key, value]) => (\r\n            <div key={key} className=\"mb-3\">\r\n              <div className=\"text-sm font-semibold text-muted-foreground mb-1\">\r\n                {key}\r\n              </div>\r\n              <div className=\"text-base\">\r\n                {value !== null && value !== undefined ? String(value) : \"-\"}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </Card>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Helper function to render field values based on type\r\nconst renderFieldValue = (value: any, fieldType: string) => {\r\n  if (value === null || value === undefined || value === \"\") return \"-\";\r\n\r\n  switch (fieldType) {\r\n    case \"image\":\r\n      return <img src={value} alt=\"\" className=\"max-w-full h-auto rounded\" />;\r\n    case \"url\":\r\n      return <a href={value} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-primary hover:underline\">{value}</a>;\r\n    case \"boolean\":\r\n      return value === \"true\" || value === true ? \"Yes\" : \"No\";\r\n    case \"longtext\":\r\n      return <div className=\"whitespace-pre-wrap\">{value}</div>;\r\n    case \"date\":\r\n      return new Date(value).toLocaleDateString();\r\n    default:\r\n      return String(value);\r\n  }\r\n};\r\n"],"names":[],"mappings":"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"}}]
}