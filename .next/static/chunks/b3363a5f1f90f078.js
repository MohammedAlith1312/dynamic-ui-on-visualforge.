(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12773,e=>{"use strict";var t=e.i(43476),a=e.i(71645),o=e.i(76639),i=e.i(19455),n=e.i(37727),s=e.i(31310),r=e.i(25037),l=e.i(18812);e.s(["LayoutPreviewModal",0,({open:e,onOpenChange:d,layout:c,rows:u,components:p})=>{let[m,f]=(0,a.useState)("desktop");return(0,t.jsx)(o.Dialog,{open:e,onOpenChange:d,children:(0,t.jsxs)(o.DialogContent,{className:"max-w-[95vw] max-h-[90vh] p-0 gap-0",hideClose:!0,children:[(0,t.jsxs)(o.DialogTitle,{className:"sr-only",children:["Layout Preview: ",c?.title]}),(0,t.jsxs)("div",{className:"flex items-center justify-between border-b px-4 py-3 bg-card",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold","aria-hidden":"true",children:["Layout Preview: ",c?.title]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(r.ResponsiveControls,{currentBreakpoint:m,onBreakpointChange:f}),(0,t.jsx)(i.Button,{variant:"ghost",size:"icon",onClick:()=>d(!1),children:(0,t.jsx)(n.X,{className:"h-4 w-4"})})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-auto bg-background",children:(0,t.jsx)(l.DeviceFrame,{breakpoint:m,children:(0,t.jsxs)("div",{className:"min-h-full flex flex-col",children:[u.sort((e,t)=>e.position-t.position).map(e=>{let a=p.filter(t=>t.row_id===e.id).sort((e,t)=>e.position-t.position),o=Array.from({length:e.columns},()=>[]);return a.forEach(t=>{t.column_index<e.columns&&o[t.column_index].push(t)}),(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8 grid gap-4",style:{gridTemplateColumns:`repeat(${e.columns}, 1fr)`},children:o.map((e,a)=>(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,t.jsx)(s.ComponentRenderer,{component:e},e.id))},a))})},e.id)}),0===u.length&&(0,t.jsx)("p",{className:"text-center text-muted-foreground py-12",children:"No content yet. Add rows and components to see the preview."})]})})})]})})}])},74886,e=>{"use strict";let t=(0,e.i(75254).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],74886)},48256,e=>{"use strict";let t=(0,e.i(75254).default)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);e.s(["Globe",()=>t],48256)},17923,e=>{"use strict";let t=(0,e.i(75254).default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);e.s(["BarChart3",()=>t],17923)},80376,e=>{"use strict";var t=e.i(43476),a=e.i(26999),o=e.i(25913),i=e.i(37727),n=e.i(71645),s=e.i(75157);let r=a.Root,l=a.Trigger;a.Close;let d=a.Portal,c=n.forwardRef(({className:e,...o},i)=>(0,t.jsx)(a.Overlay,{className:(0,s.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...o,ref:i}));c.displayName=a.Overlay.displayName;let u=(0,o.cva)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),p=n.forwardRef(({side:e="right",className:o,children:n,...r},l)=>(0,t.jsxs)(d,{children:[(0,t.jsx)(c,{}),(0,t.jsxs)(a.Content,{ref:l,className:(0,s.cn)(u({side:e}),o),...r,children:[n,(0,t.jsxs)(a.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[(0,t.jsx)(i.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));p.displayName=a.Content.displayName;let m=({className:e,...a})=>(0,t.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...a});m.displayName="SheetHeader";let f=n.forwardRef(({className:e,...o},i)=>(0,t.jsx)(a.Title,{ref:i,className:(0,s.cn)("text-lg font-semibold text-foreground",e),...o}));f.displayName=a.Title.displayName,n.forwardRef(({className:e,...o},i)=>(0,t.jsx)(a.Description,{ref:i,className:(0,s.cn)("text-sm text-muted-foreground",e),...o})).displayName=a.Description.displayName,e.s(["Sheet",()=>r,"SheetContent",()=>p,"SheetHeader",()=>m,"SheetTitle",()=>f,"SheetTrigger",()=>l])},30325,73264,46387,71245,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);e.s(["Table2",()=>a],30325);let o=(0,t.default)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);e.s(["LayoutGrid",()=>o],73264);let i=(0,t.default)("Columns3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);e.s(["Columns3",()=>i],46387);let n=(0,t.default)("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);e.s(["Images",()=>n],71245)},99602,54449,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["ArrowUpDown",()=>t],99602);var a=e.i(43476),o=e.i(10204),i=e.i(67489),n=e.i(57428),s=e.i(50570),r=e.i(62050);e.s(["CardLayoutEditor",0,({fields:e,layout:t,onChange:l,showImageField:d=!0})=>{let c=e.filter(e=>e.field_type===r.E_FieldDataType.Image);return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o.Label,{className:"text-sm font-medium",children:"Title Field *"}),(0,a.jsxs)(i.Select,{value:t.titleField,onValueChange:e=>l({...t,titleField:e}),children:[(0,a.jsx)(i.SelectTrigger,{className:"mt-1",children:(0,a.jsx)(i.SelectValue,{placeholder:"Select title field"})}),(0,a.jsx)(i.SelectContent,{children:e.map(e=>(0,a.jsx)(i.SelectItem,{value:e.name,children:e.display_name},e.name))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.Label,{className:"text-sm font-medium",children:"Subtitle Field (Optional)"}),(0,a.jsxs)(i.Select,{value:t.subtitleField||"none",onValueChange:e=>l({...t,subtitleField:"none"===e?void 0:e}),children:[(0,a.jsx)(i.SelectTrigger,{className:"mt-1",children:(0,a.jsx)(i.SelectValue,{placeholder:"Select subtitle field"})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"none",children:"None"}),e.map(e=>(0,a.jsx)(i.SelectItem,{value:e.name,children:e.display_name},e.name))]})]})]}),d&&c.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)(o.Label,{className:"text-sm font-medium",children:"Image Field (Optional)"}),(0,a.jsxs)(i.Select,{value:t.imageField||"none",onValueChange:e=>l({...t,imageField:"none"===e?void 0:e}),children:[(0,a.jsx)(i.SelectTrigger,{className:"mt-1",children:(0,a.jsx)(i.SelectValue,{placeholder:"Select image field"})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"none",children:"None"}),c.map(e=>(0,a.jsx)(i.SelectItem,{value:e.name,children:e.display_name},e.name))]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.Label,{className:"text-sm font-medium mb-2 block",children:"Additional Fields to Display"}),(0,a.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.map(e=>{let i=t.displayFields.some(t=>t.fieldId===e.name),r=e.name===t.titleField,d=e.name===t.subtitleField,c=e.name===t.imageField,u=r||d||c;return(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(s.GripVertical,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(n.Checkbox,{id:`display-${e.name}`,checked:i,disabled:u,onCheckedChange:a=>{var o;let i;return o=e.name,i=a?[...t.displayFields,{fieldId:o,position:t.displayFields.length}]:t.displayFields.filter(e=>e.fieldId!==o),void l({...t,displayFields:i})}}),(0,a.jsxs)(o.Label,{htmlFor:`display-${e.name}`,className:`font-normal cursor-pointer flex-1 ${u?"text-muted-foreground":""}`,children:[e.display_name,u&&(0,a.jsxs)("span",{className:"text-xs ml-2",children:["(Used as ",r?"title":d?"subtitle":"image",")"]})]})]},e.name)})})]})]})}],54449)},39616,e=>{"use strict";let t=(0,e.i(75254).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>t],39616)},24687,e=>{"use strict";var t=e.i(43476),a=e.i(71645),o=e.i(75157);let i=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...a}));i.displayName="Textarea",e.s(["Textarea",()=>i])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},50570,e=>{"use strict";let t=(0,e.i(75254).default)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);e.s(["GripVertical",()=>t],50570)},57428,e=>{"use strict";var t=e.i(43476),a=e.i(71645),o=e.i(20783),i=e.i(30030),n=e.i(81140),s=e.i(69340),r=e.i(99682),l=e.i(35804),d=e.i(96626),c=e.i(48425),u="Checkbox",[p,m]=(0,i.createContextScope)(u),[f,y]=p(u);function h(e){let{__scopeCheckbox:o,checked:i,children:n,defaultChecked:r,disabled:l,form:d,name:c,onCheckedChange:p,required:m,value:y="on",internal_do_not_use_render:h}=e,[x,w]=(0,s.useControllableState)({prop:i,defaultProp:r??!1,onChange:p,caller:u}),[g,v]=a.useState(null),[b,k]=a.useState(null),j=a.useRef(!1),C=!g||!!d||!!g.closest("form"),S={checked:x,disabled:l,setChecked:w,control:g,setControl:v,name:c,form:d,value:y,hasConsumerStoppedPropagationRef:j,required:m,defaultChecked:!_(r)&&r,isFormControl:C,bubbleInput:b,setBubbleInput:k};return(0,t.jsx)(f,{scope:o,...S,children:"function"==typeof h?h(S):n})}var x="CheckboxTrigger",w=a.forwardRef(({__scopeCheckbox:e,onKeyDown:i,onClick:s,...r},l)=>{let{control:d,value:u,disabled:p,checked:m,required:f,setControl:h,setChecked:w,hasConsumerStoppedPropagationRef:g,isFormControl:v,bubbleInput:b}=y(x,e),k=(0,o.useComposedRefs)(l,h),j=a.useRef(m);return a.useEffect(()=>{let e=d?.form;if(e){let t=()=>w(j.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[d,w]),(0,t.jsx)(c.Primitive.button,{type:"button",role:"checkbox","aria-checked":_(m)?"mixed":m,"aria-required":f,"data-state":C(m),"data-disabled":p?"":void 0,disabled:p,value:u,...r,ref:k,onKeyDown:(0,n.composeEventHandlers)(i,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,n.composeEventHandlers)(s,e=>{w(e=>!!_(e)||!e),b&&v&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})})});w.displayName=x;var g=a.forwardRef((e,a)=>{let{__scopeCheckbox:o,name:i,checked:n,defaultChecked:s,required:r,disabled:l,value:d,onCheckedChange:c,form:u,...p}=e;return(0,t.jsx)(h,{__scopeCheckbox:o,checked:n,defaultChecked:s,disabled:l,required:r,onCheckedChange:c,name:i,form:u,value:d,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w,{...p,ref:a,__scopeCheckbox:o}),e&&(0,t.jsx)(j,{__scopeCheckbox:o})]})})});g.displayName=u;var v="CheckboxIndicator",b=a.forwardRef((e,a)=>{let{__scopeCheckbox:o,forceMount:i,...n}=e,s=y(v,o);return(0,t.jsx)(d.Presence,{present:i||_(s.checked)||!0===s.checked,children:(0,t.jsx)(c.Primitive.span,{"data-state":C(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:a,style:{pointerEvents:"none",...e.style}})})});b.displayName=v;var k="CheckboxBubbleInput",j=a.forwardRef(({__scopeCheckbox:e,...i},n)=>{let{control:s,hasConsumerStoppedPropagationRef:d,checked:u,defaultChecked:p,required:m,disabled:f,name:h,value:x,form:w,bubbleInput:g,setBubbleInput:v}=y(k,e),b=(0,o.useComposedRefs)(n,v),j=(0,r.usePrevious)(u),C=(0,l.useSize)(s);a.useEffect(()=>{if(!g)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!d.current;if(j!==u&&e){let a=new Event("click",{bubbles:t});g.indeterminate=_(u),e.call(g,!_(u)&&u),g.dispatchEvent(a)}},[g,j,u,d]);let S=a.useRef(!_(u)&&u);return(0,t.jsx)(c.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??S.current,required:m,disabled:f,name:h,value:x,form:w,...i,tabIndex:-1,ref:b,style:{...i.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function _(e){return"indeterminate"===e}function C(e){return _(e)?"indeterminate":e?"checked":"unchecked"}j.displayName=k;var S=e.i(43531),N=e.i(75157);let R=a.forwardRef(({className:e,...a},o)=>(0,t.jsx)(g,{ref:o,className:(0,N.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:(0,t.jsx)(b,{className:(0,N.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(S.Check,{className:"h-4 w-4"})})}));R.displayName=g.displayName,e.s(["Checkbox",()=>R],57428)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},87316,61277,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["default",()=>t],61277),e.s(["Calendar",()=>t],87316)},71649,e=>{"use strict";let t=(0,e.i(75254).default)("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);e.s(["Type",()=>t],71649)},73708,21345,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>a],73708);let o=(0,t.default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);e.s(["Link",()=>o],21345)},63488,e=>{"use strict";let t=(0,e.i(75254).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>t],63488)},47780,e=>{"use strict";let t=(0,e.i(75254).default)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);e.s(["Palette",()=>t],47780)},14683,e=>{"use strict";let t=(0,e.i(75254).default)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Circle",()=>t],14683)},67692,e=>{"use strict";var t=e.i(43476),a=e.i(71645),o=e.i(70152),i=e.i(81140),n=e.i(20783),s=e.i(30030),r=e.i(69340),l=e.i(86318),d=e.i(99682),c=e.i(35804),u=e.i(48425),p=e.i(75830),m=["PageUp","PageDown"],f=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],y={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},h="Slider",[x,w,g]=(0,p.createCollection)(h),[v,b]=(0,s.createContextScope)(h,[g]),[k,j]=v(h),_=a.forwardRef((e,n)=>{let{name:s,min:l=0,max:d=100,step:c=1,orientation:u="horizontal",disabled:p=!1,minStepsBetweenThumbs:y=0,defaultValue:h=[l],value:w,onValueChange:g=()=>{},onValueCommit:v=()=>{},inverted:b=!1,form:j,..._}=e,C=a.useRef(new Set),S=a.useRef(0),D="horizontal"===u,[P=[],M]=(0,r.useControllableState)({prop:w,defaultProp:h,onChange:e=>{let t=[...C.current];t[S.current]?.focus(),g(e)}}),E=a.useRef(P);function F(e,t,{commit:a}={commit:!1}){let i,n=(String(c).split(".")[1]||"").length,s=Math.round((Math.round((e-l)/c)*c+l)*(i=Math.pow(10,n)))/i,r=(0,o.clamp)(s,[l,d]);M((e=[])=>{let o=function(e=[],t,a){let o=[...e];return o[a]=t,o.sort((e,t)=>e-t)}(e,r,t);if(!function(e,t){if(t>0)return Math.min(...e.slice(0,-1).map((t,a)=>e[a+1]-t))>=t;return!0}(o,y*c))return e;{S.current=o.indexOf(r);let t=String(o)!==String(e);return t&&a&&v(o),t?o:e}})}return(0,t.jsx)(k,{scope:e.__scopeSlider,name:s,disabled:p,min:l,max:d,valueIndexToChangeRef:S,thumbs:C.current,values:P,orientation:u,form:j,children:(0,t.jsx)(x.Provider,{scope:e.__scopeSlider,children:(0,t.jsx)(x.Slot,{scope:e.__scopeSlider,children:(0,t.jsx)(D?N:R,{"aria-disabled":p,"data-disabled":p?"":void 0,..._,ref:n,onPointerDown:(0,i.composeEventHandlers)(_.onPointerDown,()=>{p||(E.current=P)}),min:l,max:d,inverted:b,onSlideStart:p?void 0:function(e){let t=function(e,t){if(1===e.length)return 0;let a=e.map(e=>Math.abs(e-t)),o=Math.min(...a);return a.indexOf(o)}(P,e);F(e,t)},onSlideMove:p?void 0:function(e){F(e,S.current)},onSlideEnd:p?void 0:function(){let e=E.current[S.current];P[S.current]!==e&&v(P)},onHomeKeyDown:()=>!p&&F(l,0,{commit:!0}),onEndKeyDown:()=>!p&&F(d,P.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!p){let a=m.includes(e.key)||e.shiftKey&&f.includes(e.key),o=S.current;F(P[o]+c*(a?10:1)*t,o,{commit:!0})}}})})})})});_.displayName=h;var[C,S]=v(h,{startEdge:"left",endEdge:"right",size:"width",direction:1}),N=a.forwardRef((e,o)=>{let{min:i,max:s,dir:r,inverted:d,onSlideStart:c,onSlideMove:u,onSlideEnd:p,onStepKeyDown:m,...f}=e,[h,x]=a.useState(null),w=(0,n.useComposedRefs)(o,e=>x(e)),g=a.useRef(void 0),v=(0,l.useDirection)(r),b="ltr"===v,k=b&&!d||!b&&d;function j(e){let t=g.current||h.getBoundingClientRect(),a=U([0,t.width],k?[i,s]:[s,i]);return g.current=t,a(e-t.left)}return(0,t.jsx)(C,{scope:e.__scopeSlider,startEdge:k?"left":"right",endEdge:k?"right":"left",direction:k?1:-1,size:"width",children:(0,t.jsx)(D,{dir:v,"data-orientation":"horizontal",...f,ref:w,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let t=j(e.clientX);c?.(t)},onSlideMove:e=>{let t=j(e.clientX);u?.(t)},onSlideEnd:()=>{g.current=void 0,p?.()},onStepKeyDown:e=>{let t=y[k?"from-left":"from-right"].includes(e.key);m?.({event:e,direction:t?-1:1})}})})}),R=a.forwardRef((e,o)=>{let{min:i,max:s,inverted:r,onSlideStart:l,onSlideMove:d,onSlideEnd:c,onStepKeyDown:u,...p}=e,m=a.useRef(null),f=(0,n.useComposedRefs)(o,m),h=a.useRef(void 0),x=!r;function w(e){let t=h.current||m.current.getBoundingClientRect(),a=U([0,t.height],x?[s,i]:[i,s]);return h.current=t,a(e-t.top)}return(0,t.jsx)(C,{scope:e.__scopeSlider,startEdge:x?"bottom":"top",endEdge:x?"top":"bottom",size:"height",direction:x?1:-1,children:(0,t.jsx)(D,{"data-orientation":"vertical",...p,ref:f,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let t=w(e.clientY);l?.(t)},onSlideMove:e=>{let t=w(e.clientY);d?.(t)},onSlideEnd:()=>{h.current=void 0,c?.()},onStepKeyDown:e=>{let t=y[x?"from-bottom":"from-top"].includes(e.key);u?.({event:e,direction:t?-1:1})}})})}),D=a.forwardRef((e,a)=>{let{__scopeSlider:o,onSlideStart:n,onSlideMove:s,onSlideEnd:r,onHomeKeyDown:l,onEndKeyDown:d,onStepKeyDown:c,...p}=e,y=j(h,o);return(0,t.jsx)(u.Primitive.span,{...p,ref:a,onKeyDown:(0,i.composeEventHandlers)(e.onKeyDown,e=>{"Home"===e.key?(l(e),e.preventDefault()):"End"===e.key?(d(e),e.preventDefault()):m.concat(f).includes(e.key)&&(c(e),e.preventDefault())}),onPointerDown:(0,i.composeEventHandlers)(e.onPointerDown,e=>{let t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),y.thumbs.has(t)?t.focus():n(e)}),onPointerMove:(0,i.composeEventHandlers)(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&s(e)}),onPointerUp:(0,i.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),r(e))})})}),P="SliderTrack",M=a.forwardRef((e,a)=>{let{__scopeSlider:o,...i}=e,n=j(P,o);return(0,t.jsx)(u.Primitive.span,{"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation,...i,ref:a})});M.displayName=P;var E="SliderRange",F=a.forwardRef((e,o)=>{let{__scopeSlider:i,...s}=e,r=j(E,i),l=S(E,i),d=a.useRef(null),c=(0,n.useComposedRefs)(o,d),p=r.values.length,m=r.values.map(e=>A(e,r.min,r.max)),f=p>1?Math.min(...m):0,y=100-Math.max(...m);return(0,t.jsx)(u.Primitive.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...s,ref:c,style:{...e.style,[l.startEdge]:f+"%",[l.endEdge]:y+"%"}})});F.displayName=E;var T="SliderThumb",I=a.forwardRef((e,o)=>{let i=w(e.__scopeSlider),[s,r]=a.useState(null),l=(0,n.useComposedRefs)(o,e=>r(e)),d=a.useMemo(()=>s?i().findIndex(e=>e.ref.current===s):-1,[i,s]);return(0,t.jsx)(L,{...e,ref:l,index:d})}),L=a.forwardRef((e,o)=>{var s,r,l,d,p;let m,f,{__scopeSlider:y,index:h,name:w,...g}=e,v=j(T,y),b=S(T,y),[k,_]=a.useState(null),C=(0,n.useComposedRefs)(o,e=>_(e)),N=!k||v.form||!!k.closest("form"),R=(0,c.useSize)(k),D=v.values[h],P=void 0===D?0:A(D,v.min,v.max),M=(s=h,(r=v.values.length)>2?`Value ${s+1} of ${r}`:2===r?["Minimum","Maximum"][s]:void 0),E=R?.[b.size],F=E?(l=E,d=P,p=b.direction,f=U([0,50],[0,m=l/2]),(m-f(d)*p)*p):0;return a.useEffect(()=>{if(k)return v.thumbs.add(k),()=>{v.thumbs.delete(k)}},[k,v.thumbs]),(0,t.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[b.startEdge]:`calc(${P}% + ${F}px)`},children:[(0,t.jsx)(x.ItemSlot,{scope:e.__scopeSlider,children:(0,t.jsx)(u.Primitive.span,{role:"slider","aria-label":e["aria-label"]||M,"aria-valuemin":v.min,"aria-valuenow":D,"aria-valuemax":v.max,"aria-orientation":v.orientation,"data-orientation":v.orientation,"data-disabled":v.disabled?"":void 0,tabIndex:v.disabled?void 0:0,...g,ref:C,style:void 0===D?{display:"none"}:e.style,onFocus:(0,i.composeEventHandlers)(e.onFocus,()=>{v.valueIndexToChangeRef.current=h})})}),N&&(0,t.jsx)(q,{name:w??(v.name?v.name+(v.values.length>1?"[]":""):void 0),form:v.form,value:D},h)]})});I.displayName=T;var q=a.forwardRef(({__scopeSlider:e,value:o,...i},s)=>{let r=a.useRef(null),l=(0,n.useComposedRefs)(r,s),c=(0,d.usePrevious)(o);return a.useEffect(()=>{let e=r.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(c!==o&&t){let a=new Event("input",{bubbles:!0});t.call(e,o),e.dispatchEvent(a)}},[c,o]),(0,t.jsx)(u.Primitive.input,{style:{display:"none"},...i,ref:l,defaultValue:o})});function A(e,t,a){return(0,o.clamp)(100/(a-t)*(e-t),[0,100])}function U(e,t){return a=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let o=(t[1]-t[0])/(e[1]-e[0]);return t[0]+o*(a-e[0])}}q.displayName="RadioBubbleInput";var O=e.i(75157);let z=a.forwardRef(({className:e,...a},o)=>(0,t.jsxs)(_,{ref:o,className:(0,O.cn)("relative flex w-full touch-none select-none items-center",e),...a,children:[(0,t.jsx)(M,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,t.jsx)(F,{className:"absolute h-full bg-primary"})}),(0,t.jsx)(I,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));z.displayName=_.displayName,e.s(["Slider",()=>z],67692)},40325,21430,49459,84608,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);e.s(["Undo",()=>a],40325);let o=(0,t.default)("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);e.s(["Redo",()=>o],21430);var i=e.i(71645);e.s(["useHistory",0,()=>{let[e,t]=(0,i.useState)([]),[a,o]=(0,i.useState)(-1),n=(0,i.useCallback)(i=>{let n={...i,timestamp:Date.now()};n.execute();let s=e.slice(0,a+1);s.push(n),s.length>50?(s.shift(),o(49)):o(s.length-1),t(s)},[e,a]),s=(0,i.useCallback)(()=>{a<0||(e[a].undo(),o(a-1))},[e,a]),r=(0,i.useCallback)(()=>{if(a>=e.length-1)return;let t=a+1;e[t].execute(),o(t)},[e,a]),l=a>=0;return{execute:n,undo:s,redo:r,canUndo:l,canRedo:a<e.length-1,clear:(0,i.useCallback)(()=>{t([]),o(-1)},[])}}],49459);let n=e=>!!e&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable);e.s(["useKeyboardShortcuts",0,e=>{(0,i.useEffect)(()=>{let t=t=>{let a=navigator.platform.toUpperCase().indexOf("MAC")>=0?t.metaKey:t.ctrlKey;if(a&&("z"===t.key||"y"===t.key||"d"===t.key||"c"===t.key||"v"===t.key||"s"===t.key)&&t.preventDefault(),a&&"z"===t.key&&!t.shiftKey&&e.onUndo)return void e.onUndo();if(a&&"z"===t.key&&t.shiftKey||a&&"y"===t.key){e.onRedo&&e.onRedo();return}if(("Backspace"===t.key||"Delete"===t.key)&&!n(t.target)){e.onDelete&&(t.preventDefault(),e.onDelete());return}a&&"d"===t.key&&e.onDuplicate?e.onDuplicate():a&&"c"===t.key&&!n(t.target)&&e.onCopy?e.onCopy():a&&"v"===t.key&&!n(t.target)&&e.onPaste?e.onPaste():a&&"s"===t.key&&e.onSave&&e.onSave()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e])}],84608)},18450,e=>{"use strict";var t=e.i(43476),a=e.i(71645),o=e.i(18566),i=e.i(41867),n=e.i(63749),s=e.i(19455),r=e.i(46696),l=e.i(71689),d=e.i(86536),c=e.i(77705),u=e.i(51445),p=e.i(40325),m=e.i(21430),f=e.i(41396),y=e.i(48152),h=e.i(30909),x=e.i(77183),w=e.i(12773),g=e.i(49459),v=e.i(84608);e.s(["default",0,()=>{let e=(0,o.useParams)().layoutId,b=(0,o.useRouter)(),{copiedComponent:k}=(0,n.useClipboard)(),[j,_]=(0,a.useState)(null),[C,S]=(0,a.useState)([]),[N,R]=(0,a.useState)([]),[D,P]=(0,a.useState)(!0),[M,E]=(0,a.useState)(null),[F,T]=(0,a.useState)(!1),[I,L]=(0,a.useState)(null),q=(0,g.useHistory)();(0,v.useKeyboardShortcuts)({onUndo:()=>q.canUndo&&q.undo(),onRedo:()=>q.canRedo&&q.redo(),onDelete:()=>I&&X(I),onDuplicate:()=>I&&J(I)}),(0,a.useEffect)(()=>{A()},[e]);let A=async()=>{if(!e)return;let{data:t,error:a}=await i.supabase.from("layouts").select("*").eq("id",e).single();if(a){r.toast.error("Failed to load layout"),b.push("/admin/layouts");return}let{data:o}=await i.supabase.from("layout_rows").select("*").eq("layout_id",e).order("position"),{data:n}=await i.supabase.from("layout_components").select("*").eq("layout_id",e).order("position");_(t),S(o||[]),R(n||[]),P(!1)},U=async()=>{if(!e)return;let{data:t,error:a}=await i.supabase.from("layout_rows").insert({layout_id:e,position:C.length,columns:1}).select().single();a?r.toast.error("Failed to add row"):(S([...C,t]),r.toast.success("Row added"))},O=async e=>{if(!confirm("Delete this row and all its components?"))return;let{error:t}=await i.supabase.from("layout_rows").delete().eq("id",e);t?r.toast.error("Failed to delete row"):(S(C.filter(t=>t.id!==e)),R(N.filter(t=>t.row_id!==e)),r.toast.success("Row deleted"))},z=async(e,t)=>{let{error:a}=await i.supabase.from("layout_rows").update({columns:t}).eq("id",e);a?r.toast.error("Failed to update columns"):S(C.map(a=>a.id===e?{...a,columns:t}:a))},H=async(e,t)=>{let{error:a}=await i.supabase.from("layout_rows").update({styles:t}).eq("id",e);a?r.toast.error("Failed to update row styles"):S(C.map(a=>a.id===e?{...a,styles:t}:a))},V=async(e,t)=>{let{error:a}=await i.supabase.from("layout_rows").update({column_widths:t}).eq("id",e);a?r.toast.error("Failed to update column widths"):S(C.map(a=>a.id===e?{...a,column_widths:t}:a))},B=async(e,t)=>{let{error:a}=await i.supabase.from("layout_rows").update({responsive_config:t}).eq("id",e);a?r.toast.error("Failed to update responsive config"):S(C.map(a=>a.id===e?{...a,responsive_config:t}:a))},K=async(e,t)=>{let{error:a}=await i.supabase.from("layout_components").update({styles:t}).eq("id",e);a?r.toast.error("Failed to update component styles"):R(N.map(a=>a.id===e?{...a,styles:t}:a))},G=async e=>{S(e);for(let t=0;t<e.length;t++)await i.supabase.from("layout_rows").update({position:t}).eq("id",e[t].id)},$=async(e,t)=>{let{error:a}=await i.supabase.from("layout_components").update({content:t}).eq("id",e);a?r.toast.error("Failed to update component"):R(N.map(a=>a.id===e?{...a,content:t}:a))},X=async e=>{let{error:t}=await i.supabase.from("layout_components").delete().eq("id",e);t?r.toast.error("Failed to delete component"):(R(N.filter(t=>t.id!==e)),r.toast.success("Component deleted"))},W=async t=>{if(e){for(let a of t.rows||[]){let{data:t,error:o}=await i.supabase.from("layout_rows").insert({layout_id:e,position:C.length,columns:a.columns||1,column_widths:a.column_widths||[],styles:a.styles||{}}).select().single();if(o||!t){r.toast.error("Failed to insert template row");continue}for(let o of a.components||[])await i.supabase.from("layout_components").insert({layout_id:e,row_id:t.id,component_type:o.component_type,column_index:o.column_index,position:o.position,content:o.content||{},styles:o.styles||{}})}await A(),r.toast.success("Template inserted successfully")}},J=async t=>{let a=N.find(e=>e.id===t);if(!a||!e)return;let o=N.filter(e=>e.row_id===a.row_id&&e.column_index===a.column_index),{data:n,error:s}=await i.supabase.from("layout_components").insert({layout_id:e,row_id:a.row_id,column_index:a.column_index,component_type:a.component_type,content:a.content,position:o.length}).select().single();s?r.toast.error("Failed to duplicate component"):(R([...N,n]),r.toast.success("Component duplicated"))},Y=async(t,a)=>{if(!k||!e)return;let o=N.filter(e=>e.row_id===t&&e.column_index===a),{data:n,error:s}=await i.supabase.from("layout_components").insert({layout_id:e,row_id:t,column_index:a,component_type:k.component_type,content:k.content,position:o.length}).select().single();s?r.toast.error("Failed to paste component"):(R([...N,n]),r.toast.success("Component pasted"))},Z=async(e,t)=>{let a=N.find(t=>t.id===e);if(!a)return;let o=N.filter(e=>e.row_id===a.row_id&&e.column_index===a.column_index).sort((e,t)=>e.position-t.position).map((o,n)=>o.id===e?i.supabase.from("layout_components").update({position:t}).eq("id",o.id):n>=t&&o.position<a.position?i.supabase.from("layout_components").update({position:n+1}).eq("id",o.id):n<=t&&o.position>a.position?i.supabase.from("layout_components").update({position:n-1}).eq("id",o.id):null).filter(Boolean);await Promise.all(o),await A(),r.toast.success("Component moved")},Q=async t=>{let a=C.find(e=>e.id===t);if(!a||!e)return;let{error:o}=await i.supabase.from("layout_rows").insert({layout_id:e,position:a.position,columns:1});if(o)return void r.toast.error("Failed to add row");let n=C.filter(e=>e.position>=a.position);await Promise.all(n.map(e=>i.supabase.from("layout_rows").update({position:e.position+1}).eq("id",e.id))),await A(),r.toast.success("Row added")},ee=async t=>{let a=C.find(e=>e.id===t);if(!a||!e)return;let{error:o}=await i.supabase.from("layout_rows").insert({layout_id:e,position:a.position+1,columns:1});if(o)return void r.toast.error("Failed to add row");let n=C.filter(e=>e.position>a.position);await Promise.all(n.map(e=>i.supabase.from("layout_rows").update({position:e.position+1}).eq("id",e.id))),await A(),r.toast.success("Row added")},et=async t=>{let a=C.find(e=>e.id===t);if(!a||!e)return;let{data:o,error:n}=await i.supabase.from("layout_rows").insert({layout_id:e,position:a.position+1,columns:a.columns,styles:a.styles,column_widths:a.column_widths}).select().single();if(n||!o)return void r.toast.error("Failed to duplicate row");let s=N.filter(e=>e.row_id===t);await Promise.all(s.map(t=>i.supabase.from("layout_components").insert({layout_id:e,row_id:o.id,column_index:t.column_index,position:t.position,component_type:t.component_type,content:t.content,styles:t.styles}))),await A(),r.toast.success("Row duplicated")},ea=async t=>{let{active:a,over:o}=t;if(!o)return void E(null);let n=a.id,s=a.data.current,l=o.data.current;if((n.startsWith("new-")||n.startsWith("new-widget-"))&&(s?.type==="new-component"||s?.type==="new-widget")){let t=l?.rowId,a=l?.columnIndex;if(!t||null===a||!e)return void E(null);let o=N.filter(e=>e.row_id===t&&e.column_index===a);if("new-widget"===s.type){r.toast.error("Widgets cannot be added to layouts"),E(null);return}{let n=s.componentType,{data:l,error:d}=await i.supabase.from("layout_components").insert({layout_id:e,row_id:t,column_index:a,component_type:n,content:(e=>{switch(e){case"heading":return{text:"New Heading",level:"h2"};case"paragraph":return{text:"New paragraph text"};case"image":return{url:"",alt:"Image"};case"button":return{text:"Click me",link:""};case"link":return{text:"Link",url:""};case"video":return{url:""};case"divider":default:return{};case"spacer":return{height:"medium"};case"quote":return{text:"Quote text",author:""};case"list":return{items:"Item 1\nItem 2\nItem 3",type:"bullet"};case"code":return{code:"console.log('Hello');",language:"javascript"};case"query":return{queryId:""};case"datasource":return{dataSourceType:"entity",viewType:"table",viewOptions:{visibleColumns:[],sortField:null,sortOrder:"asc",filters:[]}};case"chart":return{chartType:"bar",data:JSON.stringify([{name:"Jan",value:400},{name:"Feb",value:300},{name:"Mar",value:600},{name:"Apr",value:800},{name:"May",value:500},{name:"Jun",value:700}],null,2),title:"Sample Bar Chart",xAxisKey:"name",yAxisKey:"value"};case"tabs":return{tabs:[{id:"tab-1",label:"Tab 1",content:"Content 1"},{id:"tab-2",label:"Tab 2",content:"Content 2"}]};case"accordion":return{items:[{id:"item-1",title:"Section 1",content:"Content 1"},{id:"item-2",title:"Section 2",content:"Content 2"}]};case"card":return{layout:"image-top",title:"Card Title",description:"Card description",imageUrl:"",buttonText:"Learn More",buttonLink:""};case"form-input":return{fieldName:"field_name",label:"Field Label",placeholder:"Enter value...",inputType:"text",required:!1};case"form-textarea":return{fieldName:"message",label:"Message",placeholder:"Enter your message...",rows:4,required:!1};case"form-select":return{fieldName:"select_field",label:"Select Option",placeholder:"Choose...",options:"Option 1\nOption 2\nOption 3",required:!1};case"form-checkbox":return{fieldName:"checkbox_field",label:"Select Options",options:"Option 1\nOption 2\nOption 3",type:"checkbox",required:!1};case"form-submit":return{buttonText:"Submit",buttonVariant:"default",successMessage:"Form submitted successfully!",submitAction:"custom"}}})(n),position:o.length}).select().single();d?r.toast.error("Failed to add component"):(R([...N,l]),r.toast.success("Component added"))}return void E(null)}let d=N.find(e=>e.id===n);if(!d)return void E(null);await i.supabase.from("layout_components").update({row_id:d.row_id,column_index:d.column_index}).eq("id",n);let c=N.filter(e=>e.row_id===d.row_id&&e.column_index===d.column_index).sort((e,t)=>e.position-t.position);for(let e=0;e<c.length;e++)await i.supabase.from("layout_components").update({position:e}).eq("id",c[e].id);E(null)},eo=async()=>{if(!j)return;let{error:e}=await i.supabase.from("layouts").update({is_published:!j.is_published}).eq("id",j.id);e?r.toast.error("Failed to update layout"):(_({...j,is_published:!j.is_published}),r.toast.success(j.is_published?"Layout unpublished":"Layout published"))};return D?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):(0,t.jsxs)(x.DndContext,{collisionDetection:x.pointerWithin,onDragStart:e=>{let{active:t}=e,a=t.data.current;a?.type==="new-component"?E(a.componentType):a?.type==="new-widget"&&E("widget")},onDragEnd:ea,onDragOver:e=>{let{active:t,over:a}=e;if(!a)return;let o=t.id,i=t.data.current,n=a.data.current;if(i?.type==="component"&&n?.type==="droppable-column"){let e=i.component,t=n.rowId,a=n.columnIndex;(e.row_id!==t||e.column_index!==a)&&R(N.map(e=>e.id===o?{...e,row_id:t,column_index:a}:e))}},children:[(0,t.jsx)(h.SidebarProvider,{children:(0,t.jsxs)("div",{className:"min-h-screen flex w-full bg-background",children:[(0,t.jsx)(f.ComponentsSidebar,{isLayoutEditor:!0}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsx)("header",{className:"border-b bg-card shadow-[var(--shadow-soft)] sticky top-0 z-50",children:(0,t.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(h.SidebarTrigger,{}),(0,t.jsxs)(s.Button,{variant:"outline",onClick:()=>b.push("/admin/layouts"),className:"gap-2",children:[(0,t.jsx)(l.ArrowLeft,{className:"h-4 w-4"}),"Back"]}),(0,t.jsx)("h1",{className:"text-xl font-bold",children:j?.title})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(s.Button,{variant:"ghost",size:"icon",onClick:()=>q.undo(),disabled:!q.canUndo,title:"Undo (Cmd+Z)",children:(0,t.jsx)(p.Undo,{className:"h-4 w-4"})}),(0,t.jsx)(s.Button,{variant:"ghost",size:"icon",onClick:()=>q.redo(),disabled:!q.canRedo,title:"Redo (Cmd+Shift+Z)",children:(0,t.jsx)(m.Redo,{className:"h-4 w-4"})}),(0,t.jsxs)(s.Button,{variant:"outline",onClick:()=>T(!0),className:"gap-2",children:[(0,t.jsx)(u.Monitor,{className:"h-4 w-4"}),"Preview"]}),(0,t.jsx)(s.Button,{variant:j?.is_published?"outline":"default",onClick:eo,className:"gap-2",children:j?.is_published?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.EyeOff,{className:"h-4 w-4"}),"Unpublish"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Eye,{className:"h-4 w-4"}),"Publish"]})})]})]})}),(0,t.jsx)("main",{className:"flex-1 overflow-auto px-4 py-8",children:(0,t.jsx)(y.GridCanvas,{rows:C,components:N,onUpdateComponent:$,onUpdateComponentStyles:K,onDeleteComponent:X,onAddRow:U,onDeleteRow:O,onUpdateRowColumns:z,onUpdateRowStyles:H,onUpdateRowColumnWidths:V,onUpdateRowResponsiveConfig:B,onReorderRows:G,activeComponentType:M,onDuplicateComponent:J,onPasteComponent:Y,onInsertTemplate:W,onMoveComponentToPosition:Z,onAddRowAbove:Q,onAddRowBelow:ee,onDuplicateRow:et})})]})]})}),(0,t.jsx)(w.LayoutPreviewModal,{open:F,onOpenChange:T,layout:j,rows:C,components:N})]})}])},11737,e=>{e.v(e=>Promise.resolve().then(()=>e(6085)))}]);