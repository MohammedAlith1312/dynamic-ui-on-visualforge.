(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,a)=>{t.exports=e.r(76562)},6085,e=>{"use strict";var t="u">typeof self?self:"u">typeof window?window:e.g;let a=t.fetch,r=t.fetch.bind(t),i=t.Headers,s=t.Request,o=t.Response;e.s(["Headers",0,i,"Request",0,s,"Response",0,o,"default",0,r,"fetch",0,a])},93479,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(75157);let i=a.forwardRef(({className:e,type:a,...i},s)=>(0,t.jsx)("input",{type:a,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...i}));i.displayName="Input",e.s(["Input",()=>i])},10204,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(48425),i=a.forwardRef((e,a)=>(0,t.jsx)(r.Primitive.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var s=e.i(25913),o=e.i(75157);let n=(0,s.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(i,{ref:r,className:(0,o.cn)(n(),e),...a}));d.displayName=i.displayName,e.s(["Label",()=>d],10204)},23182,e=>{"use strict";var t=e.i(41867);let a="https://apps4x-framework.azurewebsites.net/api/v1",r="LGE0000001",i="eyJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySWQiOiJhLmh5ZGVyIiwiTmFtZSI6Ikh5ZGVyIEFsaSIsIkVtYWlsIjoiaHlkZXJAZmFhenRlY2hzb2x1dGlvbnMuY29tIiwiTW9iaWxlTnVtYmVyIjoiMDk4NzY1NDMyMSIsIkNvbXBhbnlJZCI6IkxHRTAwMDAwMDEiLCJleHAiOjE3NjcwNzIyMTYsImlzcyI6ImFwcHM0eC5jb20iLCJhdWQiOiJhcHBzNHguY29tIn0.b5jc5d6zpx5_mY_fYH3oQS7_4RxMXYZyYNFTUf4Zk8Y",s=(e={})=>({Accept:"application/json, text/plain, */*",Authorization:`Bearer ${i}`,appid:"Studio",companyid:r,"user-id":"a.hyder","X-Client-Page":"/LGE0000001/Studio/a530d8d753214ac7beaf6207aacbbd4c",...e}),o=async(e,a={})=>{try{let r=await fetch(e,a);if(401===r.status)throw console.error("Unauthorized access (401), signing out..."),await t.supabase.auth.signOut(),window.location.href="/auth",Error("Unauthorized");return r}catch(e){throw e}},n=e=>{try{let t=JSON.parse(e.Data);return{id:e.Id,name:t.TableName,display_name:t.Name,description:t.Description,is_published:"Published"===e.Status,dataAreaId:e.DataAreaId,recId:e.RecId,collectionId:t.CollectionId}}catch(t){return console.error("Error parsing entity data:",e),{id:e.Id,name:e.Name,display_name:e.Name,description:"",is_published:"Published"===e.Status,dataAreaId:e.DataAreaId,recId:e.RecId,collectionId:""}}},d=async()=>{try{let e=await o(`${a}/metaobject/${r}?type=Entity`,{headers:s()}),t=await e.json();return(Array.isArray(t.Data)?t.Data:[t.Data]).filter(e=>(e.RecId??0)>=709).map(n)}catch(e){return console.error("Error fetching entities:",e),[]}},l=async e=>{try{let t=e.replace(/-/g,""),i=`byobjectId?objectId=${t}`,d=await o(`${a}/metaobject/${r}/${i}`,{headers:s()}),l=await d.json();return n(l)}catch(t){return console.error(`Error fetching entity ${e}:`,t),null}},c=async e=>{try{let t=e.replace(/-/g,""),i=`byobjectId?objectId=${t}`,n=await o(`${a}/metaobject/${r}/${i}`,{headers:s()}),d=await n.json();if(!d)return[];return(JSON.parse(d.Data).Fields||[]).map(t=>({id:t.Id,entity_id:e,name:t.Name,display_name:t.Label,field_type:t.DataType,is_required:t.IsRequired,default_value:t.DefaultValue,position:t.Position}))}catch(t){return console.error(`Error fetching fields for entity ${e}:`,t),[]}},u=async e=>{try{let t="a530d8d753214ac7beaf6207aacbbd4c",i={Name:e.name,TableName:e.name,Description:e.description||e.display_name,Image:null,TypeName:e.name,CollectionType:"Single",ConnectorId:"eb6e7a03f0ed4e09b259fc2abf4507e2",Fields:null,IsWorkFlow:null,AppId:t},n={Type:"Collection",Data:JSON.stringify(i),Name:e.name,ParentId:"a530d8d753214ac7beaf6207aacbbd4c",ParentType:"Apps",AppId:t},d=await o(`${a}/metaobject/${r}/create`,{method:"POST",headers:s({"Content-Type":"application/json"}),body:JSON.stringify(n)});return{sucess:!0,res:await d.json()}}catch(e){return console.error("Error creating entity:",e),{success:!1,error:"Failed to create entity"}}},p=async(e,t)=>{try{let i=await o(`${a}/metaobject/${r}/${"9ca55aad170e45b9835adf7e5983161a"===e?"709":e}`,{method:"PUT",headers:s({"Content-Type":"application/json"}),body:JSON.stringify(t)});return{sucess:!0,res:await i.json()}}catch(t){return console.error(`Error updating entity ${e}:`,t),{success:!1,error:"Failed to update entity"}}},m=async e=>{try{let t=await o(`${a}/metaobject/${r}/${"9ca55aad170e45b9835adf7e5983161a"===e?"709":e}`,{method:"DELETE",headers:s()});return await t.json()}catch(t){return console.error(`Error deleting entity ${e}:`,t),{success:!1,error:"Failed to delete entity"}}},f=async(e,t,i)=>{try{let n=i?.collectionId||"6e8ef8e548704cfb90a01c1f597fb264",d=i?.recId||("9ca55aad170e45b9835adf7e5983161a"===e?"709":e),l=await c(e),u=new Map(l.map(e=>[e.id,e])),p=new Set(l.map(e=>(e.name||"").toLowerCase())),m=[],f=[];for(let e of t)if(e.id&&u.has(e.id)){let t=u.get(e.id);t&&(t.name!==e.name||t.display_name!==e.display_name||t.field_type!==e.field_type||t.is_required!==e.is_required||t.default_value!==e.default_value||t.position!==e.position)&&f.push(e)}else{let t=(e.name||e.Name||"").toLowerCase();p.has(t)||m.push(e)}let y=l.filter(e=>!t.some(t=>t.name===e.name)),h={success:!0,creates:null,updates:null,deletes:null};if(f.length>0){let t=f.map(t=>({Id:t.id,Label:t.display_name||t.Label,Name:t.name||t.Name,DataType:t.field_type||t.DataType||"String",IsRequired:t.is_required,DefaultValue:t.default_value,Position:t.position,EntityId:i?.id||e,CollectionId:n})),l=await o(`${a}/metaobject/${r}/${d}/fields/update`,{method:"PUT",headers:s({"Content-Type":"application/json"}),body:JSON.stringify(t)});h.updates=await l.json()}if(m.length>0){let t=m.map(t=>({Label:t.display_name||t.Label,Name:t.name||t.Name,DataType:t.field_type||t.DataType||"String",IsRequired:t.is_required,DefaultValue:t.default_value,Position:t.position,EntityId:i?.id||e,CollectionId:n})),l=await o(`${a}/metaobject/${r}/${d}/fields/create`,{method:"POST",headers:s({"Content-Type":"application/json"}),body:JSON.stringify(t)});h.creates=await l.json()}if(y.length>0){let e=y.map(e=>e.name),t=await o(`${a}/metaobject/${r}/${d}/fields/delete`,{method:"DELETE",headers:s({"Content-Type":"application/json"}),body:JSON.stringify(e)});h.deletes=await t.json()}return{success:!0,details:h}}catch(t){return console.error(`Error saving fields for entity ${e}:`,t),{success:!1,error:"Failed to save fields"}}};e.s(["createEntity",0,u,"deleteEntity",0,m,"getEntities",0,d,"getEntity",0,l,"getFields",0,c,"saveFields",0,f,"setAuthToken",0,e=>{i=e},"updateEntity",0,p])},15288,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(75157);let i=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("div",{ref:i,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...a}));i.displayName="Card";let s=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("div",{ref:i,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...a}));s.displayName="CardHeader";let o=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("h3",{ref:i,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...a}));o.displayName="CardTitle";let n=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("p",{ref:i,className:(0,r.cn)("text-sm text-muted-foreground",e),...a}));n.displayName="CardDescription";let d=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("div",{ref:i,className:(0,r.cn)("p-6 pt-0",e),...a}));d.displayName="CardContent";let l=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)("div",{ref:i,className:(0,r.cn)("flex items-center p-6 pt-0",e),...a}));l.displayName="CardFooter",e.s(["Card",()=>i,"CardContent",()=>d,"CardDescription",()=>n,"CardFooter",()=>l,"CardHeader",()=>s,"CardTitle",()=>o])},31790,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(18566),i=e.i(23182),s=e.i(41867),o=e.i(19455),n=e.i(93479),d=e.i(10204),l=e.i(15288),c=e.i(46696);e.s(["default",0,()=>{let e=(0,r.useRouter)(),[u,p]=(0,a.useState)(!0),[m,f]=(0,a.useState)(""),[y,h]=(0,a.useState)(""),[b,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{let{data:{session:t}}=await s.supabase.auth.getSession();t&&e.push("/admin")})()},[e]);let w=async t=>{t.preventDefault(),g(!0);try{if(u){let{error:t}=await s.supabase.auth.signInWithPassword({email:m,password:y});if(t)throw t;c.toast.success("Logged in successfully!");try{let e=await fetch("https://apps4x-framework.azurewebsites.net/api/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({UserId:"a.hyder",Password:"123456"})}),t=await e.json();!0===t.Status&&t.authData?.authToken?((0,i.setAuthToken)(t.authData.authToken),console.log("Remote login successful, token updated.")):(console.error("Remote login failed",t),c.toast.error("Connected to local auth, but remote service login failed."))}catch(e){console.error("Remote login error",e)}e.push("/admin")}else{let{error:e}=await s.supabase.auth.signUp({email:m,password:y,options:{emailRedirectTo:`${window.location.origin}/admin`}});if(e)throw e;c.toast.success("Account created! You can now log in."),p(!0)}}catch(e){c.toast.error(e.message||"Authentication failed")}finally{g(!1)}};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:(0,t.jsxs)(l.Card,{className:"w-full max-w-md shadow-[var(--shadow-medium)]",children:[(0,t.jsxs)(l.CardHeader,{children:[(0,t.jsx)(l.CardTitle,{className:"text-2xl",children:u?"Login":"Sign Up"}),(0,t.jsx)(l.CardDescription,{children:u?"Enter your credentials to access the admin panel":"Create an account to get started"})]}),(0,t.jsxs)(l.CardContent,{children:[(0,t.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{htmlFor:"email",children:"Email"}),(0,t.jsx)(n.Input,{id:"email",type:"email",placeholder:"you@example.com",value:m,onChange:e=>f(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{htmlFor:"password",children:"Password"}),(0,t.jsx)(n.Input,{id:"password",type:"password",placeholder:"••••••••",value:y,onChange:e=>h(e.target.value),required:!0,minLength:6})]}),(0,t.jsx)(o.Button,{type:"submit",className:"w-full",disabled:b,children:b?"Loading...":u?"Login":"Sign Up"})]}),(0,t.jsx)("div",{className:"mt-4 text-center",children:(0,t.jsx)("button",{onClick:()=>p(!u),className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:u?"Don't have an account? Sign up":"Already have an account? Login"})})]})]})})}])},11737,e=>{e.v(e=>Promise.resolve().then(()=>e(6085)))}]);