(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20501,e=>{"use strict";var t=e.i(43476),i=e.i(71645),o=e.i(76639),a=e.i(19455),n=e.i(37727),s=e.i(31310),r=e.i(25037),l=e.i(18812);e.s(["PagePreviewModal",0,({open:e,onOpenChange:d,page:c,rows:u,components:p,layout:m,layoutRows:f,layoutComponents:h,widgetData:g})=>{let[y,x]=(0,i.useState)("desktop"),w=(e,i)=>e.sort((e,t)=>e.position-t.position).map(e=>{let o=i.filter(t=>t.row_id===e.id).sort((e,t)=>e.position-t.position),a=Array.from({length:e.columns},()=>[]);return o.forEach(t=>{t.column_index<e.columns&&a[t.column_index].push(t)}),(0,t.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${e.columns}, 1fr)`},children:a.map((e,i)=>(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>{if("page-content"===e.component_type)return(0,t.jsx)("div",{className:"w-full",children:w(u,p)},e.id);if("is_widget_instance"in e&&e.is_widget_instance&&e.widget_id){var i;let o;return(0,t.jsx)("div",{children:(i=e.widget_id,(o=g.get(i))?o.rows.sort((e,t)=>e.position-t.position).map(e=>{let i=o.components.filter(t=>t.row_id===e.id).sort((e,t)=>e.position-t.position),a=Array.from({length:e.columns},()=>[]);return i.forEach(t=>{t.column_index<e.columns&&a[t.column_index].push(t)}),(0,t.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${e.columns}, 1fr)`},children:a.map((e,i)=>(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,t.jsx)(s.ComponentRenderer,{component:e},e.id))},i))},e.id)}):(0,t.jsx)("div",{className:"p-4 border border-dashed border-muted-foreground/30 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Widget not found"})}))},e.id)}return(0,t.jsx)(s.ComponentRenderer,{component:e},e.id)})},i))},e.id)});return(0,t.jsx)(o.Dialog,{open:e,onOpenChange:d,children:(0,t.jsxs)(o.DialogContent,{className:"max-w-[95vw] max-h-[90vh] p-0 gap-0",hideClose:!0,children:[(0,t.jsxs)(o.DialogTitle,{className:"sr-only",children:["Page Preview: ",c?.title]}),(0,t.jsxs)("div",{className:"flex items-center justify-between border-b px-4 py-3 bg-card",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold","aria-hidden":"true",children:["Page Preview: ",c?.title]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(r.ResponsiveControls,{currentBreakpoint:y,onBreakpointChange:x}),(0,t.jsx)(a.Button,{variant:"ghost",size:"icon",onClick:()=>d(!1),children:(0,t.jsx)(n.X,{className:"h-4 w-4"})})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-auto bg-background",children:(0,t.jsx)(l.DeviceFrame,{breakpoint:y,children:(0,t.jsxs)("div",{className:"min-h-full",children:[m?w(f,h):(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:w(u,p)}),0===u.length&&(0,t.jsx)("p",{className:"text-center text-muted-foreground py-12",children:"No content yet. Add rows and components to see the preview."})]})})})]})})}])},70756,e=>{"use strict";let t=(0,e.i(75254).default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],70756)},48256,e=>{"use strict";let t=(0,e.i(75254).default)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);e.s(["Globe",()=>t],48256)},74886,e=>{"use strict";let t=(0,e.i(75254).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],74886)},17923,e=>{"use strict";let t=(0,e.i(75254).default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);e.s(["BarChart3",()=>t],17923)},80376,e=>{"use strict";var t=e.i(43476),i=e.i(26999),o=e.i(25913),a=e.i(37727),n=e.i(71645),s=e.i(75157);let r=i.Root,l=i.Trigger;i.Close;let d=i.Portal,c=n.forwardRef(({className:e,...o},a)=>(0,t.jsx)(i.Overlay,{className:(0,s.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...o,ref:a}));c.displayName=i.Overlay.displayName;let u=(0,o.cva)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),p=n.forwardRef(({side:e="right",className:o,children:n,...r},l)=>(0,t.jsxs)(d,{children:[(0,t.jsx)(c,{}),(0,t.jsxs)(i.Content,{ref:l,className:(0,s.cn)(u({side:e}),o),...r,children:[n,(0,t.jsxs)(i.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[(0,t.jsx)(a.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));p.displayName=i.Content.displayName;let m=({className:e,...i})=>(0,t.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...i});m.displayName="SheetHeader";let f=n.forwardRef(({className:e,...o},a)=>(0,t.jsx)(i.Title,{ref:a,className:(0,s.cn)("text-lg font-semibold text-foreground",e),...o}));f.displayName=i.Title.displayName,n.forwardRef(({className:e,...o},a)=>(0,t.jsx)(i.Description,{ref:a,className:(0,s.cn)("text-sm text-muted-foreground",e),...o})).displayName=i.Description.displayName,e.s(["Sheet",()=>r,"SheetContent",()=>p,"SheetHeader",()=>m,"SheetTitle",()=>f,"SheetTrigger",()=>l])},30325,73264,46387,71245,e=>{"use strict";var t=e.i(75254);let i=(0,t.default)("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);e.s(["Table2",()=>i],30325);let o=(0,t.default)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);e.s(["LayoutGrid",()=>o],73264);let a=(0,t.default)("Columns3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);e.s(["Columns3",()=>a],46387);let n=(0,t.default)("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);e.s(["Images",()=>n],71245)},99602,54449,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["ArrowUpDown",()=>t],99602);var i=e.i(43476),o=e.i(10204),a=e.i(67489),n=e.i(57428),s=e.i(50570),r=e.i(62050);e.s(["CardLayoutEditor",0,({fields:e,layout:t,onChange:l,showImageField:d=!0})=>{let c=e.filter(e=>e.field_type===r.E_FieldDataType.Image);return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(o.Label,{className:"text-sm font-medium",children:"Title Field *"}),(0,i.jsxs)(a.Select,{value:t.titleField,onValueChange:e=>l({...t,titleField:e}),children:[(0,i.jsx)(a.SelectTrigger,{className:"mt-1",children:(0,i.jsx)(a.SelectValue,{placeholder:"Select title field"})}),(0,i.jsx)(a.SelectContent,{children:e.map(e=>(0,i.jsx)(a.SelectItem,{value:e.name,children:e.display_name},e.name))})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(o.Label,{className:"text-sm font-medium",children:"Subtitle Field (Optional)"}),(0,i.jsxs)(a.Select,{value:t.subtitleField||"none",onValueChange:e=>l({...t,subtitleField:"none"===e?void 0:e}),children:[(0,i.jsx)(a.SelectTrigger,{className:"mt-1",children:(0,i.jsx)(a.SelectValue,{placeholder:"Select subtitle field"})}),(0,i.jsxs)(a.SelectContent,{children:[(0,i.jsx)(a.SelectItem,{value:"none",children:"None"}),e.map(e=>(0,i.jsx)(a.SelectItem,{value:e.name,children:e.display_name},e.name))]})]})]}),d&&c.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)(o.Label,{className:"text-sm font-medium",children:"Image Field (Optional)"}),(0,i.jsxs)(a.Select,{value:t.imageField||"none",onValueChange:e=>l({...t,imageField:"none"===e?void 0:e}),children:[(0,i.jsx)(a.SelectTrigger,{className:"mt-1",children:(0,i.jsx)(a.SelectValue,{placeholder:"Select image field"})}),(0,i.jsxs)(a.SelectContent,{children:[(0,i.jsx)(a.SelectItem,{value:"none",children:"None"}),c.map(e=>(0,i.jsx)(a.SelectItem,{value:e.name,children:e.display_name},e.name))]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(o.Label,{className:"text-sm font-medium mb-2 block",children:"Additional Fields to Display"}),(0,i.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.map(e=>{let a=t.displayFields.some(t=>t.fieldId===e.name),r=e.name===t.titleField,d=e.name===t.subtitleField,c=e.name===t.imageField,u=r||d||c;return(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(s.GripVertical,{className:"h-4 w-4 text-muted-foreground"}),(0,i.jsx)(n.Checkbox,{id:`display-${e.name}`,checked:a,disabled:u,onCheckedChange:i=>{var o;let a;return o=e.name,a=i?[...t.displayFields,{fieldId:o,position:t.displayFields.length}]:t.displayFields.filter(e=>e.fieldId!==o),void l({...t,displayFields:a})}}),(0,i.jsxs)(o.Label,{htmlFor:`display-${e.name}`,className:`font-normal cursor-pointer flex-1 ${u?"text-muted-foreground":""}`,children:[e.display_name,u&&(0,i.jsxs)("span",{className:"text-xs ml-2",children:["(Used as ",r?"title":d?"subtitle":"image",")"]})]})]},e.name)})})]})]})}],54449)},39616,e=>{"use strict";let t=(0,e.i(75254).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>t],39616)},24687,e=>{"use strict";var t=e.i(43476),i=e.i(71645),o=e.i(75157);let a=i.forwardRef(({className:e,...i},a)=>(0,t.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...i}));a.displayName="Textarea",e.s(["Textarea",()=>a])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},50570,e=>{"use strict";let t=(0,e.i(75254).default)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);e.s(["GripVertical",()=>t],50570)},57428,e=>{"use strict";var t=e.i(43476),i=e.i(71645),o=e.i(20783),a=e.i(30030),n=e.i(81140),s=e.i(69340),r=e.i(99682),l=e.i(35804),d=e.i(96626),c=e.i(48425),u="Checkbox",[p,m]=(0,a.createContextScope)(u),[f,h]=p(u);function g(e){let{__scopeCheckbox:o,checked:a,children:n,defaultChecked:r,disabled:l,form:d,name:c,onCheckedChange:p,required:m,value:h="on",internal_do_not_use_render:g}=e,[y,x]=(0,s.useControllableState)({prop:a,defaultProp:r??!1,onChange:p,caller:u}),[w,b]=i.useState(null),[v,k]=i.useState(null),j=i.useRef(!1),C=!w||!!d||!!w.closest("form"),S={checked:y,disabled:l,setChecked:x,control:w,setControl:b,name:c,form:d,value:h,hasConsumerStoppedPropagationRef:j,required:m,defaultChecked:!_(r)&&r,isFormControl:C,bubbleInput:v,setBubbleInput:k};return(0,t.jsx)(f,{scope:o,...S,children:"function"==typeof g?g(S):n})}var y="CheckboxTrigger",x=i.forwardRef(({__scopeCheckbox:e,onKeyDown:a,onClick:s,...r},l)=>{let{control:d,value:u,disabled:p,checked:m,required:f,setControl:g,setChecked:x,hasConsumerStoppedPropagationRef:w,isFormControl:b,bubbleInput:v}=h(y,e),k=(0,o.useComposedRefs)(l,g),j=i.useRef(m);return i.useEffect(()=>{let e=d?.form;if(e){let t=()=>x(j.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[d,x]),(0,t.jsx)(c.Primitive.button,{type:"button",role:"checkbox","aria-checked":_(m)?"mixed":m,"aria-required":f,"data-state":C(m),"data-disabled":p?"":void 0,disabled:p,value:u,...r,ref:k,onKeyDown:(0,n.composeEventHandlers)(a,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,n.composeEventHandlers)(s,e=>{x(e=>!!_(e)||!e),v&&b&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})})});x.displayName=y;var w=i.forwardRef((e,i)=>{let{__scopeCheckbox:o,name:a,checked:n,defaultChecked:s,required:r,disabled:l,value:d,onCheckedChange:c,form:u,...p}=e;return(0,t.jsx)(g,{__scopeCheckbox:o,checked:n,defaultChecked:s,disabled:l,required:r,onCheckedChange:c,name:a,form:u,value:d,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x,{...p,ref:i,__scopeCheckbox:o}),e&&(0,t.jsx)(j,{__scopeCheckbox:o})]})})});w.displayName=u;var b="CheckboxIndicator",v=i.forwardRef((e,i)=>{let{__scopeCheckbox:o,forceMount:a,...n}=e,s=h(b,o);return(0,t.jsx)(d.Presence,{present:a||_(s.checked)||!0===s.checked,children:(0,t.jsx)(c.Primitive.span,{"data-state":C(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:i,style:{pointerEvents:"none",...e.style}})})});v.displayName=b;var k="CheckboxBubbleInput",j=i.forwardRef(({__scopeCheckbox:e,...a},n)=>{let{control:s,hasConsumerStoppedPropagationRef:d,checked:u,defaultChecked:p,required:m,disabled:f,name:g,value:y,form:x,bubbleInput:w,setBubbleInput:b}=h(k,e),v=(0,o.useComposedRefs)(n,b),j=(0,r.usePrevious)(u),C=(0,l.useSize)(s);i.useEffect(()=>{if(!w)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!d.current;if(j!==u&&e){let i=new Event("click",{bubbles:t});w.indeterminate=_(u),e.call(w,!_(u)&&u),w.dispatchEvent(i)}},[w,j,u,d]);let S=i.useRef(!_(u)&&u);return(0,t.jsx)(c.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??S.current,required:m,disabled:f,name:g,value:y,form:x,...a,tabIndex:-1,ref:v,style:{...a.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function _(e){return"indeterminate"===e}function C(e){return _(e)?"indeterminate":e?"checked":"unchecked"}j.displayName=k;var S=e.i(43531),N=e.i(75157);let P=i.forwardRef(({className:e,...i},o)=>(0,t.jsx)(w,{ref:o,className:(0,N.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...i,children:(0,t.jsx)(v,{className:(0,N.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(S.Check,{className:"h-4 w-4"})})}));P.displayName=w.displayName,e.s(["Checkbox",()=>P],57428)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},87316,61277,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["default",()=>t],61277),e.s(["Calendar",()=>t],87316)},71649,e=>{"use strict";let t=(0,e.i(75254).default)("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);e.s(["Type",()=>t],71649)},73708,21345,e=>{"use strict";var t=e.i(75254);let i=(0,t.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>i],73708);let o=(0,t.default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);e.s(["Link",()=>o],21345)},63488,e=>{"use strict";let t=(0,e.i(75254).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>t],63488)},47780,e=>{"use strict";let t=(0,e.i(75254).default)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);e.s(["Palette",()=>t],47780)},14683,e=>{"use strict";let t=(0,e.i(75254).default)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Circle",()=>t],14683)},67692,e=>{"use strict";var t=e.i(43476),i=e.i(71645),o=e.i(70152),a=e.i(81140),n=e.i(20783),s=e.i(30030),r=e.i(69340),l=e.i(86318),d=e.i(99682),c=e.i(35804),u=e.i(48425),p=e.i(75830),m=["PageUp","PageDown"],f=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],h={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},g="Slider",[y,x,w]=(0,p.createCollection)(g),[b,v]=(0,s.createContextScope)(g,[w]),[k,j]=b(g),_=i.forwardRef((e,n)=>{let{name:s,min:l=0,max:d=100,step:c=1,orientation:u="horizontal",disabled:p=!1,minStepsBetweenThumbs:h=0,defaultValue:g=[l],value:x,onValueChange:w=()=>{},onValueCommit:b=()=>{},inverted:v=!1,form:j,..._}=e,C=i.useRef(new Set),S=i.useRef(0),R="horizontal"===u,[D=[],E]=(0,r.useControllableState)({prop:x,defaultProp:g,onChange:e=>{let t=[...C.current];t[S.current]?.focus(),w(e)}}),T=i.useRef(D);function M(e,t,{commit:i}={commit:!1}){let a,n=(String(c).split(".")[1]||"").length,s=Math.round((Math.round((e-l)/c)*c+l)*(a=Math.pow(10,n)))/a,r=(0,o.clamp)(s,[l,d]);E((e=[])=>{let o=function(e=[],t,i){let o=[...e];return o[i]=t,o.sort((e,t)=>e-t)}(e,r,t);if(!function(e,t){if(t>0)return Math.min(...e.slice(0,-1).map((t,i)=>e[i+1]-t))>=t;return!0}(o,h*c))return e;{S.current=o.indexOf(r);let t=String(o)!==String(e);return t&&i&&b(o),t?o:e}})}return(0,t.jsx)(k,{scope:e.__scopeSlider,name:s,disabled:p,min:l,max:d,valueIndexToChangeRef:S,thumbs:C.current,values:D,orientation:u,form:j,children:(0,t.jsx)(y.Provider,{scope:e.__scopeSlider,children:(0,t.jsx)(y.Slot,{scope:e.__scopeSlider,children:(0,t.jsx)(R?N:P,{"aria-disabled":p,"data-disabled":p?"":void 0,..._,ref:n,onPointerDown:(0,a.composeEventHandlers)(_.onPointerDown,()=>{p||(T.current=D)}),min:l,max:d,inverted:v,onSlideStart:p?void 0:function(e){let t=function(e,t){if(1===e.length)return 0;let i=e.map(e=>Math.abs(e-t)),o=Math.min(...i);return i.indexOf(o)}(D,e);M(e,t)},onSlideMove:p?void 0:function(e){M(e,S.current)},onSlideEnd:p?void 0:function(){let e=T.current[S.current];D[S.current]!==e&&b(D)},onHomeKeyDown:()=>!p&&M(l,0,{commit:!0}),onEndKeyDown:()=>!p&&M(d,D.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!p){let i=m.includes(e.key)||e.shiftKey&&f.includes(e.key),o=S.current;M(D[o]+c*(i?10:1)*t,o,{commit:!0})}}})})})})});_.displayName=g;var[C,S]=b(g,{startEdge:"left",endEdge:"right",size:"width",direction:1}),N=i.forwardRef((e,o)=>{let{min:a,max:s,dir:r,inverted:d,onSlideStart:c,onSlideMove:u,onSlideEnd:p,onStepKeyDown:m,...f}=e,[g,y]=i.useState(null),x=(0,n.useComposedRefs)(o,e=>y(e)),w=i.useRef(void 0),b=(0,l.useDirection)(r),v="ltr"===b,k=v&&!d||!v&&d;function j(e){let t=w.current||g.getBoundingClientRect(),i=A([0,t.width],k?[a,s]:[s,a]);return w.current=t,i(e-t.left)}return(0,t.jsx)(C,{scope:e.__scopeSlider,startEdge:k?"left":"right",endEdge:k?"right":"left",direction:k?1:-1,size:"width",children:(0,t.jsx)(R,{dir:b,"data-orientation":"horizontal",...f,ref:x,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let t=j(e.clientX);c?.(t)},onSlideMove:e=>{let t=j(e.clientX);u?.(t)},onSlideEnd:()=>{w.current=void 0,p?.()},onStepKeyDown:e=>{let t=h[k?"from-left":"from-right"].includes(e.key);m?.({event:e,direction:t?-1:1})}})})}),P=i.forwardRef((e,o)=>{let{min:a,max:s,inverted:r,onSlideStart:l,onSlideMove:d,onSlideEnd:c,onStepKeyDown:u,...p}=e,m=i.useRef(null),f=(0,n.useComposedRefs)(o,m),g=i.useRef(void 0),y=!r;function x(e){let t=g.current||m.current.getBoundingClientRect(),i=A([0,t.height],y?[s,a]:[a,s]);return g.current=t,i(e-t.top)}return(0,t.jsx)(C,{scope:e.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:(0,t.jsx)(R,{"data-orientation":"vertical",...p,ref:f,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let t=x(e.clientY);l?.(t)},onSlideMove:e=>{let t=x(e.clientY);d?.(t)},onSlideEnd:()=>{g.current=void 0,c?.()},onStepKeyDown:e=>{let t=h[y?"from-bottom":"from-top"].includes(e.key);u?.({event:e,direction:t?-1:1})}})})}),R=i.forwardRef((e,i)=>{let{__scopeSlider:o,onSlideStart:n,onSlideMove:s,onSlideEnd:r,onHomeKeyDown:l,onEndKeyDown:d,onStepKeyDown:c,...p}=e,h=j(g,o);return(0,t.jsx)(u.Primitive.span,{...p,ref:i,onKeyDown:(0,a.composeEventHandlers)(e.onKeyDown,e=>{"Home"===e.key?(l(e),e.preventDefault()):"End"===e.key?(d(e),e.preventDefault()):m.concat(f).includes(e.key)&&(c(e),e.preventDefault())}),onPointerDown:(0,a.composeEventHandlers)(e.onPointerDown,e=>{let t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),h.thumbs.has(t)?t.focus():n(e)}),onPointerMove:(0,a.composeEventHandlers)(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&s(e)}),onPointerUp:(0,a.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),r(e))})})}),D="SliderTrack",E=i.forwardRef((e,i)=>{let{__scopeSlider:o,...a}=e,n=j(D,o);return(0,t.jsx)(u.Primitive.span,{"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation,...a,ref:i})});E.displayName=D;var T="SliderRange",M=i.forwardRef((e,o)=>{let{__scopeSlider:a,...s}=e,r=j(T,a),l=S(T,a),d=i.useRef(null),c=(0,n.useComposedRefs)(o,d),p=r.values.length,m=r.values.map(e=>O(e,r.min,r.max)),f=p>1?Math.min(...m):0,h=100-Math.max(...m);return(0,t.jsx)(u.Primitive.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...s,ref:c,style:{...e.style,[l.startEdge]:f+"%",[l.endEdge]:h+"%"}})});M.displayName=T;var L="SliderThumb",F=i.forwardRef((e,o)=>{let a=x(e.__scopeSlider),[s,r]=i.useState(null),l=(0,n.useComposedRefs)(o,e=>r(e)),d=i.useMemo(()=>s?a().findIndex(e=>e.ref.current===s):-1,[a,s]);return(0,t.jsx)(I,{...e,ref:l,index:d})}),I=i.forwardRef((e,o)=>{var s,r,l,d,p;let m,f,{__scopeSlider:h,index:g,name:x,...w}=e,b=j(L,h),v=S(L,h),[k,_]=i.useState(null),C=(0,n.useComposedRefs)(o,e=>_(e)),N=!k||b.form||!!k.closest("form"),P=(0,c.useSize)(k),R=b.values[g],D=void 0===R?0:O(R,b.min,b.max),E=(s=g,(r=b.values.length)>2?`Value ${s+1} of ${r}`:2===r?["Minimum","Maximum"][s]:void 0),T=P?.[v.size],M=T?(l=T,d=D,p=v.direction,f=A([0,50],[0,m=l/2]),(m-f(d)*p)*p):0;return i.useEffect(()=>{if(k)return b.thumbs.add(k),()=>{b.thumbs.delete(k)}},[k,b.thumbs]),(0,t.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[v.startEdge]:`calc(${D}% + ${M}px)`},children:[(0,t.jsx)(y.ItemSlot,{scope:e.__scopeSlider,children:(0,t.jsx)(u.Primitive.span,{role:"slider","aria-label":e["aria-label"]||E,"aria-valuemin":b.min,"aria-valuenow":R,"aria-valuemax":b.max,"aria-orientation":b.orientation,"data-orientation":b.orientation,"data-disabled":b.disabled?"":void 0,tabIndex:b.disabled?void 0:0,...w,ref:C,style:void 0===R?{display:"none"}:e.style,onFocus:(0,a.composeEventHandlers)(e.onFocus,()=>{b.valueIndexToChangeRef.current=g})})}),N&&(0,t.jsx)(q,{name:x??(b.name?b.name+(b.values.length>1?"[]":""):void 0),form:b.form,value:R},g)]})});F.displayName=L;var q=i.forwardRef(({__scopeSlider:e,value:o,...a},s)=>{let r=i.useRef(null),l=(0,n.useComposedRefs)(r,s),c=(0,d.usePrevious)(o);return i.useEffect(()=>{let e=r.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(c!==o&&t){let i=new Event("input",{bubbles:!0});t.call(e,o),e.dispatchEvent(i)}},[c,o]),(0,t.jsx)(u.Primitive.input,{style:{display:"none"},...a,ref:l,defaultValue:o})});function O(e,t,i){return(0,o.clamp)(100/(i-t)*(e-t),[0,100])}function A(e,t){return i=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let o=(t[1]-t[0])/(e[1]-e[0]);return t[0]+o*(i-e[0])}}q.displayName="RadioBubbleInput";var V=e.i(75157);let z=i.forwardRef(({className:e,...i},o)=>(0,t.jsxs)(_,{ref:o,className:(0,V.cn)("relative flex w-full touch-none select-none items-center",e),...i,children:[(0,t.jsx)(E,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,t.jsx)(M,{className:"absolute h-full bg-primary"})}),(0,t.jsx)(F,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));z.displayName=_.displayName,e.s(["Slider",()=>z],67692)},40325,21430,49459,84608,e=>{"use strict";var t=e.i(75254);let i=(0,t.default)("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);e.s(["Undo",()=>i],40325);let o=(0,t.default)("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);e.s(["Redo",()=>o],21430);var a=e.i(71645);e.s(["useHistory",0,()=>{let[e,t]=(0,a.useState)([]),[i,o]=(0,a.useState)(-1),n=(0,a.useCallback)(a=>{let n={...a,timestamp:Date.now()};n.execute();let s=e.slice(0,i+1);s.push(n),s.length>50?(s.shift(),o(49)):o(s.length-1),t(s)},[e,i]),s=(0,a.useCallback)(()=>{i<0||(e[i].undo(),o(i-1))},[e,i]),r=(0,a.useCallback)(()=>{if(i>=e.length-1)return;let t=i+1;e[t].execute(),o(t)},[e,i]),l=i>=0;return{execute:n,undo:s,redo:r,canUndo:l,canRedo:i<e.length-1,clear:(0,a.useCallback)(()=>{t([]),o(-1)},[])}}],49459);let n=e=>!!e&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable);e.s(["useKeyboardShortcuts",0,e=>{(0,a.useEffect)(()=>{let t=t=>{let i=navigator.platform.toUpperCase().indexOf("MAC")>=0?t.metaKey:t.ctrlKey;if(i&&("z"===t.key||"y"===t.key||"d"===t.key||"c"===t.key||"v"===t.key||"s"===t.key)&&t.preventDefault(),i&&"z"===t.key&&!t.shiftKey&&e.onUndo)return void e.onUndo();if(i&&"z"===t.key&&t.shiftKey||i&&"y"===t.key){e.onRedo&&e.onRedo();return}if(("Backspace"===t.key||"Delete"===t.key)&&!n(t.target)){e.onDelete&&(t.preventDefault(),e.onDelete());return}i&&"d"===t.key&&e.onDuplicate?e.onDuplicate():i&&"c"===t.key&&!n(t.target)&&e.onCopy?e.onCopy():i&&"v"===t.key&&!n(t.target)&&e.onPaste?e.onPaste():i&&"s"===t.key&&e.onSave&&e.onSave()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e])}],84608)},89366,e=>{"use strict";var t=e.i(43476),i=e.i(71645),o=e.i(18566),a=e.i(41867),n=e.i(63749),s=e.i(19455),r=e.i(67489),l=e.i(10204),d=e.i(46696),c=e.i(71689),u=e.i(86536),p=e.i(77705),m=e.i(51445),f=e.i(40325),h=e.i(21430),g=e.i(41396),y=e.i(77183),x=e.i(76590),w=e.i(59684),b=e.i(7311),v=e.i(63059),k=e.i(64659),j=e.i(70756),_=e.i(75254);let C=(0,_.default)("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);var S=e.i(50570),N=e.i(75157);let P=({id:e,label:i,type:o,componentType:a,visible:n=!0,locked:r=!1,isSelected:l=!1,hasChildren:d=!1,isExpanded:c=!0,onToggleExpand:m,level:f,onToggleVisibility:h,onToggleLock:g,onSelect:y})=>{let{attributes:w,listeners:_,setNodeRef:P,transform:R,transition:D,isDragging:E}=(0,x.useSortable)({id:e,disabled:r,data:{type:o,id:e}}),T={transform:b.CSS.Transform.toString(R),transition:D,opacity:E?.5:1};return(0,t.jsxs)("div",{ref:P,style:T,className:(0,N.cn)("group flex items-center gap-1 py-1 px-2 rounded transition-colors","component"===o&&"cursor-pointer","component"===o&&"hover:bg-accent","component"!==o&&"hover:bg-muted/50",l&&"bg-primary/10 border-l-2 border-primary",!n&&"opacity-50",r&&"cursor-not-allowed"),children:[(0,t.jsxs)("div",{style:{marginLeft:`${16*f}px`},className:"flex items-center gap-1 flex-1 min-w-0",children:[d&&(0,t.jsx)(s.Button,{variant:"ghost",size:"icon",className:"h-4 w-4 p-0 hover:bg-accent",onClick:e=>{e.stopPropagation(),m?.()},children:c?(0,t.jsx)(k.ChevronDown,{className:"h-3 w-3"}):(0,t.jsx)(v.ChevronRight,{className:"h-3 w-3"})}),!d&&(0,t.jsx)("div",{className:"w-4"}),(0,t.jsx)("div",{...w,..._,className:(0,N.cn)("cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-100 shrink-0",r&&"cursor-not-allowed opacity-30"),onPointerDown:e=>e.stopPropagation(),children:(0,t.jsx)(S.GripVertical,{className:"h-3 w-3 text-muted-foreground"})}),(0,t.jsx)("span",{className:"text-sm mr-1",children:"row"===o?"ðŸ“":"column"===o?"ðŸ“¦":({heading:"ðŸ“",paragraph:"ðŸ“„",image:"ðŸ–¼ï¸",button:"ðŸ”˜",link:"ðŸ”—",video:"ðŸŽ¥",divider:"âž–",spacer:"â¬œ",quote:"ðŸ’¬",list:"ðŸ“‹",code:"ðŸ’»",chart:"ðŸ“Š",tabs:"ðŸ“‘",accordion:"ðŸ—‚ï¸",card:"ðŸƒ","form-input":"ðŸ“","form-textarea":"ðŸ“","form-select":"ðŸ”½","form-checkbox":"â˜‘ï¸","form-submit":"âœ…"})[a||""]||"ðŸ“¦"}),(0,t.jsx)("span",{className:(0,N.cn)("text-sm truncate flex-1","component"===o&&"cursor-pointer",!n&&"line-through"),onClick:t=>{"component"===o&&y&&(t.stopPropagation(),t.preventDefault(),console.log("[OutlineTreeItem] Label clicked, selecting:",e),y())},children:i})]}),(0,t.jsxs)("div",{className:"flex items-center gap-0.5 shrink-0",children:["component"===o&&h&&(0,t.jsx)(s.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 hover:bg-accent shrink-0",onPointerDown:e=>{e.stopPropagation()},onClick:t=>{t.stopPropagation(),t.preventDefault(),console.log("[OutlineTreeItem] Visibility clicked for:",e,n),h()},title:n?"Hide component":"Show component",children:n?(0,t.jsx)(u.Eye,{className:"h-3 w-3 text-muted-foreground"}):(0,t.jsx)(p.EyeOff,{className:"h-3 w-3 text-destructive"})}),"component"===o&&g&&(0,t.jsx)(s.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 hover:bg-accent shrink-0",onPointerDown:e=>{e.stopPropagation()},onClick:t=>{t.stopPropagation(),t.preventDefault(),console.log("[OutlineTreeItem] Lock clicked for:",e,r),g()},title:r?"Unlock component":"Lock component",children:r?(0,t.jsx)(j.Lock,{className:"h-3 w-3 text-orange-500"}):(0,t.jsx)(C,{className:"h-3 w-3 text-muted-foreground"})})]})]})};var R=e.i(72436);let D=({title:e,rows:o,components:a,selectedComponentId:n,onSelectComponent:s,onToggleVisibility:r,onToggleLock:l})=>{let[d,c]=(0,i.useState)(new Set(o.map(e=>e.id))),[u,p]=(0,i.useState)(new Set),m=[...o].sort((e,t)=>e.position-t.position);return(0,t.jsx)(y.DndContext,{collisionDetection:y.closestCenter,onDragEnd:e=>{console.log("Drag ended in outline:",e)},children:(0,t.jsxs)("div",{className:"flex flex-col h-full bg-background",children:[(0,t.jsxs)("div",{className:"p-4 border-b",children:[(0,t.jsx)("h3",{className:"font-semibold text-sm",children:e}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[o.length," row",1!==o.length?"s":"",", ",a.length," component",1!==a.length?"s":""]})]}),(0,t.jsx)(w.ScrollArea,{className:"flex-1",children:(0,t.jsx)(x.SortableContext,{items:a.map(e=>e.id),strategy:x.verticalListSortingStrategy,children:(0,t.jsx)("div",{className:"p-2 space-y-1",children:0===m.length?(0,t.jsx)("div",{className:"text-center py-8 text-sm text-muted-foreground",children:"No content yet"}):m.map((e,i)=>{let o=d.has(e.id);return(0,t.jsxs)("div",{children:[(0,t.jsx)(P,{id:`row-${e.id}`,label:`Row ${i+1} (${e.columns} column${1!==e.columns?"s":""})`,type:"row",level:0,hasChildren:!0,isExpanded:o,onToggleExpand:()=>{var t;return t=e.id,void c(e=>{let i=new Set(e);return i.has(t)?i.delete(t):i.add(t),i})},onSelect:()=>{}}),o&&Array.from({length:e.columns},(i,o)=>{let d,c=(d=e.id,a.filter(e=>e.row_id===d&&e.column_index===o).sort((e,t)=>e.position-t.position)),m=`${e.id}-${o}`,f=u.has(m);return(0,t.jsxs)("div",{children:[e.columns>1&&(0,t.jsx)(P,{id:`col-${m}`,label:`Column ${o+1}`,type:"column",level:1,hasChildren:c.length>0,isExpanded:f,onToggleExpand:()=>{p(e=>{let t=new Set(e);return t.has(m)?t.delete(m):t.add(m),t})},onSelect:()=>{}}),(1===e.columns||f)&&c.map(i=>{let o,a;return console.log("[OutlinePanel] Rendering component:",i.id,{hasVisibilityHandler:!!r,hasLockHandler:!!l,hasSelectHandler:!!s}),(0,t.jsx)(P,{id:i.id,label:(o=i.content,a=i.component_type,o?.text?o.text.substring(0,30):o?.title?o.title.substring(0,30):o?.label?o.label.substring(0,30):o?.alt?o.alt.substring(0,30):a.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")),type:"component",componentType:i.component_type,level:e.columns>1?2:1,visible:!1!==(i.styles||{}).visible,locked:!0===(i.styles||{}).locked,isSelected:n===i.id,onSelect:()=>{console.log("[OutlinePanel] onSelect called for:",i.id),s(i.id)},onToggleVisibility:()=>{console.log("[OutlinePanel] onToggleVisibility called for:",i.id),r(i.id)},onToggleLock:()=>{console.log("[OutlinePanel] onToggleLock called for:",i.id),l(i.id)}},i.id)})]},m)}),i<m.length-1&&(0,t.jsx)(R.Separator,{className:"my-2"})]},e.id)})})})})]})})};var E=e.i(30909),T=e.i(70956);let M=(0,_.default)("Shapes",[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]]),L=({showOutline:e,onToggle:i,title:o,rows:a,components:n,selectedComponentId:r,onSelectComponent:l,onToggleVisibility:d,onToggleLock:c,isLayoutEditor:u=!1})=>e?(0,t.jsxs)(E.Sidebar,{children:[(0,t.jsx)(E.SidebarHeader,{className:"p-4 border-b",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"Structure"}),(0,t.jsxs)(s.Button,{variant:"ghost",size:"sm",onClick:i,className:"gap-2",title:"Switch to Components",children:[(0,t.jsx)(M,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-xs",children:"Components"})]})]})}),(0,t.jsx)(E.SidebarContent,{className:"p-0",children:(0,t.jsx)(D,{title:o,rows:a,components:n,selectedComponentId:r,onSelectComponent:l,onToggleVisibility:d,onToggleLock:c})})]}):(0,t.jsx)(g.ComponentsSidebar,{isLayoutEditor:u,renderHeader:()=>(0,t.jsx)("div",{className:"p-4 border-b bg-muted/30",children:(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-sm",children:"Add Components"}),(0,t.jsxs)(s.Button,{variant:"ghost",size:"sm",onClick:i,className:"gap-1 h-8",title:"Switch to Outline View",children:[(0,t.jsx)(T.List,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-xs",children:"Outline"})]})]})})});var F=e.i(20501),I=e.i(48152),q=e.i(49459),O=e.i(84608);e.s(["default",0,()=>{let e=(0,o.useParams)().pageId,g=(0,o.useRouter)(),{copiedComponent:x}=(0,n.useClipboard)(),[w,b]=(0,i.useState)(null),[v,k]=(0,i.useState)([]),[j,_]=(0,i.useState)([]),[C,S]=(0,i.useState)(!0),[N,P]=(0,i.useState)(!1),[R,D]=(0,i.useState)(null),[T,M]=(0,i.useState)([]),[A,V]=(0,i.useState)(null),[z,H]=(0,i.useState)([]),[U,B]=(0,i.useState)([]),[K,$]=(0,i.useState)(new Map),[G,W]=(0,i.useState)(null),[X,J]=(0,i.useState)(!1),Y=(0,q.useHistory)();(0,O.useKeyboardShortcuts)({onUndo:()=>Y.canUndo&&Y.undo(),onRedo:()=>Y.canRedo&&Y.redo(),onDelete:()=>G&&ed(G),onDuplicate:()=>G&&eu(G)}),(0,i.useEffect)(()=>{Q(),Z()},[e]);let Z=async()=>{let{data:e}=await a.supabase.from("layouts").select("*").eq("is_published",!0).order("title");M(e||[])},Q=async()=>{if(!e)return;let{data:t,error:i}=await a.supabase.from("pages").select("*").eq("id",e).single();if(i){d.toast.error("Failed to load page"),g.push("/admin");return}let{data:o}=await a.supabase.from("page_rows").select("*").eq("page_id",e).order("position"),{data:n}=await a.supabase.from("page_components").select("*").eq("page_id",e).order("position");b(t),k(o||[]),_(n||[]),S(!1)},ee=async()=>{if(!e)return;let{data:t,error:i}=await a.supabase.from("page_rows").insert({page_id:e,position:v.length,columns:1}).select().single();i?d.toast.error("Failed to add row"):(k([...v,t]),d.toast.success("Row added"))},et=async e=>{if(!confirm("Delete this row and all its components?"))return;let{error:t}=await a.supabase.from("page_rows").delete().eq("id",e);t?d.toast.error("Failed to delete row"):(k(v.filter(t=>t.id!==e)),_(j.filter(t=>t.row_id!==e)),d.toast.success("Row deleted"))},ei=async(e,t)=>{let{error:i}=await a.supabase.from("page_rows").update({columns:t}).eq("id",e);i?d.toast.error("Failed to update columns"):k(v.map(i=>i.id===e?{...i,columns:t}:i))},eo=async(e,t)=>{let{error:i}=await a.supabase.from("page_rows").update({styles:t}).eq("id",e);i?d.toast.error("Failed to update row styles"):k(v.map(i=>i.id===e?{...i,styles:t}:i))},ea=async(e,t)=>{let{error:i}=await a.supabase.from("page_rows").update({column_widths:t}).eq("id",e);i?d.toast.error("Failed to update column widths"):k(v.map(i=>i.id===e?{...i,column_widths:t}:i))},en=async(e,t)=>{let{error:i}=await a.supabase.from("page_rows").update({responsive_config:t}).eq("id",e);i?d.toast.error("Failed to update responsive config"):k(v.map(i=>i.id===e?{...i,responsive_config:t}:i))},es=async(e,t)=>{let{error:i}=await a.supabase.from("page_components").update({styles:t}).eq("id",e);i?d.toast.error("Failed to update component styles"):_(j.map(i=>i.id===e?{...i,styles:t}:i))},er=async e=>{k(e);for(let t=0;t<e.length;t++)await a.supabase.from("page_rows").update({position:t}).eq("id",e[t].id)},el=async(e,t)=>{let{error:i}=await a.supabase.from("page_components").update({content:t}).eq("id",e);i?d.toast.error("Failed to update component"):_(j.map(i=>i.id===e?{...i,content:t}:i))},ed=async e=>{let{error:t}=await a.supabase.from("page_components").delete().eq("id",e);t?d.toast.error("Failed to delete component"):(_(j.filter(t=>t.id!==e)),d.toast.success("Component deleted"))},ec=async t=>{if(e){for(let i of t.rows||[]){let{data:t,error:o}=await a.supabase.from("page_rows").insert({page_id:e,position:v.length,columns:i.columns||1,column_widths:i.column_widths||[],styles:i.styles||{}}).select().single();if(o||!t){d.toast.error("Failed to insert template row");continue}for(let o of i.components||[])await a.supabase.from("page_components").insert({page_id:e,row_id:t.id,component_type:o.component_type,column_index:o.column_index,position:o.position,content:o.content||{},styles:o.styles||{}})}await Q(),d.toast.success("Template inserted successfully")}},eu=async t=>{let i=j.find(e=>e.id===t);if(!i||!e)return;let o=j.filter(e=>e.row_id===i.row_id&&e.column_index===i.column_index),{data:n,error:s}=await a.supabase.from("page_components").insert({page_id:e,row_id:i.row_id,column_index:i.column_index,component_type:i.component_type,content:i.content,position:o.length,is_widget_instance:i.is_widget_instance,widget_id:i.widget_id}).select().single();s?d.toast.error("Failed to duplicate component"):(_([...j,n]),d.toast.success("Component duplicated"))},ep=async(t,i)=>{if(!x||!e)return;let o=j.filter(e=>e.row_id===t&&e.column_index===i),{data:n,error:s}=await a.supabase.from("page_components").insert({page_id:e,row_id:t,column_index:i,component_type:x.component_type,content:x.content,position:o.length,is_widget_instance:x.is_widget_instance,widget_id:x.widget_id}).select().single();s?d.toast.error("Failed to paste component"):(_([...j,n]),d.toast.success("Component pasted"))},em=async(e,t)=>{let i=j.find(t=>t.id===e);if(!i)return;let o=j.filter(e=>e.row_id===i.row_id&&e.column_index===i.column_index).sort((e,t)=>e.position-t.position).map((o,n)=>o.id===e?a.supabase.from("page_components").update({position:t}).eq("id",o.id):n>=t&&o.position<i.position?a.supabase.from("page_components").update({position:n+1}).eq("id",o.id):n<=t&&o.position>i.position?a.supabase.from("page_components").update({position:n-1}).eq("id",o.id):null).filter(Boolean);await Promise.all(o),await Q(),d.toast.success("Component moved")},ef=async t=>{let i=v.find(e=>e.id===t);if(!i||!e)return;let{error:o}=await a.supabase.from("page_rows").insert({page_id:e,position:i.position,columns:1});if(o)return void d.toast.error("Failed to add row");let n=v.filter(e=>e.position>=i.position);await Promise.all(n.map(e=>a.supabase.from("page_rows").update({position:e.position+1}).eq("id",e.id))),await Q(),d.toast.success("Row added")},eh=async t=>{let i=v.find(e=>e.id===t);if(!i||!e)return;let{error:o}=await a.supabase.from("page_rows").insert({page_id:e,position:i.position+1,columns:1});if(o)return void d.toast.error("Failed to add row");let n=v.filter(e=>e.position>i.position);await Promise.all(n.map(e=>a.supabase.from("page_rows").update({position:e.position+1}).eq("id",e.id))),await Q(),d.toast.success("Row added")},eg=async t=>{let i=v.find(e=>e.id===t);if(!i||!e)return;let{data:o,error:n}=await a.supabase.from("page_rows").insert({page_id:e,position:i.position+1,columns:i.columns,styles:i.styles,column_widths:i.column_widths}).select().single();if(n||!o)return void d.toast.error("Failed to duplicate row");let s=j.filter(e=>e.row_id===t);await Promise.all(s.map(t=>a.supabase.from("page_components").insert({page_id:e,row_id:o.id,column_index:t.column_index,position:t.position,component_type:t.component_type,content:t.content,styles:t.styles}))),await Q(),d.toast.success("Row duplicated")},ey=async e=>{console.log("[PageEditor] Toggle visibility for:",e);let t=j.find(t=>t.id===e);if(!t)return void console.log("[PageEditor] Component not found!");let i=t.styles||{},o=!1!==i.visible,n=!o;console.log("[PageEditor] Visibility change:",{currentVisible:o,newVisible:n,currentStyles:i});let{error:s}=await a.supabase.from("page_components").update({styles:{...i,visible:n}}).eq("id",e);if(s){console.error("[PageEditor] Error updating visibility:",s),d.toast.error("Failed to update visibility");return}await Q(),d.toast.success(n?"Component shown":"Component hidden")},ex=async e=>{console.log("[PageEditor] Toggle lock for:",e);let t=j.find(t=>t.id===e);if(!t)return void console.log("[PageEditor] Component not found!");let i=t.styles||{},o=!i.locked;console.log("[PageEditor] Lock change:",{currentLocked:i.locked,newLocked:o,currentStyles:i});let{error:n}=await a.supabase.from("page_components").update({styles:{...i,locked:o}}).eq("id",e);if(n){console.error("[PageEditor] Error updating lock:",n),d.toast.error("Failed to update lock");return}await Q(),d.toast.success(o?"Component locked":"Component unlocked")},ew=async t=>{let{active:i,over:o}=t;if(!o)return void D(null);let n=i.id,s=i.data.current,r=o.data.current;if((n.startsWith("new-")||n.startsWith("new-widget-"))&&(s?.type==="new-component"||s?.type==="new-widget")){let t=r?.rowId,i=r?.columnIndex;if(!t||null===i||!e)return void D(null);let o=j.filter(e=>e.row_id===t&&e.column_index===i);if("new-widget"===s.type){let{data:n,error:r}=await a.supabase.from("page_components").insert({page_id:e,row_id:t,column_index:i,component_type:"paragraph",content:{text:`Widget: ${s.widgetTitle}`},position:o.length,is_widget_instance:!0,widget_id:s.widgetId}).select().single();r?d.toast.error("Failed to add widget"):(_([...j,n]),d.toast.success("Widget added"))}else{let n=s.componentType,{data:r,error:l}=await a.supabase.from("page_components").insert({page_id:e,row_id:t,column_index:i,component_type:n,content:(e=>{switch(e){case"heading":return{text:"New Heading",level:"h2"};case"paragraph":return{text:"New paragraph text"};case"image":return{url:"",alt:"Image"};case"button":return{text:"Click me",link:""};case"link":return{text:"Link",url:""};case"video":return{url:""};case"divider":case"page-content":default:return{};case"spacer":return{height:"medium"};case"quote":return{text:"Quote text",author:""};case"list":return{items:"Item 1\nItem 2\nItem 3",type:"bullet"};case"code":return{code:"console.log('Hello');",language:"javascript"};case"entity-list":return{entityId:"",fields:[],displayStyle:"grid",limit:10,sortBy:"",sortOrder:"desc",showPublishedOnly:!0};case"entity-detail":return{entityId:"",recordId:"",fields:[],layout:"vertical"};case"query":return{queryId:""};case"datasource":return{dataSourceType:"entity",viewType:"table",viewOptions:{visibleColumns:[],sortField:null,sortOrder:"asc",filters:[]}};case"chart":return{chartType:"bar",data:JSON.stringify([{name:"Jan",value:400},{name:"Feb",value:300},{name:"Mar",value:600},{name:"Apr",value:800},{name:"May",value:500},{name:"Jun",value:700}],null,2),title:"Sample Bar Chart",xAxisKey:"name",yAxisKey:"value"};case"tabs":return{tabs:[{id:"tab-1",label:"Tab 1",content:"Content 1"},{id:"tab-2",label:"Tab 2",content:"Content 2"}]};case"accordion":return{items:[{id:"item-1",title:"Section 1",content:"Content 1"},{id:"item-2",title:"Section 2",content:"Content 2"}]};case"card":return{layout:"image-top",title:"Card Title",description:"Card description",imageUrl:"",buttonText:"Learn More",buttonLink:""};case"form-input":return{fieldName:"field_name",label:"Field Label",placeholder:"Enter value...",inputType:"text",required:!1};case"form-textarea":return{fieldName:"message",label:"Message",placeholder:"Enter your message...",rows:4,required:!1};case"form-select":return{fieldName:"select_field",label:"Select Option",placeholder:"Choose...",options:"Option 1\nOption 2\nOption 3",required:!1};case"form-checkbox":return{fieldName:"checkbox_field",label:"Select Options",options:"Option 1\nOption 2\nOption 3",type:"checkbox",required:!1};case"form-submit":return{buttonText:"Submit",buttonVariant:"default",successMessage:"Form submitted successfully!",submitAction:"custom"}}})(n),position:o.length}).select().single();l?d.toast.error("Failed to add component"):(_([...j,r]),d.toast.success("Component added"))}return void D(null)}let l=j.find(e=>e.id===n);if(!l)return void D(null);await a.supabase.from("page_components").update({row_id:l.row_id,column_index:l.column_index}).eq("id",n);let c=j.filter(e=>e.row_id===l.row_id&&e.column_index===l.column_index).sort((e,t)=>e.position-t.position);for(let e=0;e<c.length;e++)await a.supabase.from("page_components").update({position:e}).eq("id",c[e].id);D(null)},eb=async()=>{if(!w)return;let e=null,t=[],i=[];if(w.layout_id){let{data:o}=await a.supabase.from("layouts").select("*").eq("id",w.layout_id).single();if(o){e=o;let{data:n}=await a.supabase.from("layout_rows").select("*").eq("layout_id",w.layout_id).order("position"),{data:s}=await a.supabase.from("layout_components").select("*").eq("layout_id",w.layout_id).order("position");t=n||[],i=s||[]}}let o=j.filter(e=>!!(e.is_widget_instance&&e.widget_id)),n=new Map;for(let e of o)if(!n.has(e.widget_id)){let{data:t}=await a.supabase.from("widget_rows").select("*").eq("widget_id",e.widget_id).order("position"),{data:i}=await a.supabase.from("widget_components").select("*").eq("widget_id",e.widget_id).order("position");n.set(e.widget_id,{rows:t||[],components:i||[]})}V(e),H(t),B(i),$(n),P(!0)},ev=async()=>{if(!w)return;let{error:e}=await a.supabase.from("pages").update({is_published:!w.is_published}).eq("id",w.id);e?d.toast.error("Failed to update page"):(b({...w,is_published:!w.is_published}),d.toast.success(w.is_published?"Page unpublished":"Page published"))},ek=async e=>{if(!w)return;let{error:t}=await a.supabase.from("pages").update({layout_id:e||null}).eq("id",w.id);t?d.toast.error("Failed to update layout"):(b({...w,layout_id:e||null}),d.toast.success("Layout updated"))};return C?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.PagePreviewModal,{open:N,onOpenChange:P,page:w,rows:v,components:j,layout:A,layoutRows:z,layoutComponents:U,widgetData:K}),(0,t.jsx)(y.DndContext,{collisionDetection:y.pointerWithin,onDragStart:e=>{let{active:t}=e,i=t.data.current;i?.type==="new-component"?D(i.componentType):i?.type==="new-widget"&&D("widget")},onDragEnd:ew,onDragOver:e=>{let{active:t,over:i}=e;if(!i)return;let o=t.id;i.id;let a=t.data.current,n=i.data.current;if(a?.type==="component"&&n?.type==="droppable-column"){let e=a.component,t=n.rowId,i=n.columnIndex;(e.row_id!==t||e.column_index!==i)&&_(j.map(e=>e.id===o?{...e,row_id:t,column_index:i}:e))}},children:(0,t.jsx)(E.SidebarProvider,{children:(0,t.jsxs)("div",{className:"min-h-screen flex w-full bg-background",children:[(0,t.jsx)(L,{showOutline:X,onToggle:()=>J(!X),title:w?.title||"Page",rows:v,components:j,selectedComponentId:G,onSelectComponent:W,onToggleVisibility:ey,onToggleLock:ex}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsx)("header",{className:"border-b bg-card shadow-[var(--shadow-soft)] sticky top-0 z-50",children:(0,t.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(E.SidebarTrigger,{}),(0,t.jsxs)(s.Button,{variant:"outline",onClick:()=>g.push("/admin"),className:"gap-2",children:[(0,t.jsx)(c.ArrowLeft,{className:"h-4 w-4"}),"Back"]}),(0,t.jsx)("h1",{className:"text-xl font-bold",children:w?.title})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Label,{htmlFor:"layout-select",className:"text-sm",children:"Layout:"}),(0,t.jsxs)(r.Select,{value:w?.layout_id??"none",onValueChange:e=>ek("none"===e?null:e),children:[(0,t.jsx)(r.SelectTrigger,{id:"layout-select",className:"w-[200px]",children:(0,t.jsx)(r.SelectValue,{placeholder:"No layout"})}),(0,t.jsxs)(r.SelectContent,{children:[(0,t.jsx)(r.SelectItem,{value:"none",children:"No layout"}),T.map(e=>(0,t.jsx)(r.SelectItem,{value:e.id,children:e.title},e.id))]})]})]}),(0,t.jsx)(s.Button,{variant:"ghost",size:"icon",onClick:()=>Y.undo(),disabled:!Y.canUndo,title:"Undo (Cmd+Z)",children:(0,t.jsx)(f.Undo,{className:"h-4 w-4"})}),(0,t.jsx)(s.Button,{variant:"ghost",size:"icon",onClick:()=>Y.redo(),disabled:!Y.canRedo,title:"Redo (Cmd+Shift+Z)",children:(0,t.jsx)(h.Redo,{className:"h-4 w-4"})}),(0,t.jsxs)(s.Button,{variant:"outline",onClick:eb,className:"gap-2",children:[(0,t.jsx)(m.Monitor,{className:"h-4 w-4"}),"Preview"]}),(0,t.jsx)(s.Button,{variant:w?.is_published?"outline":"default",onClick:ev,className:"gap-2",children:w?.is_published?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.EyeOff,{className:"h-4 w-4"}),"Unpublish"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Eye,{className:"h-4 w-4"}),"Publish"]})})]})]})}),(0,t.jsx)("main",{className:"flex-1 overflow-auto px-4 py-8",children:(0,t.jsx)(I.GridCanvas,{rows:v,components:j,onUpdateComponent:el,onUpdateComponentStyles:es,onDeleteComponent:ed,onAddRow:ee,onDeleteRow:et,onUpdateRowColumns:ei,onUpdateRowStyles:eo,onUpdateRowColumnWidths:ea,onUpdateRowResponsiveConfig:en,onReorderRows:er,activeComponentType:R,onDuplicateComponent:eu,onPasteComponent:ep,onInsertTemplate:ec,onMoveComponentToPosition:em,onAddRowAbove:ef,onAddRowBelow:eh,onDuplicateRow:eg})})]})]})})})]})}],89366)},11737,e=>{e.v(e=>Promise.resolve().then(()=>e(6085)))}]);