(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70946,e=>{"use strict";var t=e.i(43476),i=e.i(71645),a=e.i(76639),o=e.i(19455),n=e.i(37727),s=e.i(31310),r=e.i(25037),l=e.i(18812);e.s(["WidgetPreviewModal",0,({open:e,onOpenChange:d,widget:c,rows:u,components:p})=>{let[m,f]=(0,i.useState)("desktop");return(0,t.jsx)(a.Dialog,{open:e,onOpenChange:d,children:(0,t.jsxs)(a.DialogContent,{className:"max-w-[95vw] max-h-[90vh] p-0 gap-0",hideClose:!0,children:[(0,t.jsxs)(a.DialogTitle,{className:"sr-only",children:["Widget Preview: ",c?.title]}),(0,t.jsxs)("div",{className:"flex items-center justify-between border-b px-4 py-3 bg-card",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold","aria-hidden":"true",children:["Widget Preview: ",c?.title]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(r.ResponsiveControls,{currentBreakpoint:m,onBreakpointChange:f}),(0,t.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:()=>d(!1),children:(0,t.jsx)(n.X,{className:"h-4 w-4"})})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-auto bg-background",children:(0,t.jsx)(l.DeviceFrame,{breakpoint:m,children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-8 space-y-8",children:[u.sort((e,t)=>e.position-t.position).map(e=>{let i=p.filter(t=>t.row_id===e.id).sort((e,t)=>e.position-t.position),a=Array.from({length:e.columns},()=>[]);return i.forEach(t=>{t.column_index<e.columns&&a[t.column_index].push(t)}),(0,t.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${e.columns}, 1fr)`},children:a.map((e,i)=>(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,t.jsx)(s.ComponentRenderer,{component:e},e.id))},i))},e.id)}),0===u.length&&(0,t.jsx)("p",{className:"text-center text-muted-foreground py-8",children:"No content yet. Add rows and components to see the preview."})]})})})]})})}])},74886,e=>{"use strict";let t=(0,e.i(75254).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],74886)},48256,e=>{"use strict";let t=(0,e.i(75254).default)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);e.s(["Globe",()=>t],48256)},17923,e=>{"use strict";let t=(0,e.i(75254).default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);e.s(["BarChart3",()=>t],17923)},80376,e=>{"use strict";var t=e.i(43476),i=e.i(26999),a=e.i(25913),o=e.i(37727),n=e.i(71645),s=e.i(75157);let r=i.Root,l=i.Trigger;i.Close;let d=i.Portal,c=n.forwardRef(({className:e,...a},o)=>(0,t.jsx)(i.Overlay,{className:(0,s.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a,ref:o}));c.displayName=i.Overlay.displayName;let u=(0,a.cva)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),p=n.forwardRef(({side:e="right",className:a,children:n,...r},l)=>(0,t.jsxs)(d,{children:[(0,t.jsx)(c,{}),(0,t.jsxs)(i.Content,{ref:l,className:(0,s.cn)(u({side:e}),a),...r,children:[n,(0,t.jsxs)(i.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[(0,t.jsx)(o.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));p.displayName=i.Content.displayName;let m=({className:e,...i})=>(0,t.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...i});m.displayName="SheetHeader";let f=n.forwardRef(({className:e,...a},o)=>(0,t.jsx)(i.Title,{ref:o,className:(0,s.cn)("text-lg font-semibold text-foreground",e),...a}));f.displayName=i.Title.displayName,n.forwardRef(({className:e,...a},o)=>(0,t.jsx)(i.Description,{ref:o,className:(0,s.cn)("text-sm text-muted-foreground",e),...a})).displayName=i.Description.displayName,e.s(["Sheet",()=>r,"SheetContent",()=>p,"SheetHeader",()=>m,"SheetTitle",()=>f,"SheetTrigger",()=>l])},30325,73264,46387,71245,e=>{"use strict";var t=e.i(75254);let i=(0,t.default)("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);e.s(["Table2",()=>i],30325);let a=(0,t.default)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);e.s(["LayoutGrid",()=>a],73264);let o=(0,t.default)("Columns3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);e.s(["Columns3",()=>o],46387);let n=(0,t.default)("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);e.s(["Images",()=>n],71245)},99602,54449,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["ArrowUpDown",()=>t],99602);var i=e.i(43476),a=e.i(10204),o=e.i(67489),n=e.i(57428),s=e.i(50570),r=e.i(62050);e.s(["CardLayoutEditor",0,({fields:e,layout:t,onChange:l,showImageField:d=!0})=>{let c=e.filter(e=>e.field_type===r.E_FieldDataType.Image);return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(a.Label,{className:"text-sm font-medium",children:"Title Field *"}),(0,i.jsxs)(o.Select,{value:t.titleField,onValueChange:e=>l({...t,titleField:e}),children:[(0,i.jsx)(o.SelectTrigger,{className:"mt-1",children:(0,i.jsx)(o.SelectValue,{placeholder:"Select title field"})}),(0,i.jsx)(o.SelectContent,{children:e.map(e=>(0,i.jsx)(o.SelectItem,{value:e.name,children:e.display_name},e.name))})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(a.Label,{className:"text-sm font-medium",children:"Subtitle Field (Optional)"}),(0,i.jsxs)(o.Select,{value:t.subtitleField||"none",onValueChange:e=>l({...t,subtitleField:"none"===e?void 0:e}),children:[(0,i.jsx)(o.SelectTrigger,{className:"mt-1",children:(0,i.jsx)(o.SelectValue,{placeholder:"Select subtitle field"})}),(0,i.jsxs)(o.SelectContent,{children:[(0,i.jsx)(o.SelectItem,{value:"none",children:"None"}),e.map(e=>(0,i.jsx)(o.SelectItem,{value:e.name,children:e.display_name},e.name))]})]})]}),d&&c.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)(a.Label,{className:"text-sm font-medium",children:"Image Field (Optional)"}),(0,i.jsxs)(o.Select,{value:t.imageField||"none",onValueChange:e=>l({...t,imageField:"none"===e?void 0:e}),children:[(0,i.jsx)(o.SelectTrigger,{className:"mt-1",children:(0,i.jsx)(o.SelectValue,{placeholder:"Select image field"})}),(0,i.jsxs)(o.SelectContent,{children:[(0,i.jsx)(o.SelectItem,{value:"none",children:"None"}),c.map(e=>(0,i.jsx)(o.SelectItem,{value:e.name,children:e.display_name},e.name))]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(a.Label,{className:"text-sm font-medium mb-2 block",children:"Additional Fields to Display"}),(0,i.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.map(e=>{let o=t.displayFields.some(t=>t.fieldId===e.name),r=e.name===t.titleField,d=e.name===t.subtitleField,c=e.name===t.imageField,u=r||d||c;return(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(s.GripVertical,{className:"h-4 w-4 text-muted-foreground"}),(0,i.jsx)(n.Checkbox,{id:`display-${e.name}`,checked:o,disabled:u,onCheckedChange:i=>{var a;let o;return a=e.name,o=i?[...t.displayFields,{fieldId:a,position:t.displayFields.length}]:t.displayFields.filter(e=>e.fieldId!==a),void l({...t,displayFields:o})}}),(0,i.jsxs)(a.Label,{htmlFor:`display-${e.name}`,className:`font-normal cursor-pointer flex-1 ${u?"text-muted-foreground":""}`,children:[e.display_name,u&&(0,i.jsxs)("span",{className:"text-xs ml-2",children:["(Used as ",r?"title":d?"subtitle":"image",")"]})]})]},e.name)})})]})]})}],54449)},39616,e=>{"use strict";let t=(0,e.i(75254).default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Settings",()=>t],39616)},24687,e=>{"use strict";var t=e.i(43476),i=e.i(71645),a=e.i(75157);let o=i.forwardRef(({className:e,...i},o)=>(0,t.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:o,...i}));o.displayName="Textarea",e.s(["Textarea",()=>o])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},50570,e=>{"use strict";let t=(0,e.i(75254).default)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);e.s(["GripVertical",()=>t],50570)},57428,e=>{"use strict";var t=e.i(43476),i=e.i(71645),a=e.i(20783),o=e.i(30030),n=e.i(81140),s=e.i(69340),r=e.i(99682),l=e.i(35804),d=e.i(96626),c=e.i(48425),u="Checkbox",[p,m]=(0,o.createContextScope)(u),[f,h]=p(u);function y(e){let{__scopeCheckbox:a,checked:o,children:n,defaultChecked:r,disabled:l,form:d,name:c,onCheckedChange:p,required:m,value:h="on",internal_do_not_use_render:y}=e,[x,w]=(0,s.useControllableState)({prop:o,defaultProp:r??!1,onChange:p,caller:u}),[g,b]=i.useState(null),[v,k]=i.useState(null),j=i.useRef(!1),C=!g||!!d||!!g.closest("form"),S={checked:x,disabled:l,setChecked:w,control:g,setControl:b,name:c,form:d,value:h,hasConsumerStoppedPropagationRef:j,required:m,defaultChecked:!_(r)&&r,isFormControl:C,bubbleInput:v,setBubbleInput:k};return(0,t.jsx)(f,{scope:a,...S,children:"function"==typeof y?y(S):n})}var x="CheckboxTrigger",w=i.forwardRef(({__scopeCheckbox:e,onKeyDown:o,onClick:s,...r},l)=>{let{control:d,value:u,disabled:p,checked:m,required:f,setControl:y,setChecked:w,hasConsumerStoppedPropagationRef:g,isFormControl:b,bubbleInput:v}=h(x,e),k=(0,a.useComposedRefs)(l,y),j=i.useRef(m);return i.useEffect(()=>{let e=d?.form;if(e){let t=()=>w(j.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[d,w]),(0,t.jsx)(c.Primitive.button,{type:"button",role:"checkbox","aria-checked":_(m)?"mixed":m,"aria-required":f,"data-state":C(m),"data-disabled":p?"":void 0,disabled:p,value:u,...r,ref:k,onKeyDown:(0,n.composeEventHandlers)(o,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,n.composeEventHandlers)(s,e=>{w(e=>!!_(e)||!e),v&&b&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})})});w.displayName=x;var g=i.forwardRef((e,i)=>{let{__scopeCheckbox:a,name:o,checked:n,defaultChecked:s,required:r,disabled:l,value:d,onCheckedChange:c,form:u,...p}=e;return(0,t.jsx)(y,{__scopeCheckbox:a,checked:n,defaultChecked:s,disabled:l,required:r,onCheckedChange:c,name:o,form:u,value:d,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w,{...p,ref:i,__scopeCheckbox:a}),e&&(0,t.jsx)(j,{__scopeCheckbox:a})]})})});g.displayName=u;var b="CheckboxIndicator",v=i.forwardRef((e,i)=>{let{__scopeCheckbox:a,forceMount:o,...n}=e,s=h(b,a);return(0,t.jsx)(d.Presence,{present:o||_(s.checked)||!0===s.checked,children:(0,t.jsx)(c.Primitive.span,{"data-state":C(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:i,style:{pointerEvents:"none",...e.style}})})});v.displayName=b;var k="CheckboxBubbleInput",j=i.forwardRef(({__scopeCheckbox:e,...o},n)=>{let{control:s,hasConsumerStoppedPropagationRef:d,checked:u,defaultChecked:p,required:m,disabled:f,name:y,value:x,form:w,bubbleInput:g,setBubbleInput:b}=h(k,e),v=(0,a.useComposedRefs)(n,b),j=(0,r.usePrevious)(u),C=(0,l.useSize)(s);i.useEffect(()=>{if(!g)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!d.current;if(j!==u&&e){let i=new Event("click",{bubbles:t});g.indeterminate=_(u),e.call(g,!_(u)&&u),g.dispatchEvent(i)}},[g,j,u,d]);let S=i.useRef(!_(u)&&u);return(0,t.jsx)(c.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??S.current,required:m,disabled:f,name:y,value:x,form:w,...o,tabIndex:-1,ref:v,style:{...o.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function _(e){return"indeterminate"===e}function C(e){return _(e)?"indeterminate":e?"checked":"unchecked"}j.displayName=k;var S=e.i(43531),N=e.i(75157);let R=i.forwardRef(({className:e,...i},a)=>(0,t.jsx)(g,{ref:a,className:(0,N.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...i,children:(0,t.jsx)(v,{className:(0,N.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(S.Check,{className:"h-4 w-4"})})}));R.displayName=g.displayName,e.s(["Checkbox",()=>R],57428)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},87316,61277,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["default",()=>t],61277),e.s(["Calendar",()=>t],87316)},71649,e=>{"use strict";let t=(0,e.i(75254).default)("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);e.s(["Type",()=>t],71649)},73708,21345,e=>{"use strict";var t=e.i(75254);let i=(0,t.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>i],73708);let a=(0,t.default)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);e.s(["Link",()=>a],21345)},63488,e=>{"use strict";let t=(0,e.i(75254).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>t],63488)},47780,e=>{"use strict";let t=(0,e.i(75254).default)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);e.s(["Palette",()=>t],47780)},14683,e=>{"use strict";let t=(0,e.i(75254).default)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Circle",()=>t],14683)},67692,e=>{"use strict";var t=e.i(43476),i=e.i(71645),a=e.i(70152),o=e.i(81140),n=e.i(20783),s=e.i(30030),r=e.i(69340),l=e.i(86318),d=e.i(99682),c=e.i(35804),u=e.i(48425),p=e.i(75830),m=["PageUp","PageDown"],f=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],h={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},y="Slider",[x,w,g]=(0,p.createCollection)(y),[b,v]=(0,s.createContextScope)(y,[g]),[k,j]=b(y),_=i.forwardRef((e,n)=>{let{name:s,min:l=0,max:d=100,step:c=1,orientation:u="horizontal",disabled:p=!1,minStepsBetweenThumbs:h=0,defaultValue:y=[l],value:w,onValueChange:g=()=>{},onValueCommit:b=()=>{},inverted:v=!1,form:j,..._}=e,C=i.useRef(new Set),S=i.useRef(0),D="horizontal"===u,[P=[],M]=(0,r.useControllableState)({prop:w,defaultProp:y,onChange:e=>{let t=[...C.current];t[S.current]?.focus(),g(e)}}),E=i.useRef(P);function F(e,t,{commit:i}={commit:!1}){let o,n=(String(c).split(".")[1]||"").length,s=Math.round((Math.round((e-l)/c)*c+l)*(o=Math.pow(10,n)))/o,r=(0,a.clamp)(s,[l,d]);M((e=[])=>{let a=function(e=[],t,i){let a=[...e];return a[i]=t,a.sort((e,t)=>e-t)}(e,r,t);if(!function(e,t){if(t>0)return Math.min(...e.slice(0,-1).map((t,i)=>e[i+1]-t))>=t;return!0}(a,h*c))return e;{S.current=a.indexOf(r);let t=String(a)!==String(e);return t&&i&&b(a),t?a:e}})}return(0,t.jsx)(k,{scope:e.__scopeSlider,name:s,disabled:p,min:l,max:d,valueIndexToChangeRef:S,thumbs:C.current,values:P,orientation:u,form:j,children:(0,t.jsx)(x.Provider,{scope:e.__scopeSlider,children:(0,t.jsx)(x.Slot,{scope:e.__scopeSlider,children:(0,t.jsx)(D?N:R,{"aria-disabled":p,"data-disabled":p?"":void 0,..._,ref:n,onPointerDown:(0,o.composeEventHandlers)(_.onPointerDown,()=>{p||(E.current=P)}),min:l,max:d,inverted:v,onSlideStart:p?void 0:function(e){let t=function(e,t){if(1===e.length)return 0;let i=e.map(e=>Math.abs(e-t)),a=Math.min(...i);return i.indexOf(a)}(P,e);F(e,t)},onSlideMove:p?void 0:function(e){F(e,S.current)},onSlideEnd:p?void 0:function(){let e=E.current[S.current];P[S.current]!==e&&b(P)},onHomeKeyDown:()=>!p&&F(l,0,{commit:!0}),onEndKeyDown:()=>!p&&F(d,P.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!p){let i=m.includes(e.key)||e.shiftKey&&f.includes(e.key),a=S.current;F(P[a]+c*(i?10:1)*t,a,{commit:!0})}}})})})})});_.displayName=y;var[C,S]=b(y,{startEdge:"left",endEdge:"right",size:"width",direction:1}),N=i.forwardRef((e,a)=>{let{min:o,max:s,dir:r,inverted:d,onSlideStart:c,onSlideMove:u,onSlideEnd:p,onStepKeyDown:m,...f}=e,[y,x]=i.useState(null),w=(0,n.useComposedRefs)(a,e=>x(e)),g=i.useRef(void 0),b=(0,l.useDirection)(r),v="ltr"===b,k=v&&!d||!v&&d;function j(e){let t=g.current||y.getBoundingClientRect(),i=U([0,t.width],k?[o,s]:[s,o]);return g.current=t,i(e-t.left)}return(0,t.jsx)(C,{scope:e.__scopeSlider,startEdge:k?"left":"right",endEdge:k?"right":"left",direction:k?1:-1,size:"width",children:(0,t.jsx)(D,{dir:b,"data-orientation":"horizontal",...f,ref:w,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{let t=j(e.clientX);c?.(t)},onSlideMove:e=>{let t=j(e.clientX);u?.(t)},onSlideEnd:()=>{g.current=void 0,p?.()},onStepKeyDown:e=>{let t=h[k?"from-left":"from-right"].includes(e.key);m?.({event:e,direction:t?-1:1})}})})}),R=i.forwardRef((e,a)=>{let{min:o,max:s,inverted:r,onSlideStart:l,onSlideMove:d,onSlideEnd:c,onStepKeyDown:u,...p}=e,m=i.useRef(null),f=(0,n.useComposedRefs)(a,m),y=i.useRef(void 0),x=!r;function w(e){let t=y.current||m.current.getBoundingClientRect(),i=U([0,t.height],x?[s,o]:[o,s]);return y.current=t,i(e-t.top)}return(0,t.jsx)(C,{scope:e.__scopeSlider,startEdge:x?"bottom":"top",endEdge:x?"top":"bottom",size:"height",direction:x?1:-1,children:(0,t.jsx)(D,{"data-orientation":"vertical",...p,ref:f,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{let t=w(e.clientY);l?.(t)},onSlideMove:e=>{let t=w(e.clientY);d?.(t)},onSlideEnd:()=>{y.current=void 0,c?.()},onStepKeyDown:e=>{let t=h[x?"from-bottom":"from-top"].includes(e.key);u?.({event:e,direction:t?-1:1})}})})}),D=i.forwardRef((e,i)=>{let{__scopeSlider:a,onSlideStart:n,onSlideMove:s,onSlideEnd:r,onHomeKeyDown:l,onEndKeyDown:d,onStepKeyDown:c,...p}=e,h=j(y,a);return(0,t.jsx)(u.Primitive.span,{...p,ref:i,onKeyDown:(0,o.composeEventHandlers)(e.onKeyDown,e=>{"Home"===e.key?(l(e),e.preventDefault()):"End"===e.key?(d(e),e.preventDefault()):m.concat(f).includes(e.key)&&(c(e),e.preventDefault())}),onPointerDown:(0,o.composeEventHandlers)(e.onPointerDown,e=>{let t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),h.thumbs.has(t)?t.focus():n(e)}),onPointerMove:(0,o.composeEventHandlers)(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&s(e)}),onPointerUp:(0,o.composeEventHandlers)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),r(e))})})}),P="SliderTrack",M=i.forwardRef((e,i)=>{let{__scopeSlider:a,...o}=e,n=j(P,a);return(0,t.jsx)(u.Primitive.span,{"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation,...o,ref:i})});M.displayName=P;var E="SliderRange",F=i.forwardRef((e,a)=>{let{__scopeSlider:o,...s}=e,r=j(E,o),l=S(E,o),d=i.useRef(null),c=(0,n.useComposedRefs)(a,d),p=r.values.length,m=r.values.map(e=>L(e,r.min,r.max)),f=p>1?Math.min(...m):0,h=100-Math.max(...m);return(0,t.jsx)(u.Primitive.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...s,ref:c,style:{...e.style,[l.startEdge]:f+"%",[l.endEdge]:h+"%"}})});F.displayName=E;var T="SliderThumb",I=i.forwardRef((e,a)=>{let o=w(e.__scopeSlider),[s,r]=i.useState(null),l=(0,n.useComposedRefs)(a,e=>r(e)),d=i.useMemo(()=>s?o().findIndex(e=>e.ref.current===s):-1,[o,s]);return(0,t.jsx)(q,{...e,ref:l,index:d})}),q=i.forwardRef((e,a)=>{var s,r,l,d,p;let m,f,{__scopeSlider:h,index:y,name:w,...g}=e,b=j(T,h),v=S(T,h),[k,_]=i.useState(null),C=(0,n.useComposedRefs)(a,e=>_(e)),N=!k||b.form||!!k.closest("form"),R=(0,c.useSize)(k),D=b.values[y],P=void 0===D?0:L(D,b.min,b.max),M=(s=y,(r=b.values.length)>2?`Value ${s+1} of ${r}`:2===r?["Minimum","Maximum"][s]:void 0),E=R?.[v.size],F=E?(l=E,d=P,p=v.direction,f=U([0,50],[0,m=l/2]),(m-f(d)*p)*p):0;return i.useEffect(()=>{if(k)return b.thumbs.add(k),()=>{b.thumbs.delete(k)}},[k,b.thumbs]),(0,t.jsxs)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[v.startEdge]:`calc(${P}% + ${F}px)`},children:[(0,t.jsx)(x.ItemSlot,{scope:e.__scopeSlider,children:(0,t.jsx)(u.Primitive.span,{role:"slider","aria-label":e["aria-label"]||M,"aria-valuemin":b.min,"aria-valuenow":D,"aria-valuemax":b.max,"aria-orientation":b.orientation,"data-orientation":b.orientation,"data-disabled":b.disabled?"":void 0,tabIndex:b.disabled?void 0:0,...g,ref:C,style:void 0===D?{display:"none"}:e.style,onFocus:(0,o.composeEventHandlers)(e.onFocus,()=>{b.valueIndexToChangeRef.current=y})})}),N&&(0,t.jsx)(A,{name:w??(b.name?b.name+(b.values.length>1?"[]":""):void 0),form:b.form,value:D},y)]})});I.displayName=T;var A=i.forwardRef(({__scopeSlider:e,value:a,...o},s)=>{let r=i.useRef(null),l=(0,n.useComposedRefs)(r,s),c=(0,d.usePrevious)(a);return i.useEffect(()=>{let e=r.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(c!==a&&t){let i=new Event("input",{bubbles:!0});t.call(e,a),e.dispatchEvent(i)}},[c,a]),(0,t.jsx)(u.Primitive.input,{style:{display:"none"},...o,ref:l,defaultValue:a})});function L(e,t,i){return(0,a.clamp)(100/(i-t)*(e-t),[0,100])}function U(e,t){return i=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(i-e[0])}}A.displayName="RadioBubbleInput";var O=e.i(75157);let z=i.forwardRef(({className:e,...i},a)=>(0,t.jsxs)(_,{ref:a,className:(0,O.cn)("relative flex w-full touch-none select-none items-center",e),...i,children:[(0,t.jsx)(M,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,t.jsx)(F,{className:"absolute h-full bg-primary"})}),(0,t.jsx)(I,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));z.displayName=_.displayName,e.s(["Slider",()=>z],67692)},40325,21430,49459,84608,e=>{"use strict";var t=e.i(75254);let i=(0,t.default)("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);e.s(["Undo",()=>i],40325);let a=(0,t.default)("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);e.s(["Redo",()=>a],21430);var o=e.i(71645);e.s(["useHistory",0,()=>{let[e,t]=(0,o.useState)([]),[i,a]=(0,o.useState)(-1),n=(0,o.useCallback)(o=>{let n={...o,timestamp:Date.now()};n.execute();let s=e.slice(0,i+1);s.push(n),s.length>50?(s.shift(),a(49)):a(s.length-1),t(s)},[e,i]),s=(0,o.useCallback)(()=>{i<0||(e[i].undo(),a(i-1))},[e,i]),r=(0,o.useCallback)(()=>{if(i>=e.length-1)return;let t=i+1;e[t].execute(),a(t)},[e,i]),l=i>=0;return{execute:n,undo:s,redo:r,canUndo:l,canRedo:i<e.length-1,clear:(0,o.useCallback)(()=>{t([]),a(-1)},[])}}],49459);let n=e=>!!e&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable);e.s(["useKeyboardShortcuts",0,e=>{(0,o.useEffect)(()=>{let t=t=>{let i=navigator.platform.toUpperCase().indexOf("MAC")>=0?t.metaKey:t.ctrlKey;if(i&&("z"===t.key||"y"===t.key||"d"===t.key||"c"===t.key||"v"===t.key||"s"===t.key)&&t.preventDefault(),i&&"z"===t.key&&!t.shiftKey&&e.onUndo)return void e.onUndo();if(i&&"z"===t.key&&t.shiftKey||i&&"y"===t.key){e.onRedo&&e.onRedo();return}if(("Backspace"===t.key||"Delete"===t.key)&&!n(t.target)){e.onDelete&&(t.preventDefault(),e.onDelete());return}i&&"d"===t.key&&e.onDuplicate?e.onDuplicate():i&&"c"===t.key&&!n(t.target)&&e.onCopy?e.onCopy():i&&"v"===t.key&&!n(t.target)&&e.onPaste?e.onPaste():i&&"s"===t.key&&e.onSave&&e.onSave()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e])}],84608)},89225,e=>{"use strict";var t=e.i(43476),i=e.i(71645),a=e.i(18566),o=e.i(41867),n=e.i(63749),s=e.i(19455),r=e.i(46696),l=e.i(71689),d=e.i(86536),c=e.i(77705),u=e.i(51445),p=e.i(40325),m=e.i(21430),f=e.i(41396),h=e.i(48152),y=e.i(30909),x=e.i(77183),w=e.i(70946),g=e.i(49459),b=e.i(84608);e.s(["default",0,()=>{let e=(0,a.useParams)().widgetId,v=(0,a.useRouter)(),{copiedComponent:k}=(0,n.useClipboard)(),[j,_]=(0,i.useState)(null),[C,S]=(0,i.useState)([]),[N,R]=(0,i.useState)([]),[D,P]=(0,i.useState)(!0),[M,E]=(0,i.useState)(null),[F,T]=(0,i.useState)(!1),[I,q]=(0,i.useState)(null),A=(0,g.useHistory)();(0,b.useKeyboardShortcuts)({onUndo:()=>A.canUndo&&A.undo(),onRedo:()=>A.canRedo&&A.redo(),onDelete:()=>I&&$(I),onDuplicate:()=>I&&J(I)}),(0,i.useEffect)(()=>{L()},[e]);let L=async()=>{if(!e)return;let{data:t,error:i}=await o.supabase.from("widgets").select("*").eq("id",e).single();if(i){r.toast.error("Failed to load widget"),v.push("/admin/widgets");return}let{data:a}=await o.supabase.from("widget_rows").select("*").eq("widget_id",e).order("position"),{data:n}=await o.supabase.from("widget_components").select("*").eq("widget_id",e).order("position");_(t),S(a||[]),R(n||[]),P(!1)},U=async()=>{if(!e)return;let{data:t,error:i}=await o.supabase.from("widget_rows").insert({widget_id:e,position:C.length,columns:1}).select().single();i?r.toast.error("Failed to add row"):(S([...C,t]),r.toast.success("Row added"))},O=async e=>{if(!confirm("Delete this row and all its components?"))return;let{error:t}=await o.supabase.from("widget_rows").delete().eq("id",e);t?r.toast.error("Failed to delete row"):(S(C.filter(t=>t.id!==e)),R(N.filter(t=>t.row_id!==e)),r.toast.success("Row deleted"))},z=async(e,t)=>{let i=C.find(t=>t.id===e);i&&A.execute({execute:async()=>{let{error:i}=await o.supabase.from("widget_rows").update({columns:t}).eq("id",e);i?r.toast.error("Failed to update columns"):S(C.map(i=>i.id===e?{...i,columns:t}:i))},undo:async()=>{await o.supabase.from("widget_rows").update({columns:i.columns}).eq("id",e),S(C.map(t=>t.id===e?{...t,columns:i.columns}:t))}})},H=async(e,t)=>{let{error:i}=await o.supabase.from("widget_rows").update({styles:t}).eq("id",e);i?r.toast.error("Failed to update row styles"):S(C.map(i=>i.id===e?{...i,styles:t}:i))},V=async(e,t)=>{let{error:i}=await o.supabase.from("widget_rows").update({column_widths:t}).eq("id",e);i?r.toast.error("Failed to update column widths"):S(C.map(i=>i.id===e?{...i,column_widths:t}:i))},B=async(e,t)=>{let{error:i}=await o.supabase.from("widget_rows").update({responsive_config:t}).eq("id",e);i?r.toast.error("Failed to update responsive config"):S(C.map(i=>i.id===e?{...i,responsive_config:t}:i))},K=async(e,t)=>{let{error:i}=await o.supabase.from("widget_components").update({styles:t}).eq("id",e);i?r.toast.error("Failed to update component styles"):R(N.map(i=>i.id===e?{...i,styles:t}:i))},W=async e=>{S(e);for(let t=0;t<e.length;t++)await o.supabase.from("widget_rows").update({position:t}).eq("id",e[t].id)},G=async(e,t)=>{let{error:i}=await o.supabase.from("widget_components").update({content:t}).eq("id",e);i?r.toast.error("Failed to update component"):R(N.map(i=>i.id===e?{...i,content:t}:i))},$=async e=>{let{error:t}=await o.supabase.from("widget_components").delete().eq("id",e);t?r.toast.error("Failed to delete component"):(R(N.filter(t=>t.id!==e)),r.toast.success("Component deleted"))},X=async t=>{if(e){for(let i of t.rows||[]){let{data:t,error:a}=await o.supabase.from("widget_rows").insert({widget_id:e,position:C.length,columns:i.columns||1,column_widths:i.column_widths||[],styles:i.styles||{}}).select().single();if(a||!t){r.toast.error("Failed to insert template row");continue}for(let a of i.components||[])await o.supabase.from("widget_components").insert({widget_id:e,row_id:t.id,component_type:a.component_type,column_index:a.column_index,position:a.position,content:a.content||{},styles:a.styles||{}})}await L(),r.toast.success("Template inserted successfully")}},J=async t=>{let i=N.find(e=>e.id===t);if(!i||!e)return;let a=N.filter(e=>e.row_id===i.row_id&&e.column_index===i.column_index),{data:n,error:s}=await o.supabase.from("widget_components").insert({widget_id:e,row_id:i.row_id,column_index:i.column_index,component_type:i.component_type,content:i.content,position:a.length}).select().single();s?r.toast.error("Failed to duplicate component"):(R([...N,n]),r.toast.success("Component duplicated"))},Y=async(t,i)=>{if(!k||!e)return;let a=N.filter(e=>e.row_id===t&&e.column_index===i),{data:n,error:s}=await o.supabase.from("widget_components").insert({widget_id:e,row_id:t,column_index:i,component_type:k.component_type,content:k.content,position:a.length}).select().single();s?r.toast.error("Failed to paste component"):(R([...N,n]),r.toast.success("Component pasted"))},Z=async(e,t)=>{let i=N.find(t=>t.id===e);if(!i)return;let a=N.filter(e=>e.row_id===i.row_id&&e.column_index===i.column_index).sort((e,t)=>e.position-t.position).map((a,n)=>a.id===e?o.supabase.from("widget_components").update({position:t}).eq("id",a.id):n>=t&&a.position<i.position?o.supabase.from("widget_components").update({position:n+1}).eq("id",a.id):n<=t&&a.position>i.position?o.supabase.from("widget_components").update({position:n-1}).eq("id",a.id):null).filter(Boolean);await Promise.all(a),await L(),r.toast.success("Component moved")},Q=async t=>{let i=C.find(e=>e.id===t);if(!i||!e)return;let{error:a}=await o.supabase.from("widget_rows").insert({widget_id:e,position:i.position,columns:1});if(a)return void r.toast.error("Failed to add row");let n=C.filter(e=>e.position>=i.position);await Promise.all(n.map(e=>o.supabase.from("widget_rows").update({position:e.position+1}).eq("id",e.id))),await L(),r.toast.success("Row added")},ee=async t=>{let i=C.find(e=>e.id===t);if(!i||!e)return;let{error:a}=await o.supabase.from("widget_rows").insert({widget_id:e,position:i.position+1,columns:1});if(a)return void r.toast.error("Failed to add row");let n=C.filter(e=>e.position>i.position);await Promise.all(n.map(e=>o.supabase.from("widget_rows").update({position:e.position+1}).eq("id",e.id))),await L(),r.toast.success("Row added")},et=async t=>{let i=C.find(e=>e.id===t);if(!i||!e)return;let{data:a,error:n}=await o.supabase.from("widget_rows").insert({widget_id:e,position:i.position+1,columns:i.columns,styles:i.styles,column_widths:i.column_widths}).select().single();if(n||!a)return void r.toast.error("Failed to duplicate row");let s=N.filter(e=>e.row_id===t);await Promise.all(s.map(t=>o.supabase.from("widget_components").insert({widget_id:e,row_id:a.id,column_index:t.column_index,position:t.position,component_type:t.component_type,content:t.content,styles:t.styles}))),await L(),r.toast.success("Row duplicated")},ei=async t=>{let{active:i,over:a}=t;if(!a)return void E(null);let n=i.id,s=i.data.current,l=a.data.current;if(n.startsWith("new-")&&s?.type==="new-component"){let t=l?.rowId,i=l?.columnIndex;if(!t||null===i||!e)return void E(null);let a=s.componentType,n=N.filter(e=>e.row_id===t&&e.column_index===i),{data:d,error:c}=await o.supabase.from("widget_components").insert({widget_id:e,row_id:t,column_index:i,component_type:a,content:(e=>{switch(e){case"heading":return{text:"New Heading",level:"h2"};case"paragraph":return{text:"New paragraph text"};case"image":return{url:"",alt:"Image"};case"button":return{text:"Click me",link:""};case"link":return{text:"Link",url:""};case"video":return{url:""};case"divider":default:return{};case"spacer":return{height:"medium"};case"quote":return{text:"Quote text",author:""};case"list":return{items:"Item 1\nItem 2\nItem 3",type:"bullet"};case"code":return{code:"console.log('Hello');",language:"javascript"};case"query":return{queryId:""};case"datasource":return{dataSourceType:"entity",viewType:"table",viewOptions:{visibleColumns:[],sortField:null,sortOrder:"asc",filters:[]}};case"chart":return{chartType:"bar",data:JSON.stringify([{name:"Jan",value:400},{name:"Feb",value:300},{name:"Mar",value:600},{name:"Apr",value:800},{name:"May",value:500},{name:"Jun",value:700}],null,2),title:"Sample Bar Chart",xAxisKey:"name",yAxisKey:"value"};case"tabs":return{tabs:[{id:"tab-1",label:"Tab 1",content:"Content 1"},{id:"tab-2",label:"Tab 2",content:"Content 2"}]};case"accordion":return{items:[{id:"item-1",title:"Section 1",content:"Content 1"},{id:"item-2",title:"Section 2",content:"Content 2"}]};case"card":return{layout:"image-top",title:"Card Title",description:"Card description",imageUrl:"",buttonText:"Learn More",buttonLink:""};case"form-input":return{fieldName:"field_name",label:"Field Label",placeholder:"Enter value...",inputType:"text",required:!1};case"form-textarea":return{fieldName:"message",label:"Message",placeholder:"Enter your message...",rows:4,required:!1};case"form-select":return{fieldName:"select_field",label:"Select Option",placeholder:"Choose...",options:"Option 1\nOption 2\nOption 3",required:!1};case"form-checkbox":return{fieldName:"checkbox_field",label:"Select Options",options:"Option 1\nOption 2\nOption 3",type:"checkbox",required:!1};case"form-submit":return{buttonText:"Submit",buttonVariant:"default",successMessage:"Form submitted successfully!",submitAction:"custom"}}})(a),position:n.length}).select().single();return c?r.toast.error("Failed to add component"):(R([...N,d]),r.toast.success("Component added")),void E(null)}let d=N.find(e=>e.id===n);if(!d)return void E(null);await o.supabase.from("widget_components").update({row_id:d.row_id,column_index:d.column_index}).eq("id",n);let c=N.filter(e=>e.row_id===d.row_id&&e.column_index===d.column_index).sort((e,t)=>e.position-t.position);for(let e=0;e<c.length;e++)await o.supabase.from("widget_components").update({position:e}).eq("id",c[e].id);E(null)},ea=async()=>{if(!j)return;let{error:e}=await o.supabase.from("widgets").update({is_published:!j.is_published}).eq("id",j.id);e?r.toast.error("Failed to update widget"):(_({...j,is_published:!j.is_published}),r.toast.success(j.is_published?"Widget unpublished":"Widget published"))};return D?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):(0,t.jsxs)(x.DndContext,{collisionDetection:x.pointerWithin,onDragStart:e=>{let{active:t}=e,i=t.data.current;i?.type==="new-component"&&E(i.componentType)},onDragEnd:ei,onDragOver:e=>{let{active:t,over:i}=e;if(!i)return;let a=t.id,o=t.data.current,n=i.data.current;if(o?.type==="component"&&n?.type==="droppable-column"){let e=o.component,t=n.rowId,i=n.columnIndex;(e.row_id!==t||e.column_index!==i)&&R(N.map(e=>e.id===a?{...e,row_id:t,column_index:i}:e))}},children:[(0,t.jsx)(y.SidebarProvider,{children:(0,t.jsxs)("div",{className:"min-h-screen flex w-full bg-background",children:[(0,t.jsx)(f.ComponentsSidebar,{}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsx)("header",{className:"border-b bg-card shadow-[var(--shadow-soft)] sticky top-0 z-50",children:(0,t.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(y.SidebarTrigger,{}),(0,t.jsxs)(s.Button,{variant:"outline",onClick:()=>v.push("/admin/widgets"),className:"gap-2",children:[(0,t.jsx)(l.ArrowLeft,{className:"h-4 w-4"}),"Back"]}),(0,t.jsx)("h1",{className:"text-xl font-bold",children:j?.title})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(s.Button,{variant:"ghost",size:"icon",onClick:()=>A.undo(),disabled:!A.canUndo,title:"Undo (Cmd+Z)",children:(0,t.jsx)(p.Undo,{className:"h-4 w-4"})}),(0,t.jsx)(s.Button,{variant:"ghost",size:"icon",onClick:()=>A.redo(),disabled:!A.canRedo,title:"Redo (Cmd+Shift+Z)",children:(0,t.jsx)(m.Redo,{className:"h-4 w-4"})}),(0,t.jsxs)(s.Button,{variant:"outline",onClick:()=>T(!0),className:"gap-2",children:[(0,t.jsx)(u.Monitor,{className:"h-4 w-4"}),"Preview"]}),(0,t.jsx)(s.Button,{variant:j?.is_published?"outline":"default",onClick:ea,className:"gap-2",children:j?.is_published?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.EyeOff,{className:"h-4 w-4"}),"Unpublish"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Eye,{className:"h-4 w-4"}),"Publish"]})})]})]})}),(0,t.jsx)("main",{className:"flex-1 overflow-auto px-4 py-8",children:(0,t.jsx)(h.GridCanvas,{rows:C,components:N,onUpdateComponent:G,onUpdateComponentStyles:K,onDeleteComponent:$,onAddRow:U,onDeleteRow:O,onUpdateRowColumns:z,onUpdateRowStyles:H,onUpdateRowColumnWidths:V,onUpdateRowResponsiveConfig:B,onReorderRows:W,activeComponentType:M,onDuplicateComponent:J,onPasteComponent:Y,onInsertTemplate:X,onMoveComponentToPosition:Z,onAddRowAbove:Q,onAddRowBelow:ee,onDuplicateRow:et})})]})]})}),(0,t.jsx)(w.WidgetPreviewModal,{open:F,onOpenChange:T,widget:j,rows:C,components:N})]})}])},11737,e=>{e.v(e=>Promise.resolve().then(()=>e(6085)))}]);